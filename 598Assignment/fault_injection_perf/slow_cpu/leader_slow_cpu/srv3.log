2022-04-28T03:49:52.649_599+00:00 [79305] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:49:52.651_021+00:00 [79305] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:49:52.651_050+00:00 [79305] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:49:52.651_058+00:00 [79305] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:49:52.651_079+00:00 [79305] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:49:52.651_083+00:00 [79305] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:49:52.651_086+00:00 [79305] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:49:52.651_117+00:00 [79305] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:49:52.651_253+00:00 [79342] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:49:54.226_332+00:00 [79313] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:49:54.226_343+00:00 [79313] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:49:54.226_357+00:00 [79313] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:49:54.226_368+00:00 [79313] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:49:54.226_375+00:00 [79313] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:49:54.226_378+00:00 [79313] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:49:54.226_401+00:00 [79313] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:49:54.226_456+00:00 [79341] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:49:54.226_463+00:00 [79341] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:49:54.226_474+00:00 [79341] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:50:04.714_075+00:00 [79313] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:50:04.714_095+00:00 [79313] [INFO] session 1 got connection from 127.0.0.1:54896 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:50:04.714_184+00:00 [79313] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:50:04.714_206+00:00 [79313] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:50:04.714_259+00:00 [79313] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:50:04.714_289+00:00 [79313] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:50:04.714_291+00:00 [79313] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:50:04.714_293+00:00 [79313] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:50:04.714_300+00:00 [79313] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:50:04.715_101+00:00 [79313] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54896 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:50:05.215_384+00:00 [79313] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:50:05.215_400+00:00 [79313] [INFO] session 2 got connection from 127.0.0.1:54898 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:50:05.215_504+00:00 [79313] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:50:05.215_508+00:00 [79313] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:50:05.215_648+00:00 [79313] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:50:05.215_652+00:00 [79313] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:50:05.215_719+00:00 [79341] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:50:05.215_722+00:00 [79341] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:50:05.215_731+00:00 [79341] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:50:05.215_733+00:00 [79341] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:50:05.215_741+00:00 [79341] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:50:05.215_754+00:00 [79341] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:50:05.215_759+00:00 [79341] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:50:05.215_779+00:00 [79341] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:50:24.456_371+00:00 [79339] [INFO] 0x7f4f44001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:50:24.456_505+00:00 [79339] [INFO] 0x7f4f380014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:51:10.190_899+00:00 [79446] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:51:10.192_286+00:00 [79446] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:51:10.192_317+00:00 [79446] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:51:10.192_328+00:00 [79446] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:51:10.192_351+00:00 [79446] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:51:10.192_355+00:00 [79446] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:51:10.192_358+00:00 [79446] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:51:10.192_388+00:00 [79446] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:51:10.192_542+00:00 [79483] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:51:11.589_625+00:00 [79454] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:51:11.589_637+00:00 [79454] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:51:11.589_651+00:00 [79454] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:51:11.589_669+00:00 [79454] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:51:11.589_675+00:00 [79454] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:51:11.589_679+00:00 [79454] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:51:11.589_696+00:00 [79454] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:51:11.589_759+00:00 [79482] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:51:11.589_767+00:00 [79482] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:51:11.589_777+00:00 [79482] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:51:22.501_284+00:00 [79454] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:51:22.501_307+00:00 [79454] [INFO] session 1 got connection from 127.0.0.1:54900 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:51:22.501_413+00:00 [79454] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:51:22.501_438+00:00 [79454] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:51:22.501_501+00:00 [79454] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:51:22.501_536+00:00 [79454] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:51:22.501_539+00:00 [79454] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:51:22.501_541+00:00 [79454] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:51:22.501_549+00:00 [79454] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:51:22.502_300+00:00 [79454] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54900 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:51:23.002_636+00:00 [79454] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:51:23.002_652+00:00 [79454] [INFO] session 2 got connection from 127.0.0.1:54902 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:51:23.002_781+00:00 [79454] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:51:23.002_785+00:00 [79454] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:51:23.002_951+00:00 [79454] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:51:23.002_956+00:00 [79454] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:51:23.003_032+00:00 [79482] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:51:23.003_035+00:00 [79482] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:51:23.003_044+00:00 [79482] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:51:23.003_046+00:00 [79482] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:51:23.003_053+00:00 [79482] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:51:23.003_067+00:00 [79482] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:51:23.003_072+00:00 [79482] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:51:23.003_092+00:00 [79482] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:51:41.747_643+00:00 [79480] [INFO] 0x7fcaa4001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:51:41.747_776+00:00 [79480] [INFO] 0x7fca980014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:51:41.747_876+00:00 [79480] [INFO] 0x7fca9c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:51:41.748_412+00:00 [79480] [INFO] 0x7fca8c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:52:27.193_223+00:00 [79585] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:52:27.195_412+00:00 [79585] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:52:27.195_443+00:00 [79585] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:52:27.195_451+00:00 [79585] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:52:27.195_474+00:00 [79585] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:52:27.195_478+00:00 [79585] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:52:27.195_481+00:00 [79585] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:52:27.195_520+00:00 [79585] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:52:27.196_060+00:00 [79622] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:52:29.232_751+00:00 [79593] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:52:29.232_763+00:00 [79593] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:52:29.232_777+00:00 [79593] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:52:29.232_788+00:00 [79593] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:52:29.232_795+00:00 [79593] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:52:29.232_798+00:00 [79593] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:52:29.232_817+00:00 [79593] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:52:29.232_873+00:00 [79621] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:52:29.232_880+00:00 [79621] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:52:29.232_890+00:00 [79621] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:52:38.755_571+00:00 [79593] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:52:38.755_594+00:00 [79593] [INFO] session 1 got connection from 127.0.0.1:54904 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:52:38.755_699+00:00 [79593] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:52:38.755_724+00:00 [79593] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:52:38.755_786+00:00 [79593] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:52:38.755_821+00:00 [79593] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:52:38.755_824+00:00 [79593] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:52:38.755_826+00:00 [79593] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:52:38.755_835+00:00 [79593] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:52:38.756_567+00:00 [79593] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54904 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:52:39.256_905+00:00 [79593] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:52:39.256_925+00:00 [79593] [INFO] session 2 got connection from 127.0.0.1:54906 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:52:39.257_045+00:00 [79593] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:52:39.257_050+00:00 [79593] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:52:39.257_205+00:00 [79593] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:52:39.257_209+00:00 [79593] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:52:39.257_284+00:00 [79621] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:52:39.257_287+00:00 [79621] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:52:39.257_296+00:00 [79621] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:52:39.257_297+00:00 [79621] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:52:39.257_305+00:00 [79621] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:52:39.257_318+00:00 [79621] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:52:39.257_323+00:00 [79621] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:52:39.257_343+00:00 [79621] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:52:59.251_544+00:00 [79618] [INFO] 0x7f47f0001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:52:59.251_695+00:00 [79618] [INFO] 0x7f47e80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:52:59.251_807+00:00 [79593] [INFO] 0x7f47ec0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:52:59.251_951+00:00 [79593] [INFO] 0x7f47e00014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:52:59.252_292+00:00 [79593] [INFO] 0x7f47d40014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:52:59.252_629+00:00 [79593] [INFO] 0x7f47cc0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:53:45.193_370+00:00 [79746] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:53:45.194_775+00:00 [79746] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:53:45.194_805+00:00 [79746] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:53:45.194_813+00:00 [79746] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:53:45.194_834+00:00 [79746] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:53:45.194_838+00:00 [79746] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:53:45.194_841+00:00 [79746] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:53:45.194_875+00:00 [79746] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:53:45.195_020+00:00 [79783] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:53:46.653_095+00:00 [79754] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:53:46.653_106+00:00 [79754] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:53:46.653_120+00:00 [79754] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:53:46.653_129+00:00 [79754] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:53:46.653_136+00:00 [79754] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:53:46.653_139+00:00 [79754] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:53:46.653_156+00:00 [79754] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:53:46.653_202+00:00 [79782] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:53:46.653_209+00:00 [79782] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:53:46.653_218+00:00 [79782] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:53:56.753_666+00:00 [79754] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:53:56.753_688+00:00 [79754] [INFO] session 1 got connection from 127.0.0.1:54908 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:53:56.753_797+00:00 [79754] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:53:56.753_823+00:00 [79754] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:53:56.753_883+00:00 [79754] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:53:56.753_919+00:00 [79754] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:53:56.753_922+00:00 [79754] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:53:56.753_924+00:00 [79754] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:53:56.753_932+00:00 [79754] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:53:56.754_648+00:00 [79754] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54908 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:53:57.255_016+00:00 [79768] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:53:57.255_034+00:00 [79768] [INFO] session 2 got connection from 127.0.0.1:54910 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:53:57.255_147+00:00 [79768] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:53:57.255_150+00:00 [79768] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:53:57.255_307+00:00 [79768] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:53:57.255_313+00:00 [79768] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:53:57.255_381+00:00 [79782] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:53:57.255_384+00:00 [79782] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:53:57.255_393+00:00 [79782] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:53:57.255_395+00:00 [79782] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:53:57.255_402+00:00 [79782] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:53:57.255_416+00:00 [79782] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:53:57.255_421+00:00 [79782] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:53:57.255_442+00:00 [79782] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:54:16.751_128+00:00 [79780] [INFO] 0x7f4710001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:16.751_261+00:00 [79780] [INFO] 0x7f47080014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:16.751_365+00:00 [79780] [INFO] 0x7f47000014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:16.751_623+00:00 [79774] [INFO] 0x7f47040014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:16.751_730+00:00 [79774] [INFO] 0x7f46f80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:16.751_819+00:00 [79774] [INFO] 0x7f46fc0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:16.751_988+00:00 [79774] [INFO] 0x7f46d80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:16.752_398+00:00 [79774] [INFO] 0x7f46d40014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:54:25.198_148+00:00 [79754] [INFO] 0x7f46f8014fd0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:02.198_851+00:00 [79973] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:55:02.201_480+00:00 [79973] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:55:02.201_516+00:00 [79973] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:55:02.201_525+00:00 [79973] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:55:02.201_553+00:00 [79973] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:55:02.201_558+00:00 [79973] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:55:02.201_562+00:00 [79973] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:55:02.201_591+00:00 [79973] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:55:02.202_145+00:00 [80010] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:55:03.556_819+00:00 [79981] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:55:03.556_830+00:00 [79981] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:55:03.556_846+00:00 [79981] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:55:03.556_857+00:00 [79981] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:55:03.556_864+00:00 [79981] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:55:03.556_868+00:00 [79981] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:55:03.556_886+00:00 [79981] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:55:03.556_939+00:00 [80009] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:55:03.556_947+00:00 [80009] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:55:03.556_957+00:00 [80009] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:55:14.259_347+00:00 [79981] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:55:14.259_379+00:00 [79981] [INFO] session 1 got connection from 127.0.0.1:54912 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:55:14.259_502+00:00 [79981] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:55:14.259_528+00:00 [79981] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:55:14.259_589+00:00 [79981] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:55:14.259_624+00:00 [79981] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:55:14.259_627+00:00 [79981] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:55:14.259_629+00:00 [79981] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:55:14.259_638+00:00 [79981] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:55:14.260_463+00:00 [79981] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54912 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:55:14.760_746+00:00 [79981] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:55:14.760_761+00:00 [79981] [INFO] session 2 got connection from 127.0.0.1:54914 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:55:14.760_861+00:00 [79981] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:55:14.760_865+00:00 [79981] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:55:14.761_018+00:00 [79981] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:55:14.761_023+00:00 [79981] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:55:14.761_109+00:00 [80009] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:55:14.761_112+00:00 [80009] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:55:14.761_121+00:00 [80009] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:55:14.761_123+00:00 [80009] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:55:14.761_130+00:00 [80009] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:55:14.761_143+00:00 [80009] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:55:14.761_148+00:00 [80009] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:55:14.761_168+00:00 [80009] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:55:33.757_490+00:00 [79999] [INFO] 0x7fd848001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.757_622+00:00 [79999] [INFO] 0x7fd8400014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.757_714+00:00 [79999] [INFO] 0x7fd8440014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.757_813+00:00 [79999] [INFO] 0x7fd8380014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.758_084+00:00 [80003] [INFO] 0x7fd83c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.758_187+00:00 [80003] [INFO] 0x7fd8300014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.758_283+00:00 [80003] [INFO] 0x7fd8340014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.758_373+00:00 [80003] [INFO] 0x7fd8280014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.758_522+00:00 [80003] [INFO] 0x7fd8000014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:55:33.758_654+00:00 [80003] [INFO] 0x7fd8000157e0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:19.186_972+00:00 [80195] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:56:19.188_372+00:00 [80195] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:56:19.188_403+00:00 [80195] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:56:19.188_411+00:00 [80195] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:56:19.188_435+00:00 [80195] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:56:19.188_439+00:00 [80195] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:56:19.188_442+00:00 [80195] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:56:19.188_478+00:00 [80195] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:56:19.188_641+00:00 [80232] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:56:20.926_754+00:00 [80203] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:56:20.926_767+00:00 [80203] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:56:20.926_782+00:00 [80203] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:56:20.926_793+00:00 [80203] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:56:20.926_800+00:00 [80203] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:56:20.926_803+00:00 [80203] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:56:20.926_823+00:00 [80203] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:56:20.926_875+00:00 [80231] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:56:20.926_883+00:00 [80231] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:56:20.926_893+00:00 [80231] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:56:30.998_948+00:00 [80203] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:56:30.998_972+00:00 [80203] [INFO] session 1 got connection from 127.0.0.1:54918 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:56:30.999_086+00:00 [80203] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:56:30.999_111+00:00 [80203] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:56:30.999_173+00:00 [80203] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:56:30.999_207+00:00 [80203] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:56:30.999_209+00:00 [80203] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:56:30.999_212+00:00 [80203] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:56:30.999_220+00:00 [80203] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:56:30.999_950+00:00 [80203] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54918 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:56:31.500_213+00:00 [80203] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:56:31.500_228+00:00 [80203] [INFO] session 2 got connection from 127.0.0.1:54920 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:56:31.500_322+00:00 [80203] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:56:31.500_326+00:00 [80203] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:56:31.500_469+00:00 [80203] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:56:31.500_474+00:00 [80203] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:56:31.500_537+00:00 [80231] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:56:31.500_541+00:00 [80231] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:56:31.500_550+00:00 [80231] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:56:31.500_552+00:00 [80231] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:56:31.500_559+00:00 [80231] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:56:31.500_572+00:00 [80231] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:56:31.500_577+00:00 [80231] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:56:31.500_596+00:00 [80231] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:56:50.995_621+00:00 [80222] [INFO] 0x7fb828001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.995_752+00:00 [80222] [INFO] 0x7fb8200014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.995_853+00:00 [80222] [INFO] 0x7fb8240014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.995_948+00:00 [80222] [INFO] 0x7fb8180014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.996_193+00:00 [80222] [INFO] 0x7fb81c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.996_296+00:00 [80222] [INFO] 0x7fb8100014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.996_393+00:00 [80222] [INFO] 0x7fb8140014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.996_488+00:00 [80222] [INFO] 0x7fb8080014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.996_574+00:00 [80222] [INFO] 0x7fb80c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:56:50.996_664+00:00 [80222] [INFO] 0x7fb8000014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:57:36.189_732+00:00 [80422] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:57:36.191_897+00:00 [80422] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:57:36.191_928+00:00 [80422] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:57:36.191_933+00:00 [80422] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:57:36.191_961+00:00 [80422] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:57:36.191_965+00:00 [80422] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:57:36.191_968+00:00 [80422] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:57:36.192_001+00:00 [80422] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:57:36.192_548+00:00 [80459] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:57:37.930_241+00:00 [80430] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:57:37.930_253+00:00 [80430] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:57:37.930_270+00:00 [80430] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:57:37.930_282+00:00 [80430] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:57:37.930_289+00:00 [80430] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:57:37.930_293+00:00 [80430] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:57:37.930_314+00:00 [80430] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:57:37.930_372+00:00 [80458] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:57:37.930_380+00:00 [80458] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:57:37.930_390+00:00 [80458] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:57:48.501_271+00:00 [80430] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:57:48.501_295+00:00 [80430] [INFO] session 1 got connection from 127.0.0.1:54922 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:57:48.501_417+00:00 [80430] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:57:48.501_445+00:00 [80430] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:57:48.501_511+00:00 [80430] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:57:48.501_550+00:00 [80430] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:57:48.501_553+00:00 [80430] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:57:48.501_555+00:00 [80430] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:57:48.501_565+00:00 [80430] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:57:48.502_523+00:00 [80430] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54922 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:57:49.002_898+00:00 [80430] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:57:49.002_915+00:00 [80430] [INFO] session 2 got connection from 127.0.0.1:54924 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:57:49.003_018+00:00 [80430] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:57:49.003_022+00:00 [80430] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:57:49.003_198+00:00 [80430] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:57:49.003_204+00:00 [80430] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:57:49.003_277+00:00 [80458] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:57:49.003_281+00:00 [80458] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:57:49.003_289+00:00 [80458] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:57:49.003_291+00:00 [80458] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:57:49.003_310+00:00 [80458] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:57:49.003_325+00:00 [80458] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:57:49.003_329+00:00 [80458] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:57:49.003_350+00:00 [80458] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:58:07.998_424+00:00 [80455] [INFO] 0x7ff424001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.998_560+00:00 [80455] [INFO] 0x7ff41c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.998_672+00:00 [80455] [INFO] 0x7ff4200014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.998_790+00:00 [80455] [INFO] 0x7ff4140014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.999_001+00:00 [80449] [INFO] 0x7ff4180014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.999_100+00:00 [80449] [INFO] 0x7ff40c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.999_186+00:00 [80449] [INFO] 0x7ff4100014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.999_271+00:00 [80449] [INFO] 0x7ff4040014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.999_352+00:00 [80449] [INFO] 0x7ff4080014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:07.999_432+00:00 [80449] [INFO] 0x7ff3fc0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:58:53.197_419+00:00 [80638] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T03:58:53.199_591+00:00 [80638] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T03:58:53.199_631+00:00 [80638] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T03:58:53.199_638+00:00 [80638] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T03:58:53.199_665+00:00 [80638] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T03:58:53.199_670+00:00 [80638] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T03:58:53.199_674+00:00 [80638] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T03:58:53.199_713+00:00 [80638] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T03:58:53.200_308+00:00 [80675] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T03:58:55.123_926+00:00 [80646] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T03:58:55.123_941+00:00 [80646] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T03:58:55.123_958+00:00 [80646] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T03:58:55.123_969+00:00 [80646] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T03:58:55.123_976+00:00 [80646] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T03:58:55.123_980+00:00 [80646] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T03:58:55.124_000+00:00 [80646] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T03:58:55.124_060+00:00 [80674] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:58:55.124_069+00:00 [80674] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:58:55.124_080+00:00 [80674] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:59:05.511_529+00:00 [80646] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:59:05.511_554+00:00 [80646] [INFO] session 1 got connection from 127.0.0.1:54926 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:59:05.511_665+00:00 [80646] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T03:59:05.511_691+00:00 [80646] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:59:05.511_753+00:00 [80646] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:59:05.511_788+00:00 [80646] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T03:59:05.511_791+00:00 [80646] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T03:59:05.511_793+00:00 [80646] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T03:59:05.511_803+00:00 [80646] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:59:05.512_543+00:00 [80646] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54926 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T03:59:06.012_985+00:00 [80646] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T03:59:06.013_000+00:00 [80646] [INFO] session 2 got connection from 127.0.0.1:54928 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T03:59:06.013_116+00:00 [80646] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T03:59:06.013_120+00:00 [80646] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T03:59:06.013_298+00:00 [80646] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:59:06.013_303+00:00 [80646] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T03:59:06.013_372+00:00 [80674] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:59:06.013_375+00:00 [80674] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:59:06.013_384+00:00 [80674] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:59:06.013_386+00:00 [80674] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T03:59:06.013_393+00:00 [80674] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T03:59:06.013_406+00:00 [80674] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T03:59:06.013_411+00:00 [80674] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T03:59:06.013_430+00:00 [80674] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T03:59:25.256_539+00:00 [80643] [INFO] 0x7fa494001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.256_673+00:00 [80643] [INFO] 0x7fa48c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.256_771+00:00 [80643] [INFO] 0x7fa4900014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.257_024+00:00 [80668] [INFO] 0x7fa4840014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.257_126+00:00 [80668] [INFO] 0x7fa4880014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.257_215+00:00 [80668] [INFO] 0x7fa47c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.257_303+00:00 [80668] [INFO] 0x7fa4800014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.257_390+00:00 [80668] [INFO] 0x7fa4740014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.257_472+00:00 [80668] [INFO] 0x7fa4780014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T03:59:25.257_556+00:00 [80668] [INFO] 0x7fa46c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:11.194_202+00:00 [80793] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:00:11.195_598+00:00 [80793] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:00:11.195_637+00:00 [80793] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:00:11.195_642+00:00 [80793] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:00:11.195_665+00:00 [80793] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:00:11.195_669+00:00 [80793] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:00:11.195_672+00:00 [80793] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:00:11.195_702+00:00 [80793] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:00:11.195_845+00:00 [80830] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:00:12.726_887+00:00 [80801] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:00:12.726_898+00:00 [80801] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:00:12.726_914+00:00 [80801] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:00:12.726_924+00:00 [80801] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:00:12.726_930+00:00 [80801] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:00:12.726_934+00:00 [80801] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:00:12.726_953+00:00 [80801] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:00:12.727_001+00:00 [80829] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:00:12.727_009+00:00 [80829] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:00:12.727_018+00:00 [80829] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:00:22.758_889+00:00 [80801] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:00:22.758_912+00:00 [80801] [INFO] session 1 got connection from 127.0.0.1:54930 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:00:22.759_022+00:00 [80801] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:00:22.759_051+00:00 [80801] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:00:22.759_115+00:00 [80801] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:00:22.759_150+00:00 [80801] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:00:22.759_153+00:00 [80801] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:00:22.759_156+00:00 [80801] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:00:22.759_164+00:00 [80801] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:00:22.759_846+00:00 [80801] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54930 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:00:23.260_159+00:00 [80801] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:00:23.260_176+00:00 [80801] [INFO] session 2 got connection from 127.0.0.1:54932 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:00:23.260_297+00:00 [80801] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:00:23.260_301+00:00 [80801] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:00:23.260_508+00:00 [80801] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:00:23.260_512+00:00 [80801] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:00:23.260_584+00:00 [80829] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:00:23.260_587+00:00 [80829] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:00:23.260_596+00:00 [80829] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:00:23.260_598+00:00 [80829] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:00:23.260_606+00:00 [80829] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:00:23.260_619+00:00 [80829] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:00:23.260_624+00:00 [80829] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:00:23.260_644+00:00 [80829] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:00:42.752_424+00:00 [80798] [INFO] 0x7f3d8c001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.752_578+00:00 [80798] [INFO] 0x7f3d840014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.752_696+00:00 [80798] [INFO] 0x7f3d880014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.752_975+00:00 [80798] [INFO] 0x7f3d7c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.753_124+00:00 [80798] [INFO] 0x7f3d800014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.753_236+00:00 [80798] [INFO] 0x7f3d740014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.753_342+00:00 [80798] [INFO] 0x7f3d780014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.753_465+00:00 [80798] [INFO] 0x7f3d6c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.753_699+00:00 [80798] [INFO] 0x7f3d700014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:00:42.753_784+00:00 [80798] [INFO] 0x7f3d640014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:01:28.195_839+00:00 [80948] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:01:28.197_305+00:00 [80948] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:01:28.197_343+00:00 [80948] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:01:28.197_349+00:00 [80948] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:01:28.197_378+00:00 [80948] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:01:28.197_384+00:00 [80948] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:01:28.197_387+00:00 [80948] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:01:28.197_422+00:00 [80948] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:01:28.197_603+00:00 [80985] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:01:30.098_690+00:00 [80956] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:01:30.098_703+00:00 [80956] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:01:30.098_720+00:00 [80956] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:01:30.098_731+00:00 [80956] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:01:30.098_738+00:00 [80956] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:01:30.098_743+00:00 [80956] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:01:30.098_763+00:00 [80956] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:01:30.098_824+00:00 [80984] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:01:30.098_833+00:00 [80984] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:01:30.098_844+00:00 [80984] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:01:40.010_415+00:00 [80956] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:01:40.010_438+00:00 [80956] [INFO] session 1 got connection from 127.0.0.1:54934 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:01:40.010_553+00:00 [80956] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:01:40.010_580+00:00 [80956] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:01:40.010_642+00:00 [80956] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:01:40.010_704+00:00 [80956] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:01:40.010_709+00:00 [80956] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:01:40.010_711+00:00 [80956] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:01:40.010_720+00:00 [80956] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:01:40.011_457+00:00 [80956] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54934 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:01:40.511_824+00:00 [80956] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:01:40.511_841+00:00 [80956] [INFO] session 2 got connection from 127.0.0.1:54936 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:01:40.511_950+00:00 [80956] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:01:40.511_954+00:00 [80956] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:01:40.512_122+00:00 [80956] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:01:40.512_126+00:00 [80956] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:01:40.512_194+00:00 [80984] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:01:40.512_197+00:00 [80984] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:01:40.512_206+00:00 [80984] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:01:40.512_208+00:00 [80984] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:01:40.512_215+00:00 [80984] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:01:40.512_229+00:00 [80984] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:01:40.512_234+00:00 [80984] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:01:40.512_254+00:00 [80984] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:02:00.254_491+00:00 [80953] [INFO] 0x7ff968001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.254_634+00:00 [80953] [INFO] 0x7ff9600014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.254_770+00:00 [80956] [INFO] 0x7ff9640014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.255_013+00:00 [80956] [INFO] 0x7ff9580014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.255_109+00:00 [80956] [INFO] 0x7ff95c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.255_191+00:00 [80956] [INFO] 0x7ff9500014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.255_275+00:00 [80956] [INFO] 0x7ff9540014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.255_354+00:00 [80956] [INFO] 0x7ff9480014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.255_433+00:00 [80956] [INFO] 0x7ff94c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:02:00.255_513+00:00 [80956] [INFO] 0x7ff9400014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:08:18.141_098+00:00 [81309] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:08:18.142_474+00:00 [81309] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:08:18.142_506+00:00 [81309] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:08:18.142_511+00:00 [81309] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:08:18.142_536+00:00 [81309] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:08:18.142_540+00:00 [81309] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:08:18.142_543+00:00 [81309] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:08:18.142_576+00:00 [81309] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:08:18.142_762+00:00 [81346] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:08:19.687_778+00:00 [81317] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:08:19.687_790+00:00 [81317] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:08:19.687_806+00:00 [81317] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:08:19.687_825+00:00 [81317] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:08:19.687_832+00:00 [81317] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:08:19.687_836+00:00 [81317] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:08:19.687_855+00:00 [81317] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:08:19.687_910+00:00 [81345] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:08:19.687_919+00:00 [81345] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:08:19.687_929+00:00 [81345] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:08:30.455_810+00:00 [81317] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:08:30.455_835+00:00 [81317] [INFO] session 1 got connection from 127.0.0.1:54938 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:08:30.455_957+00:00 [81317] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:08:30.455_986+00:00 [81317] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:08:30.456_051+00:00 [81317] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:08:30.456_088+00:00 [81317] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:08:30.456_091+00:00 [81317] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:08:30.456_093+00:00 [81317] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:08:30.456_102+00:00 [81317] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:08:30.456_778+00:00 [81317] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54938 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:08:30.957_254+00:00 [81317] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:08:30.957_271+00:00 [81317] [INFO] session 2 got connection from 127.0.0.1:54940 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:08:30.957_385+00:00 [81317] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:08:30.957_389+00:00 [81317] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:08:30.957_561+00:00 [81317] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:08:30.957_566+00:00 [81317] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:08:30.957_641+00:00 [81345] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:08:30.957_644+00:00 [81345] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:08:30.957_653+00:00 [81345] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:08:30.957_656+00:00 [81345] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:08:30.957_664+00:00 [81345] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:08:30.957_679+00:00 [81345] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:08:30.957_685+00:00 [81345] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:08:30.957_706+00:00 [81345] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:08:49.698_159+00:00 [81343] [INFO] 0x7f7c38001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:08:49.698_294+00:00 [81343] [INFO] 0x7f7c2c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:09:35.192_506+00:00 [81447] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:09:35.193_911+00:00 [81447] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:09:35.193_942+00:00 [81447] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:09:35.193_992+00:00 [81447] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:09:35.194_016+00:00 [81447] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:09:35.194_020+00:00 [81447] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:09:35.194_023+00:00 [81447] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:09:35.194_061+00:00 [81447] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:09:35.194_215+00:00 [81484] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:09:36.761_259+00:00 [81455] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:09:36.761_272+00:00 [81455] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:09:36.761_287+00:00 [81455] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:09:36.761_299+00:00 [81455] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:09:36.761_307+00:00 [81455] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:09:36.761_311+00:00 [81455] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:09:36.761_331+00:00 [81455] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:09:36.761_381+00:00 [81483] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:09:36.761_389+00:00 [81483] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:09:36.761_400+00:00 [81483] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:09:46.756_951+00:00 [81455] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:09:46.756_968+00:00 [81455] [INFO] session 1 got connection from 127.0.0.1:54942 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:09:46.757_071+00:00 [81455] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:09:46.757_097+00:00 [81455] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:09:46.757_163+00:00 [81455] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:09:46.757_198+00:00 [81455] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:09:46.757_201+00:00 [81455] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:09:46.757_203+00:00 [81455] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:09:46.757_211+00:00 [81455] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:09:46.757_973+00:00 [81455] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54942 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:09:47.258_315+00:00 [81455] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:09:47.258_335+00:00 [81455] [INFO] session 2 got connection from 127.0.0.1:54944 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:09:47.258_449+00:00 [81455] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:09:47.258_453+00:00 [81455] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:09:47.258_610+00:00 [81455] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:09:47.258_614+00:00 [81455] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:09:47.258_708+00:00 [81483] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:09:47.258_712+00:00 [81483] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:09:47.258_721+00:00 [81483] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:09:47.258_723+00:00 [81483] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:09:47.258_730+00:00 [81483] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:09:47.258_743+00:00 [81483] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:09:47.258_748+00:00 [81483] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:09:47.258_768+00:00 [81483] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:10:06.999_373+00:00 [81475] [INFO] 0x7fc6e4001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:10:06.999_507+00:00 [81475] [INFO] 0x7fc6d80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:10:06.999_904+00:00 [81470] [INFO] 0x7fc6dc0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:10:07.000_262+00:00 [81470] [INFO] 0x7fc6c40014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:10:52.191_413+00:00 [81597] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:10:52.193_077+00:00 [81597] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:10:52.193_112+00:00 [81597] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:10:52.193_122+00:00 [81597] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:10:52.193_150+00:00 [81597] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:10:52.193_155+00:00 [81597] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:10:52.193_159+00:00 [81597] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:10:52.193_198+00:00 [81597] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:10:52.193_364+00:00 [81634] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:10:53.611_404+00:00 [81605] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:10:53.611_417+00:00 [81605] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:10:53.611_431+00:00 [81605] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:10:53.611_446+00:00 [81605] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:10:53.611_452+00:00 [81605] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:10:53.611_456+00:00 [81605] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:10:53.611_475+00:00 [81605] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:10:53.611_533+00:00 [81633] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:10:53.611_541+00:00 [81633] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:10:53.611_551+00:00 [81633] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:11:04.005_844+00:00 [81605] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:11:04.005_866+00:00 [81605] [INFO] session 1 got connection from 127.0.0.1:54946 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:11:04.005_973+00:00 [81605] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:11:04.005_999+00:00 [81605] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:11:04.006_061+00:00 [81605] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:11:04.006_095+00:00 [81605] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:11:04.006_098+00:00 [81605] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:11:04.006_100+00:00 [81605] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:11:04.006_108+00:00 [81605] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:11:04.006_954+00:00 [81605] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54946 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:11:04.507_268+00:00 [81605] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:11:04.507_284+00:00 [81605] [INFO] session 2 got connection from 127.0.0.1:54948 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:11:04.507_387+00:00 [81605] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:11:04.507_391+00:00 [81605] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:11:04.507_552+00:00 [81605] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:11:04.507_556+00:00 [81605] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:11:04.507_625+00:00 [81633] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:11:04.507_628+00:00 [81633] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:11:04.507_637+00:00 [81633] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:11:04.507_639+00:00 [81633] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:11:04.507_647+00:00 [81633] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:11:04.507_660+00:00 [81633] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:11:04.507_665+00:00 [81633] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:11:04.507_685+00:00 [81633] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:11:23.748_684+00:00 [81602] [INFO] 0x7f40d0001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:11:23.748_818+00:00 [81602] [INFO] 0x7f40c80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:11:23.748_918+00:00 [81602] [INFO] 0x7f40cc0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:11:23.749_171+00:00 [81612] [INFO] 0x7f40c00014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:11:23.749_339+00:00 [81612] [INFO] 0x7f40a80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:11:23.749_485+00:00 [81612] [INFO] 0x7f40a00014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:09.193_849+00:00 [81741] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:12:09.195_254+00:00 [81741] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:12:09.195_285+00:00 [81741] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:12:09.195_292+00:00 [81741] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:12:09.195_315+00:00 [81741] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:12:09.195_319+00:00 [81741] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:12:09.195_322+00:00 [81741] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:12:09.195_352+00:00 [81741] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:12:09.195_503+00:00 [81778] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:12:10.870_577+00:00 [81749] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:12:10.870_589+00:00 [81749] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:12:10.870_603+00:00 [81749] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:12:10.870_614+00:00 [81749] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:12:10.870_620+00:00 [81749] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:12:10.870_624+00:00 [81749] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:12:10.870_643+00:00 [81749] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:12:10.870_724+00:00 [81777] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:12:10.870_732+00:00 [81777] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:12:10.870_742+00:00 [81777] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:12:20.758_100+00:00 [81749] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:12:20.758_132+00:00 [81749] [INFO] session 1 got connection from 127.0.0.1:54950 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:12:20.758_234+00:00 [81749] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:12:20.758_261+00:00 [81749] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:12:20.758_323+00:00 [81749] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:12:20.758_358+00:00 [81749] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:12:20.758_361+00:00 [81749] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:12:20.758_364+00:00 [81749] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:12:20.758_372+00:00 [81749] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:12:20.759_116+00:00 [81749] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54950 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:12:21.259_449+00:00 [81749] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:12:21.259_467+00:00 [81749] [INFO] session 2 got connection from 127.0.0.1:54952 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:12:21.259_603+00:00 [81749] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:12:21.259_608+00:00 [81749] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:12:21.259_764+00:00 [81749] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:12:21.259_768+00:00 [81749] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:12:21.259_835+00:00 [81777] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:12:21.259_838+00:00 [81777] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:12:21.259_847+00:00 [81777] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:12:21.259_849+00:00 [81777] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:12:21.259_856+00:00 [81777] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:12:21.259_870+00:00 [81777] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:12:21.259_874+00:00 [81777] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:12:21.259_894+00:00 [81777] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:12:41.001_873+00:00 [81775] [INFO] 0x7f3058001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:41.002_006+00:00 [81775] [INFO] 0x7f30500014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:41.002_121+00:00 [81760] [INFO] 0x7f30480014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:41.002_465+00:00 [81760] [INFO] 0x7f304c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:41.002_570+00:00 [81760] [INFO] 0x7f30400014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:41.002_680+00:00 [81772] [INFO] 0x7f30440014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:41.002_870+00:00 [81772] [INFO] 0x7f30240014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:12:41.003_130+00:00 [81772] [INFO] 0x7f30100014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:26.190_214+00:00 [81886] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:13:26.191_603+00:00 [81886] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:13:26.191_634+00:00 [81886] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:13:26.191_639+00:00 [81886] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:13:26.191_662+00:00 [81886] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:13:26.191_666+00:00 [81886] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:13:26.191_669+00:00 [81886] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:13:26.191_697+00:00 [81886] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:13:26.191_852+00:00 [81923] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:13:27.415_007+00:00 [81894] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:13:27.415_031+00:00 [81894] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:13:27.415_069+00:00 [81894] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:13:27.415_090+00:00 [81894] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:13:27.415_097+00:00 [81894] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:13:27.415_100+00:00 [81894] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:13:27.415_119+00:00 [81894] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:13:27.415_169+00:00 [81922] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:13:27.415_177+00:00 [81922] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:13:27.415_186+00:00 [81922] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:13:38.004_926+00:00 [81894] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:13:38.004_949+00:00 [81894] [INFO] session 1 got connection from 127.0.0.1:54954 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:13:38.005_058+00:00 [81894] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:13:38.005_084+00:00 [81894] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:13:38.005_146+00:00 [81894] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:13:38.005_180+00:00 [81894] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:13:38.005_183+00:00 [81894] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:13:38.005_185+00:00 [81894] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:13:38.005_194+00:00 [81894] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:13:38.005_921+00:00 [81894] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54954 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:13:38.506_266+00:00 [81894] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:13:38.506_283+00:00 [81894] [INFO] session 2 got connection from 127.0.0.1:54956 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:13:38.506_398+00:00 [81894] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:13:38.506_403+00:00 [81894] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:13:38.506_569+00:00 [81894] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:13:38.506_573+00:00 [81894] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:13:38.506_643+00:00 [81922] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:13:38.506_646+00:00 [81922] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:13:38.506_655+00:00 [81922] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:13:38.506_657+00:00 [81922] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:13:38.506_684+00:00 [81922] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:13:38.506_700+00:00 [81922] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:13:38.506_705+00:00 [81922] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:13:38.506_726+00:00 [81922] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:13:57.497_495+00:00 [81891] [INFO] 0x7f0a2c001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.497_627+00:00 [81891] [INFO] 0x7f0a240014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.497_724+00:00 [81891] [INFO] 0x7f0a280014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.497_824+00:00 [81891] [INFO] 0x7f0a1c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.498_077+00:00 [81910] [INFO] 0x7f0a200014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.498_179+00:00 [81910] [INFO] 0x7f0a140014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.498_265+00:00 [81910] [INFO] 0x7f0a180014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.498_346+00:00 [81910] [INFO] 0x7f0a0c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.498_492+00:00 [81910] [INFO] 0x7f09f80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:13:57.498_839+00:00 [81897] [INFO] 0x7f09f00014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:14:43.184_649+00:00 [82035] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:14:43.186_015+00:00 [82035] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:14:43.186_046+00:00 [82035] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:14:43.186_050+00:00 [82035] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:14:43.186_076+00:00 [82035] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:14:43.186_080+00:00 [82035] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:14:43.186_082+00:00 [82035] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:14:43.186_115+00:00 [82035] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:14:43.186_257+00:00 [82072] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:14:44.472_320+00:00 [82043] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:14:44.472_333+00:00 [82043] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:14:44.472_350+00:00 [82043] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:14:44.472_361+00:00 [82043] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:14:44.472_368+00:00 [82043] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:14:44.472_373+00:00 [82043] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:14:44.472_393+00:00 [82043] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:14:44.472_448+00:00 [82071] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:14:44.472_456+00:00 [82071] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:14:44.472_466+00:00 [82071] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:14:55.240_432+00:00 [82043] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:14:55.240_458+00:00 [82043] [INFO] session 1 got connection from 127.0.0.1:54958 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:14:55.240_580+00:00 [82043] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:14:55.240_606+00:00 [82043] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:14:55.240_672+00:00 [82043] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:14:55.240_705+00:00 [82043] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:14:55.240_708+00:00 [82043] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:14:55.240_710+00:00 [82043] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:14:55.240_720+00:00 [82043] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:14:55.241_449+00:00 [82043] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54958 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:14:55.741_762+00:00 [82043] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:14:55.741_778+00:00 [82043] [INFO] session 2 got connection from 127.0.0.1:54960 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:14:55.741_901+00:00 [82043] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:14:55.741_906+00:00 [82043] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:14:55.742_125+00:00 [82043] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:14:55.742_130+00:00 [82043] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:14:55.742_209+00:00 [82071] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:14:55.742_213+00:00 [82071] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:14:55.742_222+00:00 [82071] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:14:55.742_224+00:00 [82071] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:14:55.742_231+00:00 [82071] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:14:55.742_244+00:00 [82071] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:14:55.742_249+00:00 [82071] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:14:55.742_269+00:00 [82071] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:15:14.492_548+00:00 [82040] [INFO] 0x7f463c001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.492_682+00:00 [82040] [INFO] 0x7f46340014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.492_783+00:00 [82040] [INFO] 0x7f46380014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.492_899+00:00 [82040] [INFO] 0x7f462c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.493_162+00:00 [82042] [INFO] 0x7f46300014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.493_268+00:00 [82042] [INFO] 0x7f46240014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.493_368+00:00 [82042] [INFO] 0x7f46280014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.493_580+00:00 [82042] [INFO] 0x7f461c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.493_736+00:00 [82042] [INFO] 0x7f46200014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:15:14.493_858+00:00 [82042] [INFO] 0x7f46140014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:00.190_536+00:00 [82183] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:16:00.191_928+00:00 [82183] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:16:00.191_960+00:00 [82183] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:16:00.191_966+00:00 [82183] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:16:00.191_988+00:00 [82183] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:16:00.191_992+00:00 [82183] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:16:00.191_995+00:00 [82183] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:16:00.192_024+00:00 [82183] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:16:00.192_166+00:00 [82220] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:16:01.663_256+00:00 [82191] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:16:01.663_269+00:00 [82191] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:16:01.663_286+00:00 [82191] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:16:01.663_299+00:00 [82191] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:16:01.663_307+00:00 [82191] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:16:01.663_312+00:00 [82191] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:16:01.663_332+00:00 [82191] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:16:01.663_391+00:00 [82219] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:16:01.663_399+00:00 [82219] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:16:01.663_410+00:00 [82219] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:16:11.754_795+00:00 [82191] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:16:11.754_816+00:00 [82191] [INFO] session 1 got connection from 127.0.0.1:54962 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:16:11.754_910+00:00 [82191] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:16:11.754_932+00:00 [82191] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:16:11.754_985+00:00 [82191] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:16:11.755_014+00:00 [82191] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:16:11.755_017+00:00 [82191] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:16:11.755_019+00:00 [82191] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:16:11.755_026+00:00 [82191] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:16:11.755_741+00:00 [82191] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54962 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:16:12.256_062+00:00 [82191] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:16:12.256_077+00:00 [82191] [INFO] session 2 got connection from 127.0.0.1:54964 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:16:12.256_179+00:00 [82191] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:16:12.256_183+00:00 [82191] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:16:12.256_323+00:00 [82191] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:16:12.256_326+00:00 [82191] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:16:12.256_386+00:00 [82219] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:16:12.256_389+00:00 [82219] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:16:12.256_396+00:00 [82219] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:16:12.256_397+00:00 [82219] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:16:12.256_403+00:00 [82219] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:16:12.256_415+00:00 [82219] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:16:12.256_419+00:00 [82219] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:16:12.256_436+00:00 [82219] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:16:31.748_701+00:00 [82188] [INFO] 0x7f7f50001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.748_859+00:00 [82188] [INFO] 0x7f7f480014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.748_976+00:00 [82188] [INFO] 0x7f7f4c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.749_269+00:00 [82188] [INFO] 0x7f7f400014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.749_498+00:00 [82188] [INFO] 0x7f7f440014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.749_709+00:00 [82188] [INFO] 0x7f7f380014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.749_986+00:00 [82188] [INFO] 0x7f7f3c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.750_075+00:00 [82188] [INFO] 0x7f7f300014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.750_154+00:00 [82188] [INFO] 0x7f7f340014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:16:31.750_234+00:00 [82188] [INFO] 0x7f7f280014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:17.194_275+00:00 [82339] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:17:17.195_670+00:00 [82339] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:17:17.195_706+00:00 [82339] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:17:17.195_710+00:00 [82339] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:17:17.195_734+00:00 [82339] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:17:17.195_739+00:00 [82339] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:17:17.195_741+00:00 [82339] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:17:17.195_771+00:00 [82339] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:17:17.195_921+00:00 [82376] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:17:18.871_982+00:00 [82347] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:17:18.871_995+00:00 [82347] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:17:18.872_009+00:00 [82347] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:17:18.872_020+00:00 [82347] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:17:18.872_027+00:00 [82347] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:17:18.872_031+00:00 [82347] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:17:18.872_050+00:00 [82347] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:17:18.872_104+00:00 [82375] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:17:18.872_112+00:00 [82375] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:17:18.872_122+00:00 [82375] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:17:29.259_683+00:00 [82347] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:17:29.259_708+00:00 [82347] [INFO] session 1 got connection from 127.0.0.1:54966 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:17:29.259_841+00:00 [82347] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:17:29.259_874+00:00 [82347] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:17:29.259_953+00:00 [82347] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:17:29.259_999+00:00 [82347] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:17:29.260_002+00:00 [82347] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:17:29.260_004+00:00 [82347] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:17:29.260_014+00:00 [82347] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:17:29.260_743+00:00 [82347] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54966 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:17:29.761_016+00:00 [82347] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:17:29.761_032+00:00 [82347] [INFO] session 2 got connection from 127.0.0.1:54968 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:17:29.761_140+00:00 [82347] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:17:29.761_144+00:00 [82347] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:17:29.761_292+00:00 [82347] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:17:29.761_296+00:00 [82347] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:17:29.761_365+00:00 [82375] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:17:29.761_368+00:00 [82375] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:17:29.761_377+00:00 [82375] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:17:29.761_379+00:00 [82375] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:17:29.761_386+00:00 [82375] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:17:29.761_400+00:00 [82375] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:17:29.761_405+00:00 [82375] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:17:29.761_425+00:00 [82375] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:17:49.002_444+00:00 [82344] [INFO] 0x7f1984001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.002_577+00:00 [82344] [INFO] 0x7f197c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.002_711+00:00 [82344] [INFO] 0x7f19800014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.002_954+00:00 [82344] [INFO] 0x7f19740014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.003_269+00:00 [82344] [INFO] 0x7f19780014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.003_646+00:00 [82368] [INFO] 0x7f196c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.003_736+00:00 [82368] [INFO] 0x7f19700014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.003_814+00:00 [82368] [INFO] 0x7f19640014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.003_902+00:00 [82373] [INFO] 0x7f19680014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:17:49.003_990+00:00 [82373] [INFO] 0x7f195c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:18:34.187_566+00:00 [82491] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:18:34.188_959+00:00 [82491] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:18:34.188_990+00:00 [82491] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:18:34.188_994+00:00 [82491] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:18:34.189_017+00:00 [82491] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:18:34.189_022+00:00 [82491] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:18:34.189_024+00:00 [82491] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:18:34.189_056+00:00 [82491] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:18:34.189_212+00:00 [82529] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:18:35.494_343+00:00 [82500] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:18:35.494_355+00:00 [82500] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:18:35.494_370+00:00 [82500] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:18:35.494_387+00:00 [82500] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:18:35.494_393+00:00 [82500] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:18:35.494_397+00:00 [82500] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:18:35.494_416+00:00 [82500] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:18:35.494_466+00:00 [82528] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:18:35.494_473+00:00 [82528] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:18:35.494_483+00:00 [82528] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:18:46.502_523+00:00 [82500] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:18:46.502_548+00:00 [82500] [INFO] session 1 got connection from 127.0.0.1:54970 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:18:46.502_680+00:00 [82500] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:18:46.502_716+00:00 [82500] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:18:46.502_781+00:00 [82500] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:18:46.502_817+00:00 [82500] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:18:46.502_819+00:00 [82500] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:18:46.502_821+00:00 [82500] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:18:46.502_830+00:00 [82500] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:18:46.503_619+00:00 [82500] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54970 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:18:47.003_891+00:00 [82500] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:18:47.003_908+00:00 [82500] [INFO] session 2 got connection from 127.0.0.1:54972 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:18:47.004_020+00:00 [82500] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:18:47.004_025+00:00 [82500] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:18:47.004_199+00:00 [82500] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:18:47.004_204+00:00 [82500] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:18:47.004_272+00:00 [82528] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:18:47.004_276+00:00 [82528] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:18:47.004_285+00:00 [82528] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:18:47.004_287+00:00 [82528] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:18:47.004_294+00:00 [82528] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:18:47.004_308+00:00 [82528] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:18:47.004_313+00:00 [82528] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:18:47.004_334+00:00 [82528] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:19:05.745_401+00:00 [82526] [INFO] 0x7fb0c4001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.745_537+00:00 [82526] [INFO] 0x7fb0bc0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.745_636+00:00 [82526] [INFO] 0x7fb0c00014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.745_889+00:00 [82526] [INFO] 0x7fb0b40014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.745_987+00:00 [82526] [INFO] 0x7fb0b80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.746_187+00:00 [82526] [INFO] 0x7fb0ac0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.746_308+00:00 [82526] [INFO] 0x7fb0b00014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.746_399+00:00 [82500] [INFO] 0x7fb0a40014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.746_487+00:00 [82500] [INFO] 0x7fb0a80014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:05.746_719+00:00 [82500] [INFO] 0x7fb09c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:19:51.197_077+00:00 [82652] [====] Start logger: ./srv3.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T04:19:51.198_500+00:00 [82652] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T04:19:51.198_533+00:00 [82652] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T04:19:51.198_537+00:00 [82652] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T04:19:51.198_562+00:00 [82652] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T04:19:51.198_566+00:00 [82652] [INFO] peer 3: DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T04:19:51.198_568+00:00 [82652] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T04:19:51.198_597+00:00 [82652] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T04:19:51.198_768+00:00 [82689] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T04:19:52.853_836+00:00 [82660] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T04:19:52.853_848+00:00 [82660] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T04:19:52.853_863+00:00 [82660] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T04:19:52.853_873+00:00 [82660] [INFO] [VOTE INIT] my id 3, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T04:19:52.853_881+00:00 [82660] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T04:19:52.853_885+00:00 [82660] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T04:19:52.853_905+00:00 [82660] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T04:19:52.853_962+00:00 [82688] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:19:52.853_970+00:00 [82688] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:19:52.853_980+00:00 [82688] [INFO] new configuration: log idx 1, prev log idx 0
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 3, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:20:03.012_096+00:00 [82660] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:20:03.012_123+00:00 [82660] [INFO] session 1 got connection from 127.0.0.1:54974 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:20:03.012_244+00:00 [82660] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T04:20:03.012_273+00:00 [82660] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:20:03.012_343+00:00 [82660] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:20:03.012_384+00:00 [82660] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T04:20:03.012_388+00:00 [82660] [INFO] peer 3 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T04:20:03.012_390+00:00 [82660] [INFO] add peer 1, tcp://localhost:12347, voting member
add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T04:20:03.012_400+00:00 [82660] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:20:03.013_164+00:00 [82660] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:54974 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T04:20:03.513_513+00:00 [82660] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T04:20:03.513_529+00:00 [82660] [INFO] session 2 got connection from 127.0.0.1:54976 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T04:20:03.513_636+00:00 [82660] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T04:20:03.513_640+00:00 [82660] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T04:20:03.513_805+00:00 [82660] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:20:03.513_810+00:00 [82660] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T04:20:03.513_877+00:00 [82688] [INFO] config at index 1 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:20:03.513_880+00:00 [82688] [INFO] skipped config 1, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:20:03.513_889+00:00 [82688] [INFO] config at index 2 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:20:03.513_891+00:00 [82688] [INFO] skipped config 2, latest config 2	[handle_commit.cxx:405, commit_conf()]
2022-04-28T04:20:03.513_898+00:00 [82688] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T04:20:03.513_913+00:00 [82688] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T04:20:03.513_918+00:00 [82688] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T04:20:03.513_938+00:00 [82688] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 3, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T04:20:23.005_216+00:00 [82657] [INFO] 0x7fe230001630 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.005_346+00:00 [82657] [INFO] 0x7fe2280014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.005_435+00:00 [82657] [INFO] 0x7fe22c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.005_603+00:00 [82657] [INFO] 0x7fe2200014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.005_916+00:00 [82657] [INFO] 0x7fe2240014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.006_026+00:00 [82657] [INFO] 0x7fe2180014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.006_132+00:00 [82657] [INFO] 0x7fe21c0014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.006_232+00:00 [82657] [INFO] 0x7fe2100014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.006_338+00:00 [82656] [INFO] 0x7fe2140014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T04:20:23.006_445+00:00 [82656] [INFO] 0x7fe2080014a0 connected to localhost:12347 (as a client)	[asio_service.cxx:1233, connected()]
