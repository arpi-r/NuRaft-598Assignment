2022-04-28T18:17:49.396_492+00:00 [16262] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:17:49.397_836+00:00 [16262] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:17:49.397_867+00:00 [16262] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:17:49.397_871+00:00 [16262] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:17:49.397_894+00:00 [16262] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:17:49.397_898+00:00 [16262] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:17:49.397_900+00:00 [16262] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:17:49.397_930+00:00 [16262] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:17:49.398_074+00:00 [16298] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:17:51.155_187+00:00 [16269] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:17:51.155_211+00:00 [16269] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:17:51.155_249+00:00 [16269] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:17:51.155_286+00:00 [16269] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:17:51.155_302+00:00 [16269] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:17:51.155_312+00:00 [16269] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:17:51.155_362+00:00 [16269] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:17:51.155_494+00:00 [16297] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:17:51.155_520+00:00 [16297] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:17:51.155_547+00:00 [16297] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:17:51.198_853+00:00 [16262] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:17:51.199_191+00:00 [16269] [INFO] 0x56207179e8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:17:51.199_498+00:00 [16269] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:17:51.199_505+00:00 [16269] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:17:51.199_556+00:00 [16297] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:17:51.199_567+00:00 [16297] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:17:51.199_618+00:00 [16297] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:17:51.199_620+00:00 [16297] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:17:51.199_661+00:00 [16297] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:17:51.199_665+00:00 [16297] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:17:51.199_671+00:00 [16297] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:17:51.449_066+00:00 [16262] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:17:51.449_247+00:00 [16269] [INFO] 0x56207179ec60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:17:51.449_645+00:00 [16269] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:17:51.449_654+00:00 [16269] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:17:51.449_816+00:00 [16269] [INFO] 0x7fe1f80018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:17:51.449_984+00:00 [16269] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:17:51.450_190+00:00 [16297] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:17:51.450_204+00:00 [16297] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:17:51.450_259+00:00 [16297] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:17:51.450_261+00:00 [16297] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:17:51.450_300+00:00 [16297] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:17:51.450_303+00:00 [16297] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:17:51.450_311+00:00 [16297] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:17:51.703_272+00:00 [16267] [INFO] 0x56207179e8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:17:51.703_446+00:00 [16267] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:18:06.217_604+00:00 [16297] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:18:06.217_612+00:00 [16297] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:18:06.217_634+00:00 [16297] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:18:06.217_638+00:00 [16297] [INFO] create snapshot idx 100000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:18:46.825_683+00:00 [16411] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:18:46.827_035+00:00 [16411] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:18:46.827_065+00:00 [16411] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:18:46.827_071+00:00 [16411] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:18:46.827_094+00:00 [16411] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:18:46.827_098+00:00 [16411] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:18:46.827_101+00:00 [16411] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:18:46.827_128+00:00 [16411] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:18:46.827_273+00:00 [16447] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:18:48.711_322+00:00 [16418] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:18:48.711_332+00:00 [16418] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:18:48.711_348+00:00 [16418] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:18:48.711_358+00:00 [16418] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:18:48.711_365+00:00 [16418] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:18:48.711_369+00:00 [16418] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:18:48.711_389+00:00 [16418] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:18:48.711_440+00:00 [16446] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:18:48.711_447+00:00 [16446] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:18:48.711_457+00:00 [16446] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:48.878_585+00:00 [16411] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:18:48.879_263+00:00 [16418] [INFO] 0x5593f9f5d8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:18:48.879_591+00:00 [16418] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:18:48.879_598+00:00 [16418] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:18:48.879_642+00:00 [16446] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:18:48.879_651+00:00 [16446] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:18:48.879_691+00:00 [16446] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:18:48.879_693+00:00 [16446] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:18:48.879_729+00:00 [16446] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:18:48.879_732+00:00 [16446] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:18:48.879_737+00:00 [16446] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:49.129_130+00:00 [16411] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:18:49.129_531+00:00 [16418] [INFO] 0x5593f9f5dc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:18:49.129_911+00:00 [16418] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:18:49.129_917+00:00 [16418] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:18:49.130_069+00:00 [16418] [INFO] 0x7f4e500018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:18:49.130_244+00:00 [16418] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:18:49.130_448+00:00 [16446] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:18:49.130_463+00:00 [16446] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:18:49.130_516+00:00 [16446] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:18:49.130_519+00:00 [16446] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:18:49.130_553+00:00 [16446] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:18:49.130_556+00:00 [16446] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:18:49.130_562+00:00 [16446] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:49.383_940+00:00 [16416] [INFO] 0x5593f9f5d8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:18:49.384_115+00:00 [16416] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:18:57.809_363+00:00 [16446] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:18:57.809_371+00:00 [16446] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:18:57.809_393+00:00 [16446] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:18:57.809_397+00:00 [16446] [INFO] create snapshot idx 100000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:19:05.940_855+00:00 [16446] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:19:05.940_863+00:00 [16446] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:19:05.940_885+00:00 [16446] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:19:05.940_889+00:00 [16446] [INFO] create snapshot idx 200000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:19:44.503_599+00:00 [16545] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:19:44.504_942+00:00 [16545] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:19:44.504_973+00:00 [16545] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:19:44.504_978+00:00 [16545] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:19:44.505_001+00:00 [16545] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:19:44.505_005+00:00 [16545] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:19:44.505_008+00:00 [16545] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:19:44.505_040+00:00 [16545] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:19:44.505_188+00:00 [16581] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:19:45.985_220+00:00 [16552] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:19:45.985_231+00:00 [16552] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:19:45.985_245+00:00 [16552] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:19:45.985_260+00:00 [16552] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:19:45.985_267+00:00 [16552] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:19:45.985_271+00:00 [16552] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:19:45.985_288+00:00 [16552] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:19:45.985_339+00:00 [16580] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:19:45.985_347+00:00 [16580] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:19:45.985_357+00:00 [16580] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:19:46.056_026+00:00 [16545] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:19:46.056_402+00:00 [16552] [INFO] 0x55870c8e38b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:19:46.056_682+00:00 [16552] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:19:46.056_690+00:00 [16552] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:19:46.056_740+00:00 [16580] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:19:46.056_751+00:00 [16580] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:19:46.056_802+00:00 [16580] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:19:46.056_805+00:00 [16580] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:19:46.056_846+00:00 [16580] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:19:46.056_849+00:00 [16580] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:19:46.056_855+00:00 [16580] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:19:46.306_264+00:00 [16545] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:19:46.306_447+00:00 [16552] [INFO] 0x55870c8e3c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:19:46.306_834+00:00 [16552] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:19:46.306_839+00:00 [16552] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:19:46.306_982+00:00 [16552] [INFO] 0x7f35280018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:19:46.307_163+00:00 [16552] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:19:46.307_370+00:00 [16580] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:19:46.307_385+00:00 [16580] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:19:46.307_437+00:00 [16580] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:19:46.307_440+00:00 [16580] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:19:46.307_479+00:00 [16580] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:19:46.307_483+00:00 [16580] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:19:46.307_490+00:00 [16580] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:19:46.560_965+00:00 [16550] [INFO] 0x55870c8e38b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:19:46.561_164+00:00 [16550] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:19:52.879_001+00:00 [16580] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:19:52.879_011+00:00 [16580] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:19:52.879_030+00:00 [16580] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:19:52.879_034+00:00 [16580] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:19:58.975_636+00:00 [16580] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:19:58.975_646+00:00 [16580] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:19:58.975_665+00:00 [16580] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:19:58.975_668+00:00 [16580] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:05.179_542+00:00 [16580] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:05.179_550+00:00 [16580] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:05.179_569+00:00 [16580] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:05.179_572+00:00 [16580] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:41.684_401+00:00 [16754] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:20:41.685_718+00:00 [16754] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:20:41.685_747+00:00 [16754] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:20:41.685_754+00:00 [16754] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:20:41.685_778+00:00 [16754] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:20:41.685_782+00:00 [16754] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:20:41.685_784+00:00 [16754] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:20:41.685_813+00:00 [16754] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:20:41.685_954+00:00 [16790] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:20:43.033_081+00:00 [16761] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:20:43.033_092+00:00 [16761] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:20:43.033_106+00:00 [16761] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:20:43.033_117+00:00 [16761] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:20:43.033_123+00:00 [16761] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:20:43.033_127+00:00 [16761] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:20:43.033_145+00:00 [16761] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:20:43.033_194+00:00 [16789] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:20:43.033_202+00:00 [16789] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:20:43.033_212+00:00 [16789] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:20:43.236_827+00:00 [16754] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:20:43.237_230+00:00 [16761] [INFO] 0x562d284c88b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:20:43.237_605+00:00 [16761] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:20:43.237_612+00:00 [16761] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:20:43.237_665+00:00 [16789] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:20:43.237_676+00:00 [16789] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:20:43.237_723+00:00 [16789] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:20:43.237_725+00:00 [16789] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:20:43.237_770+00:00 [16789] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:20:43.237_774+00:00 [16789] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:20:43.237_780+00:00 [16789] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:20:43.487_107+00:00 [16754] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:20:43.487_360+00:00 [16761] [INFO] 0x562d284c8c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:20:43.487_892+00:00 [16761] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:20:43.487_897+00:00 [16761] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:20:43.488_035+00:00 [16761] [INFO] 0x7f44800018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:20:43.488_215+00:00 [16761] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:20:43.488_424+00:00 [16789] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:20:43.488_439+00:00 [16789] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:20:43.488_497+00:00 [16789] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:20:43.488_500+00:00 [16789] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:20:43.488_541+00:00 [16789] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:20:43.488_545+00:00 [16789] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:20:43.488_552+00:00 [16789] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:20:43.741_670+00:00 [16759] [INFO] 0x562d284c88b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:20:43.741_845+00:00 [16759] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:20:49.225_651+00:00 [16789] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:49.225_659+00:00 [16789] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:49.225_677+00:00 [16789] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:49.225_681+00:00 [16789] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:54.515_919+00:00 [16789] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:54.515_927+00:00 [16789] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:54.515_945+00:00 [16789] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:54.515_948+00:00 [16789] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:59.895_618+00:00 [16789] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:59.895_626+00:00 [16789] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:59.895_644+00:00 [16789] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:59.895_648+00:00 [16789] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:21:38.874_698+00:00 [16949] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:21:38.876_015+00:00 [16949] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:21:38.876_053+00:00 [16949] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:21:38.876_056+00:00 [16949] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:21:38.876_079+00:00 [16949] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:21:38.876_083+00:00 [16949] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:21:38.876_086+00:00 [16949] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:21:38.876_116+00:00 [16949] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:21:38.876_254+00:00 [16985] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:21:40.648_340+00:00 [16956] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:21:40.648_352+00:00 [16956] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:21:40.648_367+00:00 [16956] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:21:40.648_378+00:00 [16956] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:21:40.648_386+00:00 [16956] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:21:40.648_390+00:00 [16956] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:21:40.648_408+00:00 [16956] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:21:40.648_466+00:00 [16984] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:21:40.648_475+00:00 [16984] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:21:40.648_485+00:00 [16984] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:21:40.677_165+00:00 [16949] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:21:40.677_566+00:00 [16956] [INFO] 0x5605f907d8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:21:40.677_978+00:00 [16956] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:21:40.677_988+00:00 [16956] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:21:40.678_037+00:00 [16984] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:21:40.678_048+00:00 [16984] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:21:40.678_098+00:00 [16984] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:21:40.678_101+00:00 [16984] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:21:40.678_144+00:00 [16984] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:21:40.678_148+00:00 [16984] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:21:40.678_154+00:00 [16984] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:21:40.927_443+00:00 [16949] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:21:40.927_676+00:00 [16956] [INFO] 0x5605f907dc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:21:40.928_110+00:00 [16956] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:21:40.928_115+00:00 [16956] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:21:40.928_252+00:00 [16956] [INFO] 0x7f1a4c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:21:40.928_425+00:00 [16956] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:21:40.928_635+00:00 [16984] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:21:40.928_649+00:00 [16984] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:21:40.928_702+00:00 [16984] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:21:40.928_704+00:00 [16984] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:21:40.928_741+00:00 [16984] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:21:40.928_744+00:00 [16984] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:21:40.928_750+00:00 [16984] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:21:41.182_493+00:00 [16954] [INFO] 0x5605f907d8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:21:41.182_680+00:00 [16954] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:21:46.295_288+00:00 [16984] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:21:46.295_297+00:00 [16984] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:21:46.295_316+00:00 [16984] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:21:46.295_319+00:00 [16984] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:21:51.186_707+00:00 [16984] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:21:51.186_717+00:00 [16984] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:21:51.186_736+00:00 [16984] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:21:51.186_740+00:00 [16984] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:21:56.116_761+00:00 [16984] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:21:56.116_770+00:00 [16984] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:21:56.116_788+00:00 [16984] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:21:56.116_791+00:00 [16984] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:22:36.322_852+00:00 [17090] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:22:36.324_195+00:00 [17090] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:22:36.324_224+00:00 [17090] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:22:36.324_227+00:00 [17090] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:22:36.324_252+00:00 [17090] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:22:36.324_255+00:00 [17090] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:22:36.324_258+00:00 [17090] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:22:36.324_291+00:00 [17090] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:22:36.324_439+00:00 [17126] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:22:37.694_476+00:00 [17097] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:22:37.694_487+00:00 [17097] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:22:37.694_501+00:00 [17097] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:22:37.694_512+00:00 [17097] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:22:37.694_519+00:00 [17097] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:22:37.694_523+00:00 [17097] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:22:37.694_541+00:00 [17097] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:22:37.694_595+00:00 [17125] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:22:37.694_602+00:00 [17125] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:22:37.694_612+00:00 [17125] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:22:37.875_505+00:00 [17090] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:22:37.875_859+00:00 [17097] [INFO] 0x55830fa018b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:22:37.876_166+00:00 [17097] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:22:37.876_174+00:00 [17097] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:22:37.876_225+00:00 [17125] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:22:37.876_236+00:00 [17125] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:22:37.876_281+00:00 [17125] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:22:37.876_284+00:00 [17125] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:22:37.876_325+00:00 [17125] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:22:37.876_329+00:00 [17125] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:22:37.876_334+00:00 [17125] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:22:38.125_808+00:00 [17090] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:22:38.126_035+00:00 [17097] [INFO] 0x55830fa01c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:22:38.126_410+00:00 [17097] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:22:38.126_414+00:00 [17097] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:22:38.126_560+00:00 [17097] [INFO] 0x7fe3980018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:22:38.126_760+00:00 [17097] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:22:38.126_964+00:00 [17125] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:22:38.126_979+00:00 [17125] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:22:38.127_036+00:00 [17125] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:22:38.127_038+00:00 [17125] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:22:38.127_077+00:00 [17125] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:22:38.127_080+00:00 [17125] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:22:38.127_087+00:00 [17125] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:22:38.380_858+00:00 [17095] [INFO] 0x55830fa018b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:22:38.381_068+00:00 [17095] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:22:43.396_826+00:00 [17125] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:22:43.396_836+00:00 [17125] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:22:43.396_860+00:00 [17125] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:22:43.396_868+00:00 [17125] [INFO] create snapshot idx 100000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:22:48.350_269+00:00 [17125] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:22:48.350_278+00:00 [17125] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:22:48.350_297+00:00 [17125] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:22:48.350_300+00:00 [17125] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:22:53.390_091+00:00 [17125] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:22:53.390_100+00:00 [17125] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:22:53.390_120+00:00 [17125] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:22:53.390_123+00:00 [17125] [INFO] create snapshot idx 300000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:23:33.522_022+00:00 [17237] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:23:33.523_348+00:00 [17237] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:23:33.523_383+00:00 [17237] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:23:33.523_387+00:00 [17237] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:23:33.523_410+00:00 [17237] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:23:33.523_413+00:00 [17237] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:23:33.523_416+00:00 [17237] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:23:33.523_447+00:00 [17237] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:23:33.523_591+00:00 [17273] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:23:34.635_636+00:00 [17244] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:23:34.635_646+00:00 [17244] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:23:34.635_661+00:00 [17244] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:23:34.635_672+00:00 [17244] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:23:34.635_678+00:00 [17244] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:23:34.635_681+00:00 [17244] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:23:34.635_699+00:00 [17244] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:23:34.635_748+00:00 [17272] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:23:34.635_756+00:00 [17272] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:23:34.635_765+00:00 [17272] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:23:34.824_421+00:00 [17237] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:23:34.824_830+00:00 [17244] [INFO] 0x563c7b72c8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:23:34.825_231+00:00 [17244] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:23:34.825_239+00:00 [17244] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:23:34.825_290+00:00 [17272] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:23:34.825_302+00:00 [17272] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:23:34.825_348+00:00 [17272] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:23:34.825_351+00:00 [17272] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:23:34.825_394+00:00 [17272] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:23:34.825_398+00:00 [17272] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:23:34.825_403+00:00 [17272] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:23:35.074_904+00:00 [17237] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:23:35.075_208+00:00 [17244] [INFO] 0x563c7b72cc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:23:35.075_598+00:00 [17244] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:23:35.075_602+00:00 [17244] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:23:35.075_745+00:00 [17244] [INFO] 0x7faccc0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:23:35.075_905+00:00 [17244] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:23:35.076_089+00:00 [17272] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:23:35.076_101+00:00 [17272] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:23:35.076_147+00:00 [17272] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:23:35.076_149+00:00 [17272] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:23:35.076_183+00:00 [17272] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:23:35.076_186+00:00 [17272] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:23:35.076_192+00:00 [17272] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:23:35.330_067+00:00 [17242] [INFO] 0x563c7b72c8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:23:35.330_241+00:00 [17242] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:23:40.538_574+00:00 [17272] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:23:40.538_583+00:00 [17272] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:23:40.538_603+00:00 [17272] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:23:40.538_606+00:00 [17272] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:23:45.842_928+00:00 [17272] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:23:45.842_935+00:00 [17272] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:23:45.842_953+00:00 [17272] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:23:45.842_956+00:00 [17272] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:23:51.226_273+00:00 [17272] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:23:51.226_281+00:00 [17272] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:23:51.226_298+00:00 [17272] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:23:51.226_302+00:00 [17272] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:24:30.455_221+00:00 [17382] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:24:30.456_546+00:00 [17382] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:24:30.456_579+00:00 [17382] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:24:30.456_584+00:00 [17382] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:24:30.456_606+00:00 [17382] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:24:30.456_610+00:00 [17382] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:24:30.456_613+00:00 [17382] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:24:30.456_645+00:00 [17382] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:24:30.456_787+00:00 [17418] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:24:31.792_836+00:00 [17389] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:24:31.792_846+00:00 [17389] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:24:31.792_861+00:00 [17389] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:24:31.792_872+00:00 [17389] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:24:31.792_879+00:00 [17389] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:24:31.792_883+00:00 [17389] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:24:31.792_901+00:00 [17389] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:24:31.792_950+00:00 [17417] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:24:31.792_957+00:00 [17417] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:24:31.792_967+00:00 [17417] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:24:32.008_128+00:00 [17382] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:24:32.008_525+00:00 [17389] [INFO] 0x5629066688b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:24:32.008_833+00:00 [17389] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:24:32.008_840+00:00 [17389] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:24:32.008_892+00:00 [17417] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:24:32.008_903+00:00 [17417] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:24:32.008_943+00:00 [17417] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:24:32.008_945+00:00 [17417] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:24:32.008_983+00:00 [17417] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:24:32.008_986+00:00 [17417] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:24:32.008_991+00:00 [17417] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:24:32.258_340+00:00 [17382] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:24:32.258_515+00:00 [17389] [INFO] 0x562906668c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:24:32.258_994+00:00 [17389] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:24:32.258_997+00:00 [17389] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:24:32.259_124+00:00 [17389] [INFO] 0x7fef1c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:24:32.259_292+00:00 [17389] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:24:32.259_477+00:00 [17417] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:24:32.259_489+00:00 [17417] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:24:32.259_535+00:00 [17417] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:24:32.259_537+00:00 [17417] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:24:32.259_572+00:00 [17417] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:24:32.259_575+00:00 [17417] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:24:32.259_581+00:00 [17417] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:24:32.513_103+00:00 [17387] [INFO] 0x5629066688b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:24:32.513_274+00:00 [17387] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:24:37.892_826+00:00 [17417] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:24:37.892_835+00:00 [17417] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:24:37.892_856+00:00 [17417] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:24:37.892_859+00:00 [17417] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:24:43.422_109+00:00 [17417] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:24:43.422_119+00:00 [17417] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:24:43.422_138+00:00 [17417] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:24:43.422_141+00:00 [17417] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:24:48.833_826+00:00 [17417] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:24:48.833_834+00:00 [17417] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:24:48.833_851+00:00 [17417] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:24:48.833_855+00:00 [17417] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:25:27.625_798+00:00 [17531] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:25:27.627_150+00:00 [17531] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:25:27.627_180+00:00 [17531] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:25:27.627_184+00:00 [17531] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:25:27.627_210+00:00 [17531] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:25:27.627_214+00:00 [17531] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:25:27.627_216+00:00 [17531] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:25:27.627_243+00:00 [17531] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:25:27.627_381+00:00 [17567] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:25:29.190_540+00:00 [17538] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:25:29.190_562+00:00 [17538] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:25:29.190_599+00:00 [17538] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:25:29.190_626+00:00 [17538] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:25:29.190_643+00:00 [17538] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:25:29.190_653+00:00 [17538] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:25:29.190_750+00:00 [17538] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:25:29.190_886+00:00 [17566] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:25:29.190_912+00:00 [17566] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:25:29.190_938+00:00 [17566] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:25:29.428_511+00:00 [17531] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:25:29.428_906+00:00 [17538] [INFO] 0x55fc74ed18b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:25:29.429_304+00:00 [17538] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:25:29.429_312+00:00 [17538] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:25:29.429_363+00:00 [17566] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:25:29.429_374+00:00 [17566] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:25:29.429_427+00:00 [17566] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:25:29.429_429+00:00 [17566] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:25:29.429_471+00:00 [17566] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:25:29.429_475+00:00 [17566] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:25:29.429_481+00:00 [17566] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:25:29.678_861+00:00 [17531] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:25:29.679_070+00:00 [17538] [INFO] 0x55fc74ed1c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:25:29.679_441+00:00 [17538] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:25:29.679_446+00:00 [17538] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:25:29.679_583+00:00 [17538] [INFO] 0x7f4b740018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:25:29.679_753+00:00 [17538] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:25:29.680_102+00:00 [17566] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:25:29.680_132+00:00 [17566] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:25:29.680_191+00:00 [17566] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:25:29.680_193+00:00 [17566] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:25:29.680_233+00:00 [17566] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:25:29.680_237+00:00 [17566] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:25:29.680_244+00:00 [17566] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:25:29.934_265+00:00 [17536] [INFO] 0x55fc74ed18b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:25:29.934_432+00:00 [17536] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:25:35.389_344+00:00 [17566] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:25:35.389_352+00:00 [17566] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:25:35.389_369+00:00 [17566] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:25:35.389_372+00:00 [17566] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:25:40.979_137+00:00 [17566] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:25:40.979_145+00:00 [17566] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:25:40.979_163+00:00 [17566] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:25:40.979_166+00:00 [17566] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:25:46.562_803+00:00 [17566] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:25:46.562_811+00:00 [17566] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:25:46.562_829+00:00 [17566] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:25:46.562_832+00:00 [17566] [INFO] create snapshot idx 300000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:26:25.058_764+00:00 [17679] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:26:25.060_066+00:00 [17679] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:26:25.060_097+00:00 [17679] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:26:25.060_102+00:00 [17679] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:26:25.060_124+00:00 [17679] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:26:25.060_128+00:00 [17679] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:26:25.060_131+00:00 [17679] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:26:25.060_161+00:00 [17679] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:26:25.060_301+00:00 [17715] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:26:26.846_398+00:00 [17686] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:26:26.846_409+00:00 [17686] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:26:26.846_425+00:00 [17686] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:26:26.846_436+00:00 [17686] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:26:26.846_442+00:00 [17686] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:26:26.846_446+00:00 [17686] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:26:26.846_464+00:00 [17686] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:26:26.846_515+00:00 [17714] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:26:26.846_524+00:00 [17714] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:26:26.846_534+00:00 [17714] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:26:26.861_458+00:00 [17679] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:26:26.861_826+00:00 [17686] [INFO] 0x5646073c68b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:26:26.862_145+00:00 [17686] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:26:26.862_152+00:00 [17686] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:26:26.862_198+00:00 [17714] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:26:26.862_209+00:00 [17714] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:26:26.862_254+00:00 [17714] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:26:26.862_257+00:00 [17714] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:26:26.862_298+00:00 [17714] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:26:26.862_301+00:00 [17714] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:26:26.862_306+00:00 [17714] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:26:27.111_920+00:00 [17679] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T18:26:27.112_290+00:00 [17686] [INFO] 0x5646073c6c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:26:27.112_682+00:00 [17686] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T18:26:27.112_687+00:00 [17686] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T18:26:27.112_829+00:00 [17686] [INFO] 0x7fe7500018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:26:27.113_000+00:00 [17686] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:26:27.113_195+00:00 [17714] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:26:27.113_207+00:00 [17714] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:26:27.113_252+00:00 [17714] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:26:27.113_254+00:00 [17714] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T18:26:27.113_288+00:00 [17714] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:26:27.113_291+00:00 [17714] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T18:26:27.113_297+00:00 [17714] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:26:27.367_352+00:00 [17684] [INFO] 0x5646073c68b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T18:26:27.367_522+00:00 [17684] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T18:26:32.732_314+00:00 [17714] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:26:32.732_324+00:00 [17714] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:26:32.732_345+00:00 [17714] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:26:32.732_348+00:00 [17714] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:26:38.220_072+00:00 [17714] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:26:38.220_081+00:00 [17714] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:26:38.220_099+00:00 [17714] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:26:38.220_102+00:00 [17714] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:26:43.697_195+00:00 [17714] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:26:43.697_203+00:00 [17714] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:26:43.697_221+00:00 [17714] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:26:43.697_224+00:00 [17714] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:06:05.530_639+00:00 [18516] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:06:05.531_973+00:00 [18516] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:06:05.532_002+00:00 [18516] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:06:05.532_008+00:00 [18516] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:06:05.532_028+00:00 [18516] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:06:05.532_031+00:00 [18516] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:06:05.532_034+00:00 [18516] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:06:05.532_076+00:00 [18516] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:06:05.532_211+00:00 [18552] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:06:07.461_258+00:00 [18523] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:06:07.461_269+00:00 [18523] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:06:07.461_284+00:00 [18523] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:06:07.461_295+00:00 [18523] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:06:07.461_302+00:00 [18523] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:06:07.461_306+00:00 [18523] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:06:07.461_324+00:00 [18523] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:06:07.461_375+00:00 [18551] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:06:07.461_383+00:00 [18551] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:06:07.461_393+00:00 [18551] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:06:07.583_264+00:00 [18516] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:06:07.583_647+00:00 [18523] [INFO] 0x55e6029a18b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:06:07.583_973+00:00 [18523] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:06:07.583_981+00:00 [18523] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:06:07.584_033+00:00 [18551] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:06:07.584_044+00:00 [18551] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:06:07.584_089+00:00 [18551] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:06:07.584_091+00:00 [18551] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:06:07.584_137+00:00 [18551] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:06:07.584_141+00:00 [18551] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:06:07.584_146+00:00 [18551] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:06:07.833_681+00:00 [18516] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:06:07.834_121+00:00 [18523] [INFO] 0x55e6029a1c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:06:07.834_478+00:00 [18523] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:06:07.834_482+00:00 [18523] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:06:07.834_599+00:00 [18523] [INFO] 0x7fadfc0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:06:07.834_797+00:00 [18523] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:06:07.834_981+00:00 [18551] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:06:07.834_993+00:00 [18551] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:06:07.835_034+00:00 [18551] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:06:07.835_037+00:00 [18551] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:06:07.835_072+00:00 [18551] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:06:07.835_075+00:00 [18551] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:06:07.835_081+00:00 [18551] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:06:08.088_297+00:00 [18521] [INFO] 0x55e6029a18b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:06:08.088_461+00:00 [18521] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:06:22.648_756+00:00 [18551] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:06:22.648_765+00:00 [18551] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:06:22.648_785+00:00 [18551] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:06:22.648_789+00:00 [18551] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:07:03.198_048+00:00 [18649] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:07:03.199_391+00:00 [18649] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:07:03.199_424+00:00 [18649] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:07:03.199_428+00:00 [18649] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:07:03.199_450+00:00 [18649] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:07:03.199_454+00:00 [18649] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:07:03.199_457+00:00 [18649] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:07:03.199_503+00:00 [18649] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:07:03.199_662+00:00 [18685] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:07:04.649_669+00:00 [18656] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:07:04.649_680+00:00 [18656] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:07:04.649_696+00:00 [18656] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:07:04.649_706+00:00 [18656] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:07:04.649_713+00:00 [18656] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:07:04.649_717+00:00 [18656] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:07:04.649_735+00:00 [18656] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:07:04.649_787+00:00 [18684] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:07:04.649_795+00:00 [18684] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:07:04.649_805+00:00 [18684] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:07:04.750_717+00:00 [18649] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:07:04.751_291+00:00 [18656] [INFO] 0x5583431d98b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:07:04.751_602+00:00 [18656] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:07:04.751_610+00:00 [18656] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:07:04.751_658+00:00 [18684] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:07:04.751_668+00:00 [18684] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:07:04.751_715+00:00 [18684] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:07:04.751_718+00:00 [18684] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:07:04.751_759+00:00 [18684] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:07:04.751_762+00:00 [18684] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:07:04.751_768+00:00 [18684] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:07:05.000_967+00:00 [18649] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:07:05.001_156+00:00 [18656] [INFO] 0x5583431d9c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:07:05.001_572+00:00 [18656] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:07:05.001_577+00:00 [18656] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:07:05.001_712+00:00 [18656] [INFO] 0x7f89b40018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:07:05.001_880+00:00 [18656] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:07:05.002_086+00:00 [18684] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:07:05.002_101+00:00 [18684] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:07:05.002_153+00:00 [18684] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:07:05.002_155+00:00 [18684] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:07:05.002_194+00:00 [18684] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:07:05.002_198+00:00 [18684] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:07:05.002_205+00:00 [18684] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:07:05.255_681+00:00 [18654] [INFO] 0x5583431d98b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:07:05.255_863+00:00 [18654] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:07:13.766_191+00:00 [18684] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:07:13.766_201+00:00 [18684] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:07:13.766_221+00:00 [18684] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:07:13.766_225+00:00 [18684] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:07:21.983_311+00:00 [18684] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:07:21.983_322+00:00 [18684] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:07:21.983_341+00:00 [18684] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:07:21.983_345+00:00 [18684] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:08:00.376_518+00:00 [18784] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:08:00.377_855+00:00 [18784] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:08:00.377_884+00:00 [18784] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:08:00.377_889+00:00 [18784] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:08:00.377_915+00:00 [18784] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:08:00.377_919+00:00 [18784] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:08:00.377_922+00:00 [18784] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:08:00.377_952+00:00 [18784] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:08:00.378_097+00:00 [18820] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:08:01.579_149+00:00 [18791] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:08:01.579_160+00:00 [18791] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:08:01.579_174+00:00 [18791] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:08:01.579_185+00:00 [18791] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:08:01.579_192+00:00 [18791] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:08:01.579_195+00:00 [18791] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:08:01.579_214+00:00 [18791] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:08:01.579_264+00:00 [18819] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:01.579_272+00:00 [18819] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:01.579_282+00:00 [18819] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:01.678_853+00:00 [18784] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:08:01.679_235+00:00 [18791] [INFO] 0x56462f8178b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:01.679_559+00:00 [18791] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:08:01.679_567+00:00 [18791] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:08:01.679_615+00:00 [18819] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:01.679_625+00:00 [18819] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:01.679_677+00:00 [18819] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:01.679_679+00:00 [18819] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:08:01.679_722+00:00 [18819] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:01.679_726+00:00 [18819] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:08:01.679_731+00:00 [18819] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:01.929_335+00:00 [18784] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:08:01.929_683+00:00 [18791] [INFO] 0x56462f817c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:01.930_073+00:00 [18791] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:08:01.930_078+00:00 [18791] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:08:01.930_216+00:00 [18791] [INFO] 0x7fad0c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:01.930_384+00:00 [18791] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:08:01.930_587+00:00 [18819] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:01.930_601+00:00 [18819] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:01.930_646+00:00 [18819] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:01.930_648+00:00 [18819] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:08:01.930_706+00:00 [18819] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:01.930_709+00:00 [18819] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:08:01.930_715+00:00 [18819] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:02.184_062+00:00 [18789] [INFO] 0x56462f8178b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:02.184_232+00:00 [18789] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:08:08.480_505+00:00 [18819] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:08:08.480_515+00:00 [18819] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:08:08.480_534+00:00 [18819] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:08:08.480_537+00:00 [18819] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:08:14.522_262+00:00 [18819] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:08:14.522_271+00:00 [18819] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:08:14.522_291+00:00 [18819] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:08:14.522_294+00:00 [18819] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:08:20.565_825+00:00 [18819] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:08:20.565_832+00:00 [18819] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:08:20.565_850+00:00 [18819] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:08:20.565_854+00:00 [18819] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:08:57.309_497+00:00 [18921] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:08:57.311_552+00:00 [18921] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:08:57.311_589+00:00 [18921] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:08:57.311_593+00:00 [18921] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:08:57.311_619+00:00 [18921] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:08:57.311_623+00:00 [18921] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:08:57.311_626+00:00 [18921] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:08:57.311_654+00:00 [18921] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:08:57.312_129+00:00 [18957] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:08:58.698_831+00:00 [18928] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:08:58.698_842+00:00 [18928] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:08:58.698_857+00:00 [18928] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:08:58.698_868+00:00 [18928] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:08:58.698_874+00:00 [18928] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:08:58.698_878+00:00 [18928] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:08:58.698_896+00:00 [18928] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:08:58.698_946+00:00 [18956] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:58.698_954+00:00 [18956] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:58.698_963+00:00 [18956] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:58.862_605+00:00 [18921] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:08:58.863_020+00:00 [18928] [INFO] 0x55925f7dd8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:58.863_353+00:00 [18928] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:08:58.863_361+00:00 [18928] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:08:58.863_413+00:00 [18956] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:58.863_424+00:00 [18956] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:58.863_478+00:00 [18956] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:58.863_481+00:00 [18956] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:08:58.863_520+00:00 [18956] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:58.863_523+00:00 [18956] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:08:58.863_528+00:00 [18956] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:59.113_000+00:00 [18921] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:08:59.113_340+00:00 [18928] [INFO] 0x55925f7ddc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:59.113_683+00:00 [18928] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:08:59.113_688+00:00 [18928] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:08:59.113_828+00:00 [18928] [INFO] 0x7fa09c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:59.114_001+00:00 [18928] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:08:59.114_212+00:00 [18956] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:59.114_226+00:00 [18956] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:59.114_281+00:00 [18956] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:59.114_283+00:00 [18956] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:08:59.114_321+00:00 [18956] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:59.114_325+00:00 [18956] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:08:59.114_333+00:00 [18956] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:59.368_812+00:00 [18955] [INFO] 0x55925f7dd8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:08:59.368_968+00:00 [18955] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:09:04.699_832+00:00 [18956] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:09:04.699_842+00:00 [18956] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:09:04.700_088+00:00 [18956] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:09:04.700_093+00:00 [18956] [INFO] create snapshot idx 100000 log_term 1 done: 247 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:09:10.038_574+00:00 [18956] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:09:10.038_583+00:00 [18956] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:09:10.038_603+00:00 [18956] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:09:10.038_606+00:00 [18956] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:09:15.408_153+00:00 [18956] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:09:15.408_161+00:00 [18956] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:09:15.408_179+00:00 [18956] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:09:15.408_182+00:00 [18956] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:09:54.510_857+00:00 [19061] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:09:54.512_193+00:00 [19061] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:09:54.512_224+00:00 [19061] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:09:54.512_232+00:00 [19061] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:09:54.512_253+00:00 [19061] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:09:54.512_257+00:00 [19061] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:09:54.512_259+00:00 [19061] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:09:54.512_289+00:00 [19061] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:09:54.512_432+00:00 [19097] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:09:56.223_576+00:00 [19068] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:09:56.223_600+00:00 [19068] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:09:56.223_638+00:00 [19068] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:09:56.223_664+00:00 [19068] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:09:56.223_679+00:00 [19068] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:09:56.223_690+00:00 [19068] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:09:56.223_738+00:00 [19068] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:09:56.223_869+00:00 [19096] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:09:56.223_895+00:00 [19096] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:09:56.223_922+00:00 [19096] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:09:56.313_482+00:00 [19061] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:09:56.313_861+00:00 [19068] [INFO] 0x55e43b0ae8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:09:56.314_255+00:00 [19068] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:09:56.314_263+00:00 [19068] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:09:56.314_309+00:00 [19096] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:09:56.314_320+00:00 [19096] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:09:56.314_372+00:00 [19096] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:09:56.314_375+00:00 [19096] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:09:56.314_416+00:00 [19096] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:09:56.314_419+00:00 [19096] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:09:56.314_425+00:00 [19096] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:09:56.563_884+00:00 [19061] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:09:56.564_092+00:00 [19068] [INFO] 0x55e43b0aec60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:09:56.564_538+00:00 [19068] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:09:56.564_545+00:00 [19068] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:09:56.564_713+00:00 [19068] [INFO] 0x7fd34c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:09:56.564_880+00:00 [19068] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:09:56.565_089+00:00 [19096] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:09:56.565_103+00:00 [19096] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:09:56.565_157+00:00 [19096] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:09:56.565_159+00:00 [19096] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:09:56.565_200+00:00 [19096] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:09:56.565_204+00:00 [19096] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:09:56.565_212+00:00 [19096] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:09:56.818_524+00:00 [19066] [INFO] 0x55e43b0ae8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:09:56.818_703+00:00 [19066] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:10:01.912_371+00:00 [19096] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:01.912_381+00:00 [19096] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:01.912_400+00:00 [19096] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:01.912_403+00:00 [19096] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:10:06.911_149+00:00 [19096] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:06.911_158+00:00 [19096] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:06.911_178+00:00 [19096] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:06.911_181+00:00 [19096] [INFO] create snapshot idx 200000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:10:11.943_525+00:00 [19096] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:11.943_534+00:00 [19096] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:11.943_552+00:00 [19096] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:11.943_556+00:00 [19096] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:10:51.944_184+00:00 [19202] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:10:51.945_493+00:00 [19202] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:10:51.945_526+00:00 [19202] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:10:51.945_530+00:00 [19202] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:10:51.945_554+00:00 [19202] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:10:51.945_558+00:00 [19202] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:10:51.945_561+00:00 [19202] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:10:51.945_588+00:00 [19202] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:10:51.945_731+00:00 [19238] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:10:53.858_861+00:00 [19209] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:10:53.858_871+00:00 [19209] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:10:53.858_885+00:00 [19209] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:10:53.858_896+00:00 [19209] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:10:53.858_903+00:00 [19209] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:10:53.858_906+00:00 [19209] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:10:53.858_924+00:00 [19209] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:10:53.858_975+00:00 [19237] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:10:53.858_983+00:00 [19237] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:10:53.858_993+00:00 [19237] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:53.996_802+00:00 [19202] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:10:53.997_205+00:00 [19209] [INFO] 0x5574133438b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:10:53.997_522+00:00 [19209] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:10:53.997_530+00:00 [19209] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:10:53.997_579+00:00 [19237] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:10:53.997_589+00:00 [19237] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:10:53.997_634+00:00 [19237] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:10:53.997_637+00:00 [19237] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:10:53.997_680+00:00 [19237] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:10:53.997_683+00:00 [19237] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:10:53.997_689+00:00 [19237] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:54.247_017+00:00 [19202] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:10:54.247_207+00:00 [19209] [INFO] 0x557413343c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:10:54.247_629+00:00 [19209] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:10:54.247_634+00:00 [19209] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:10:54.247_769+00:00 [19209] [INFO] 0x7fae3c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:10:54.247_943+00:00 [19209] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:10:54.248_149+00:00 [19237] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:10:54.248_163+00:00 [19237] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:10:54.248_213+00:00 [19237] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:10:54.248_215+00:00 [19237] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:10:54.248_254+00:00 [19237] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:10:54.248_258+00:00 [19237] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:10:54.248_265+00:00 [19237] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:54.502_270+00:00 [19207] [INFO] 0x5574133438b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:10:54.502_440+00:00 [19207] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:10:59.441_102+00:00 [19237] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:59.441_109+00:00 [19237] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:59.441_127+00:00 [19237] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:59.441_130+00:00 [19237] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:11:04.604_453+00:00 [19237] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:11:04.604_461+00:00 [19237] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:11:04.604_479+00:00 [19237] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:11:04.604_482+00:00 [19237] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:11:09.783_265+00:00 [19237] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:11:09.783_274+00:00 [19237] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:11:09.783_295+00:00 [19237] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:11:09.783_298+00:00 [19237] [INFO] create snapshot idx 300000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:11:49.636_726+00:00 [19345] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:11:49.638_050+00:00 [19345] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:11:49.638_079+00:00 [19345] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:11:49.638_087+00:00 [19345] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:11:49.638_108+00:00 [19345] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:11:49.638_112+00:00 [19345] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:11:49.638_115+00:00 [19345] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:11:49.638_143+00:00 [19345] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:11:49.638_289+00:00 [19381] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:11:50.799_340+00:00 [19352] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:11:50.799_352+00:00 [19352] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:11:50.799_368+00:00 [19352] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:11:50.799_379+00:00 [19352] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:11:50.799_386+00:00 [19352] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:11:50.799_389+00:00 [19352] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:11:50.799_409+00:00 [19352] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:11:50.799_461+00:00 [19380] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:11:50.799_469+00:00 [19380] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:11:50.799_479+00:00 [19380] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:11:50.939_259+00:00 [19345] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:11:50.939_807+00:00 [19352] [INFO] 0x555a531ad8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:11:50.940_208+00:00 [19352] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:11:50.940_216+00:00 [19352] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:11:50.940_266+00:00 [19380] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:11:50.940_277+00:00 [19380] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:11:50.940_324+00:00 [19380] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:11:50.940_326+00:00 [19380] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:11:50.940_368+00:00 [19380] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:11:50.940_372+00:00 [19380] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:11:50.940_377+00:00 [19380] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:11:51.189_766+00:00 [19345] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:11:51.190_267+00:00 [19352] [INFO] 0x555a531adc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:11:51.190_705+00:00 [19352] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:11:51.190_709+00:00 [19352] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:11:51.190_834+00:00 [19352] [INFO] 0x7f77d00018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:11:51.190_998+00:00 [19352] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:11:51.191_179+00:00 [19380] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:11:51.191_191+00:00 [19380] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:11:51.191_243+00:00 [19380] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:11:51.191_245+00:00 [19380] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:11:51.191_280+00:00 [19380] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:11:51.191_283+00:00 [19380] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:11:51.191_289+00:00 [19380] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:11:51.444_793+00:00 [19350] [INFO] 0x555a531ad8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:11:51.444_959+00:00 [19350] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:11:56.592_324+00:00 [19380] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:11:56.592_333+00:00 [19380] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:11:56.592_353+00:00 [19380] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:11:56.592_357+00:00 [19380] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:01.891_041+00:00 [19380] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:01.891_050+00:00 [19380] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:01.891_069+00:00 [19380] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:01.891_072+00:00 [19380] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:07.327_629+00:00 [19380] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:07.327_639+00:00 [19380] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:07.327_657+00:00 [19380] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:07.327_660+00:00 [19380] [INFO] create snapshot idx 300000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:46.557_909+00:00 [19846] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:12:46.559_238+00:00 [19846] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:12:46.559_268+00:00 [19846] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:12:46.559_273+00:00 [19846] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:12:46.559_295+00:00 [19846] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:12:46.559_299+00:00 [19846] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:12:46.559_301+00:00 [19846] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:12:46.559_330+00:00 [19846] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:12:46.559_471+00:00 [19882] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:12:47.944_606+00:00 [19853] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:12:47.944_617+00:00 [19853] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:12:47.944_632+00:00 [19853] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:12:47.944_643+00:00 [19853] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:12:47.944_649+00:00 [19853] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:12:47.944_653+00:00 [19853] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:12:47.944_671+00:00 [19853] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:12:47.944_730+00:00 [19881] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:12:47.944_737+00:00 [19881] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:12:47.944_748+00:00 [19881] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:12:48.110_385+00:00 [19846] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:12:48.110_824+00:00 [19853] [INFO] 0x55b3352d98b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:12:48.111_195+00:00 [19853] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:12:48.111_204+00:00 [19853] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:12:48.111_258+00:00 [19881] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:12:48.111_269+00:00 [19881] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:12:48.111_315+00:00 [19881] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:12:48.111_318+00:00 [19881] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:12:48.111_362+00:00 [19881] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:12:48.111_366+00:00 [19881] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:12:48.111_371+00:00 [19881] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:12:48.360_615+00:00 [19846] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:12:48.360_799+00:00 [19853] [INFO] 0x55b3352d9c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:12:48.361_143+00:00 [19853] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:12:48.361_148+00:00 [19853] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:12:48.361_283+00:00 [19853] [INFO] 0x7fc73c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:12:48.361_460+00:00 [19853] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:12:48.361_668+00:00 [19881] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:12:48.361_683+00:00 [19881] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:12:48.361_739+00:00 [19881] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:12:48.361_742+00:00 [19881] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:12:48.361_782+00:00 [19881] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:12:48.361_786+00:00 [19881] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:12:48.361_792+00:00 [19881] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:12:48.615_763+00:00 [19851] [INFO] 0x55b3352d98b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:12:48.615_932+00:00 [19851] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:12:53.799_475+00:00 [19881] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:53.799_482+00:00 [19881] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:53.799_502+00:00 [19881] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:53.799_505+00:00 [19881] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:59.248_669+00:00 [19881] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:59.248_677+00:00 [19881] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:59.248_694+00:00 [19881] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:59.248_698+00:00 [19881] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:13:04.761_898+00:00 [19881] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:13:04.761_908+00:00 [19881] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:13:04.761_928+00:00 [19881] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:13:04.761_932+00:00 [19881] [INFO] create snapshot idx 300000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:13:43.775_930+00:00 [19991] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:13:43.777_246+00:00 [19991] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:13:43.777_278+00:00 [19991] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:13:43.777_284+00:00 [19991] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:13:43.777_309+00:00 [19991] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:13:43.777_313+00:00 [19991] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:13:43.777_316+00:00 [19991] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:13:43.777_355+00:00 [19991] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:13:43.777_495+00:00 [20027] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:13:45.442_553+00:00 [19998] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:13:45.442_563+00:00 [19998] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:13:45.442_578+00:00 [19998] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:13:45.442_588+00:00 [19998] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:13:45.442_595+00:00 [19998] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:13:45.442_598+00:00 [19998] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:13:45.442_617+00:00 [19998] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:13:45.442_677+00:00 [20026] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:13:45.442_686+00:00 [20026] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:13:45.442_695+00:00 [20026] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:13:45.578_912+00:00 [19991] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:13:45.579_297+00:00 [19998] [INFO] 0x559a28c4a8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:13:45.579_615+00:00 [19998] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:13:45.579_622+00:00 [19998] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:13:45.579_669+00:00 [20026] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:13:45.579_679+00:00 [20026] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:13:45.579_724+00:00 [20026] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:13:45.579_726+00:00 [20026] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:13:45.579_766+00:00 [20026] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:13:45.579_769+00:00 [20026] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:13:45.579_775+00:00 [20026] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:13:45.829_287+00:00 [19991] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:13:45.829_484+00:00 [19998] [INFO] 0x559a28c4ac60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:13:45.829_833+00:00 [19998] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:13:45.829_837+00:00 [19998] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:13:45.829_975+00:00 [19998] [INFO] 0x7f08040018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:13:45.830_144+00:00 [19998] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:13:45.830_327+00:00 [20026] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:13:45.830_342+00:00 [20026] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:13:45.830_399+00:00 [20026] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:13:45.830_402+00:00 [20026] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:13:45.830_439+00:00 [20026] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:13:45.830_443+00:00 [20026] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:13:45.830_451+00:00 [20026] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:13:46.084_352+00:00 [19996] [INFO] 0x559a28c4a8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:13:46.084_520+00:00 [19996] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:13:51.449_805+00:00 [20026] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:13:51.449_812+00:00 [20026] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:13:51.449_829+00:00 [20026] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:13:51.449_833+00:00 [20026] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:13:57.006_270+00:00 [20026] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:13:57.006_277+00:00 [20026] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:13:57.006_295+00:00 [20026] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:13:57.006_298+00:00 [20026] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:14:02.602_461+00:00 [20026] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:14:02.602_471+00:00 [20026] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:14:02.602_489+00:00 [20026] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:14:02.602_493+00:00 [20026] [INFO] create snapshot idx 300000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:14:41.247_715+00:00 [20140] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:14:41.249_024+00:00 [20140] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:14:41.249_058+00:00 [20140] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:14:41.249_062+00:00 [20140] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:14:41.249_087+00:00 [20140] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:14:41.249_091+00:00 [20140] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:14:41.249_094+00:00 [20140] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:14:41.249_121+00:00 [20140] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:14:41.249_259+00:00 [20176] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:14:43.272_278+00:00 [20147] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:14:43.272_289+00:00 [20147] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:14:43.272_304+00:00 [20147] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:14:43.272_315+00:00 [20147] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:14:43.272_321+00:00 [20147] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:14:43.272_326+00:00 [20147] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:14:43.272_344+00:00 [20147] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:14:43.272_399+00:00 [20175] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:14:43.272_407+00:00 [20175] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:14:43.272_416+00:00 [20175] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:14:43.300_270+00:00 [20140] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:14:43.300_653+00:00 [20147] [INFO] 0x558a2bcf18b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:14:43.301_102+00:00 [20147] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:14:43.301_109+00:00 [20147] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:14:43.301_156+00:00 [20175] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:14:43.301_166+00:00 [20175] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:14:43.301_211+00:00 [20175] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:14:43.301_214+00:00 [20175] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:14:43.301_255+00:00 [20175] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:14:43.301_259+00:00 [20175] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:14:43.301_265+00:00 [20175] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:14:43.550_512+00:00 [20140] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:14:43.550_755+00:00 [20147] [INFO] 0x558a2bcf1c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:14:43.551_124+00:00 [20147] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:14:43.551_129+00:00 [20147] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:14:43.551_267+00:00 [20147] [INFO] 0x7f188c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:14:43.551_442+00:00 [20147] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:14:43.551_651+00:00 [20175] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:14:43.551_666+00:00 [20175] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:14:43.551_724+00:00 [20175] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:14:43.551_727+00:00 [20175] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:14:43.551_765+00:00 [20175] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:14:43.551_769+00:00 [20175] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:14:43.551_777+00:00 [20175] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:14:43.805_607+00:00 [20145] [INFO] 0x558a2bcf18b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:14:43.805_790+00:00 [20145] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:14:49.155_617+00:00 [20175] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:14:49.155_626+00:00 [20175] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:14:49.155_649+00:00 [20175] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:14:49.155_653+00:00 [20175] [INFO] create snapshot idx 100000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:14:54.662_942+00:00 [20175] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:14:54.662_950+00:00 [20175] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:14:54.662_968+00:00 [20175] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:14:54.662_971+00:00 [20175] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:15:00.175_805+00:00 [20175] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:15:00.175_812+00:00 [20175] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:15:00.175_833+00:00 [20175] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:15:00.175_836+00:00 [20175] [INFO] create snapshot idx 300000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:33:33.081_786+00:00 [20633] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:33:33.083_792+00:00 [20633] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:33:33.083_824+00:00 [20633] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:33:33.083_831+00:00 [20633] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:33:33.083_855+00:00 [20633] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:33:33.083_860+00:00 [20633] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:33:33.083_863+00:00 [20633] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:33:33.083_891+00:00 [20633] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:33:33.084_360+00:00 [20669] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:33:34.945_102+00:00 [20640] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:33:34.945_112+00:00 [20640] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:33:34.945_126+00:00 [20640] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:33:34.945_136+00:00 [20640] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:33:34.945_143+00:00 [20640] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:33:34.945_146+00:00 [20640] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:33:34.945_163+00:00 [20640] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:33:34.945_211+00:00 [20668] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:33:34.945_218+00:00 [20668] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:33:34.945_228+00:00 [20668] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:33:35.135_330+00:00 [20633] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:33:35.135_777+00:00 [20640] [INFO] 0x55bbf03358b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:33:35.136_187+00:00 [20640] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:33:35.136_195+00:00 [20640] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:33:35.136_246+00:00 [20668] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:33:35.136_257+00:00 [20668] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:33:35.136_303+00:00 [20668] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:33:35.136_305+00:00 [20668] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:33:35.136_349+00:00 [20668] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:33:35.136_353+00:00 [20668] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:33:35.136_359+00:00 [20668] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:33:35.385_599+00:00 [20633] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:33:35.385_791+00:00 [20640] [INFO] 0x55bbf0335c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:33:35.386_211+00:00 [20640] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:33:35.386_215+00:00 [20640] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:33:35.386_351+00:00 [20640] [INFO] 0x7ff6b00018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:33:35.386_524+00:00 [20640] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:33:35.386_739+00:00 [20668] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:33:35.386_754+00:00 [20668] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:33:35.386_802+00:00 [20668] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:33:35.386_805+00:00 [20668] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:33:35.386_843+00:00 [20668] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:33:35.386_847+00:00 [20668] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:33:35.386_854+00:00 [20668] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:33:35.639_713+00:00 [20667] [INFO] 0x55bbf03358b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:33:35.639_883+00:00 [20667] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:33:39.146_203+00:00 [20666] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.146_558+00:00 [20666] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.148_537+00:00 [20646] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.152_540+00:00 [20646] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.160_581+00:00 [20642] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.176_780+00:00 [20657] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.208_785+00:00 [20659] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.272_781+00:00 [20665] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.400_887+00:00 [20655] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:39.657_050+00:00 [20658] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:40.157_218+00:00 [20664] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:40.657_293+00:00 [20636] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:41.157_297+00:00 [20651] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:41.657_301+00:00 [20655] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:42.157_366+00:00 [20638] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:42.657_434+00:00 [20646] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:43.157_497+00:00 [20664] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:43.657_482+00:00 [20639] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:44.157_497+00:00 [20664] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:33:44.657_643+00:00 [20636] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:33:47.465_628+00:00 [20668] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:33:47.465_637+00:00 [20668] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:33:47.465_655+00:00 [20668] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:33:47.465_658+00:00 [20668] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:34:51.629_939+00:00 [20938] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:34:51.631_277+00:00 [20938] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:34:51.631_307+00:00 [20938] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:34:51.631_315+00:00 [20938] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:34:51.631_336+00:00 [20938] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:34:51.631_340+00:00 [20938] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:34:51.631_342+00:00 [20938] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:34:51.631_368+00:00 [20938] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:34:51.631_501+00:00 [20974] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:34:53.104_582+00:00 [20945] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:34:53.104_593+00:00 [20945] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:34:53.104_609+00:00 [20945] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:34:53.104_619+00:00 [20945] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:34:53.104_626+00:00 [20945] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:34:53.104_629+00:00 [20945] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:34:53.104_647+00:00 [20945] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:34:53.104_700+00:00 [20973] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:34:53.104_707+00:00 [20973] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:34:53.104_717+00:00 [20973] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:34:53.182_333+00:00 [20938] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:34:53.182_764+00:00 [20945] [INFO] 0x55f0e06f18b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:34:53.183_074+00:00 [20945] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:34:53.183_083+00:00 [20945] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:34:53.183_136+00:00 [20973] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:34:53.183_147+00:00 [20973] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:34:53.183_202+00:00 [20973] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:34:53.183_205+00:00 [20973] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:34:53.183_248+00:00 [20973] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:34:53.183_252+00:00 [20973] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:34:53.183_258+00:00 [20973] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:34:53.432_546+00:00 [20938] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:34:53.432_732+00:00 [20945] [INFO] 0x55f0e06f1c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:34:53.433_075+00:00 [20945] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:34:53.433_080+00:00 [20945] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:34:53.433_218+00:00 [20945] [INFO] 0x7f64d00018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:34:53.433_384+00:00 [20945] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:34:53.433_592+00:00 [20973] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:34:53.433_606+00:00 [20973] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:34:53.433_651+00:00 [20973] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:34:53.433_653+00:00 [20973] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:34:53.433_688+00:00 [20973] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:34:53.433_691+00:00 [20973] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:34:53.433_697+00:00 [20973] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:34:53.686_902+00:00 [20943] [INFO] 0x55f0e06f18b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:34:53.687_074+00:00 [20943] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:34:57.273_656+00:00 [20955] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.273_986+00:00 [20955] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.275_927+00:00 [20947] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.280_046+00:00 [20952] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.288_019+00:00 [20943] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.304_120+00:00 [20944] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.336_134+00:00 [20958] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.400_181+00:00 [20946] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.528_312+00:00 [20968] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:57.784_318+00:00 [20966] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:58.284_410+00:00 [20968] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:58.784_401+00:00 [20966] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:59.284_514+00:00 [20942] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:34:59.784_573+00:00 [20955] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:00.284_549+00:00 [20952] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:00.784_601+00:00 [20970] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:01.284_682+00:00 [20956] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:01.784_706+00:00 [20957] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:02.284_712+00:00 [20950] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:02.784_706+00:00 [20958] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:35:05.663_868+00:00 [20973] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:35:05.663_877+00:00 [20973] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:35:05.663_897+00:00 [20973] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:35:05.663_900+00:00 [20973] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:35:48.785_857+00:00 [21122] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:35:48.787_193+00:00 [21122] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:35:48.787_226+00:00 [21122] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:35:48.787_236+00:00 [21122] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:35:48.787_261+00:00 [21122] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:35:48.787_266+00:00 [21122] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:35:48.787_268+00:00 [21122] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:35:48.787_300+00:00 [21122] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:35:48.787_436+00:00 [21158] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:35:50.608_467+00:00 [21129] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:35:50.608_477+00:00 [21129] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:35:50.608_491+00:00 [21129] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:35:50.608_505+00:00 [21129] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:35:50.608_512+00:00 [21129] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:35:50.608_515+00:00 [21129] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:35:50.608_534+00:00 [21129] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:35:50.608_582+00:00 [21157] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:35:50.608_590+00:00 [21157] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:35:50.608_600+00:00 [21157] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:50.838_768+00:00 [21122] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:35:50.839_336+00:00 [21129] [INFO] 0x55da054de8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:35:50.839_638+00:00 [21129] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:35:50.839_646+00:00 [21129] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:35:50.839_697+00:00 [21157] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:35:50.839_708+00:00 [21157] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:35:50.839_761+00:00 [21157] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:35:50.839_764+00:00 [21157] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:35:50.839_806+00:00 [21157] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:35:50.839_810+00:00 [21157] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:35:50.839_816+00:00 [21157] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:51.089_057+00:00 [21122] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:35:51.089_228+00:00 [21129] [INFO] 0x55da054dec60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:35:51.089_589+00:00 [21129] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:35:51.089_593+00:00 [21129] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:35:51.089_729+00:00 [21129] [INFO] 0x7fc2340018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:35:51.089_902+00:00 [21129] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:35:51.090_111+00:00 [21157] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:35:51.090_126+00:00 [21157] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:35:51.090_176+00:00 [21157] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:35:51.090_178+00:00 [21157] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:35:51.090_216+00:00 [21157] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:35:51.090_220+00:00 [21157] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:35:51.090_228+00:00 [21157] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:51.343_667+00:00 [21127] [INFO] 0x55da054de8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:35:51.343_836+00:00 [21127] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:35:53.512_650+00:00 [21150] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.513_051+00:00 [21146] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.514_899+00:00 [21146] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.519_002+00:00 [21140] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.527_095+00:00 [21149] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.543_173+00:00 [21150] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.575_241+00:00 [21125] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.639_345+00:00 [21131] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:53.767_449+00:00 [21151] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:54.023_604+00:00 [21134] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:54.523_728+00:00 [21135] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:55.023_720+00:00 [21136] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:55.523_745+00:00 [21133] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:56.023_771+00:00 [21143] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:56.523_852+00:00 [21139] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:57.023_875+00:00 [21153] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:57.524_100+00:00 [21134] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:58.024_148+00:00 [21150] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:58.524_203+00:00 [21131] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:35:59.024_316+00:00 [21148] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:35:59.135_721+00:00 [21157] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:35:59.135_730+00:00 [21157] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:35:59.135_749+00:00 [21157] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:35:59.135_752+00:00 [21157] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:36:06.656_051+00:00 [21157] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:36:06.656_061+00:00 [21157] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:36:06.656_079+00:00 [21157] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:36:06.656_082+00:00 [21157] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:36:46.457_190+00:00 [21306] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:36:46.458_507+00:00 [21306] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:36:46.458_538+00:00 [21306] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:36:46.458_545+00:00 [21306] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:36:46.458_566+00:00 [21306] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:36:46.458_570+00:00 [21306] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:36:46.458_573+00:00 [21306] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:36:46.458_605+00:00 [21306] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:36:46.458_787+00:00 [21342] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:36:48.236_753+00:00 [21313] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:36:48.236_764+00:00 [21313] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:36:48.236_780+00:00 [21313] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:36:48.236_791+00:00 [21313] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:36:48.236_798+00:00 [21313] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:36:48.236_801+00:00 [21313] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:36:48.236_820+00:00 [21313] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:36:48.236_869+00:00 [21341] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:36:48.236_877+00:00 [21341] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:36:48.236_886+00:00 [21341] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:36:48.259_818+00:00 [21306] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:36:48.260_143+00:00 [21313] [INFO] 0x5576164c38b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:36:48.260_442+00:00 [21313] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:36:48.260_449+00:00 [21313] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:36:48.260_495+00:00 [21341] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:36:48.260_506+00:00 [21341] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:36:48.260_554+00:00 [21341] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:36:48.260_557+00:00 [21341] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:36:48.260_599+00:00 [21341] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:36:48.260_603+00:00 [21341] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:36:48.260_609+00:00 [21341] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:36:48.510_021+00:00 [21306] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:36:48.510_191+00:00 [21313] [INFO] 0x5576164c3c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:36:48.510_546+00:00 [21313] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:36:48.510_551+00:00 [21313] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:36:48.510_719+00:00 [21313] [INFO] 0x7fc6840018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:36:48.510_880+00:00 [21313] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:36:48.511_085+00:00 [21341] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:36:48.511_100+00:00 [21341] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:36:48.511_157+00:00 [21341] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:36:48.511_160+00:00 [21341] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:36:48.511_200+00:00 [21341] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:36:48.511_204+00:00 [21341] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:36:48.511_211+00:00 [21341] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:36:48.764_991+00:00 [21311] [INFO] 0x5576164c38b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:36:48.765_160+00:00 [21311] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:36:50.494_893+00:00 [21319] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.495_165+00:00 [21319] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.497_226+00:00 [21323] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.501_251+00:00 [21324] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.509_323+00:00 [21338] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.525_525+00:00 [21311] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.557_493+00:00 [21330] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.621_729+00:00 [21336] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:50.749_880+00:00 [21339] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:51.005_967+00:00 [21322] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:51.506_031+00:00 [21338] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:52.006_230+00:00 [21320] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:52.506_407+00:00 [21330] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:53.006_619+00:00 [21340] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:53.506_676+00:00 [21338] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:54.006_815+00:00 [21336] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:54.506_903+00:00 [21315] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:55.007_055+00:00 [21327] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:55.376_360+00:00 [21341] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:36:55.376_368+00:00 [21341] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:36:55.376_386+00:00 [21341] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:36:55.376_390+00:00 [21341] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:36:55.507_275+00:00 [21338] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:36:56.007_503+00:00 [21329] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:37:02.156_760+00:00 [21341] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:37:02.156_768+00:00 [21341] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:37:02.156_785+00:00 [21341] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:37:02.156_789+00:00 [21341] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:37:43.887_298+00:00 [21473] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:37:43.888_626+00:00 [21473] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:37:43.888_656+00:00 [21473] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:37:43.888_664+00:00 [21473] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:37:43.888_686+00:00 [21473] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:37:43.888_690+00:00 [21473] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:37:43.888_693+00:00 [21473] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:37:43.888_720+00:00 [21473] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:37:43.888_865+00:00 [21509] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:37:44.982_047+00:00 [21480] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:37:44.982_069+00:00 [21480] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:37:44.982_105+00:00 [21480] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:37:44.982_140+00:00 [21480] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:37:44.982_156+00:00 [21480] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:37:44.982_166+00:00 [21480] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:37:44.982_215+00:00 [21480] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:37:44.982_344+00:00 [21508] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:37:44.982_369+00:00 [21508] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:37:44.982_395+00:00 [21508] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:37:45.190_041+00:00 [21473] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:37:45.190_894+00:00 [21480] [INFO] 0x561443f058b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:37:45.191_215+00:00 [21480] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:37:45.191_223+00:00 [21480] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:37:45.191_273+00:00 [21508] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:37:45.191_284+00:00 [21508] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:37:45.191_330+00:00 [21508] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:37:45.191_333+00:00 [21508] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:37:45.191_376+00:00 [21508] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:37:45.191_380+00:00 [21508] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:37:45.191_385+00:00 [21508] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:37:45.440_282+00:00 [21473] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:37:45.440_461+00:00 [21480] [INFO] 0x561443f05c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:37:45.440_803+00:00 [21480] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:37:45.440_808+00:00 [21480] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:37:45.440_943+00:00 [21480] [INFO] 0x7fc8580018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:37:45.441_109+00:00 [21480] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:37:45.441_317+00:00 [21508] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:37:45.441_332+00:00 [21508] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:37:45.441_386+00:00 [21508] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:37:45.441_389+00:00 [21508] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:37:45.441_424+00:00 [21508] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:37:45.441_428+00:00 [21508] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:37:45.441_434+00:00 [21508] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:37:45.694_882+00:00 [21478] [INFO] 0x561443f058b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:37:45.695_054+00:00 [21478] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:37:47.199_822+00:00 [21495] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 104, Connection reset by peer	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.200_139+00:00 [21506] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.202_122+00:00 [21503] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.206_435+00:00 [21496] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.214_683+00:00 [21478] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.230_688+00:00 [21504] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.262_995+00:00 [21480] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.327_008+00:00 [21490] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.455_136+00:00 [21476] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:47.711_329+00:00 [21492] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:48.211_498+00:00 [21485] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:48.711_563+00:00 [21492] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:49.211_730+00:00 [21505] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:49.711_569+00:00 [21506] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:50.211_631+00:00 [21490] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:50.711_590+00:00 [21482] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:51.211_674+00:00 [21486] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:51.711_902+00:00 [21490] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:52.200_522+00:00 [21508] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:37:52.200_529+00:00 [21508] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:37:52.200_640+00:00 [21508] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:37:52.200_644+00:00 [21508] [INFO] create snapshot idx 100000 log_term 1 done: 110 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:37:52.211_942+00:00 [21499] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:37:52.712_175+00:00 [21477] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:37:59.065_405+00:00 [21508] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:37:59.065_413+00:00 [21508] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:37:59.065_517+00:00 [21508] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:37:59.065_573+00:00 [21508] [INFO] create snapshot idx 200000 log_term 1 done: 155 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:38:40.798_824+00:00 [21613] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:38:40.800_148+00:00 [21613] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:38:40.800_179+00:00 [21613] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:38:40.800_182+00:00 [21613] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:38:40.800_206+00:00 [21613] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:38:40.800_210+00:00 [21613] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:38:40.800_212+00:00 [21613] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:38:40.800_243+00:00 [21613] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:38:40.800_386+00:00 [21649] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:38:42.452_443+00:00 [21620] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:38:42.452_454+00:00 [21620] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:38:42.452_469+00:00 [21620] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:38:42.452_478+00:00 [21620] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:38:42.452_486+00:00 [21620] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:38:42.452_489+00:00 [21620] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:38:42.452_508+00:00 [21620] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:38:42.452_557+00:00 [21648] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:38:42.452_565+00:00 [21648] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:38:42.452_575+00:00 [21648] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:38:42.601_269+00:00 [21613] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:38:42.601_653+00:00 [21620] [INFO] 0x563d6e0298b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:38:42.601_983+00:00 [21620] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:38:42.601_992+00:00 [21620] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:38:42.602_044+00:00 [21648] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:38:42.602_054+00:00 [21648] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:38:42.602_106+00:00 [21648] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:38:42.602_109+00:00 [21648] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:38:42.602_150+00:00 [21648] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:38:42.602_154+00:00 [21648] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:38:42.602_160+00:00 [21648] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:38:42.851_700+00:00 [21613] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:38:42.852_174+00:00 [21620] [INFO] 0x563d6e029c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:38:42.852_680+00:00 [21620] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:38:42.852_685+00:00 [21620] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:38:42.852_824+00:00 [21620] [INFO] 0x7f29740018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:38:42.852_984+00:00 [21620] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:38:42.853_189+00:00 [21648] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:38:42.853_203+00:00 [21648] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:38:42.853_254+00:00 [21648] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:38:42.853_256+00:00 [21648] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:38:42.853_289+00:00 [21648] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:38:42.853_292+00:00 [21648] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:38:42.853_298+00:00 [21648] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:38:43.106_657+00:00 [21618] [INFO] 0x563d6e0298b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:38:43.106_925+00:00 [21626] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:38:44.392_600+00:00 [21620] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 104, Connection reset by peer	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.392_916+00:00 [21635] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.395_036+00:00 [21616] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.399_183+00:00 [21623] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.407_448+00:00 [21618] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.423_453+00:00 [21626] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.455_698+00:00 [21622] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.519_931+00:00 [21644] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.648_065+00:00 [21629] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:44.904_489+00:00 [21620] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:45.404_356+00:00 [21645] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:45.904_368+00:00 [21637] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:46.404_519+00:00 [21645] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:46.904_690+00:00 [21647] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:47.404_583+00:00 [21645] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:47.904_786+00:00 [21616] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:48.405_019+00:00 [21641] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:48.905_326+00:00 [21629] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:49.405_029+00:00 [21642] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:38:49.739_585+00:00 [21648] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:38:49.739_592+00:00 [21648] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:38:49.739_709+00:00 [21648] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:38:49.739_713+00:00 [21648] [INFO] create snapshot idx 100000 log_term 1 done: 117 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:38:49.905_096+00:00 [21639] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:38:57.118_512+00:00 [21648] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:38:57.118_520+00:00 [21648] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:38:57.118_699+00:00 [21648] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:38:57.118_713+00:00 [21648] [INFO] create snapshot idx 200000 log_term 1 done: 189 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:39:38.222_856+00:00 [21754] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:39:38.224_181+00:00 [21754] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:39:38.224_212+00:00 [21754] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:39:38.224_218+00:00 [21754] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:39:38.224_241+00:00 [21754] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:39:38.224_245+00:00 [21754] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:39:38.224_248+00:00 [21754] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:39:38.224_276+00:00 [21754] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:39:38.224_418+00:00 [21790] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:39:39.585_459+00:00 [21761] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:39:39.585_469+00:00 [21761] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:39:39.585_484+00:00 [21761] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:39:39.585_495+00:00 [21761] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:39:39.585_502+00:00 [21761] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:39:39.585_506+00:00 [21761] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:39:39.585_524+00:00 [21761] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:39:39.585_577+00:00 [21789] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:39:39.585_584+00:00 [21789] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:39:39.585_593+00:00 [21789] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:39:39.775_649+00:00 [21754] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:39:39.776_023+00:00 [21761] [INFO] 0x5619fb8b48b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:39:39.776_342+00:00 [21761] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:39:39.776_350+00:00 [21761] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:39:39.776_401+00:00 [21789] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:39:39.776_412+00:00 [21789] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:39:39.776_459+00:00 [21789] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:39:39.776_461+00:00 [21789] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:39:39.776_502+00:00 [21789] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:39:39.776_506+00:00 [21789] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:39:39.776_511+00:00 [21789] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:39:40.026_076+00:00 [21754] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:39:40.026_496+00:00 [21761] [INFO] 0x5619fb8b4c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:39:40.026_930+00:00 [21761] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:39:40.026_934+00:00 [21761] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:39:40.027_055+00:00 [21761] [INFO] 0x7fd5d00018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:39:40.027_208+00:00 [21761] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:39:40.027_390+00:00 [21789] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:39:40.027_402+00:00 [21789] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:39:40.027_443+00:00 [21789] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:39:40.027_445+00:00 [21789] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:39:40.027_477+00:00 [21789] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:39:40.027_480+00:00 [21789] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:39:40.027_486+00:00 [21789] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:39:40.280_805+00:00 [21759] [INFO] 0x5619fb8b48b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:39:40.280_976+00:00 [21759] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:39:41.562_085+00:00 [21768] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.562_350+00:00 [21768] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.564_715+00:00 [21768] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.568_841+00:00 [21777] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.577_010+00:00 [21765] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.593_383+00:00 [21763] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.625_587+00:00 [21767] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.689_617+00:00 [21763] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:41.817_876+00:00 [21784] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:42.074_370+00:00 [21770] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:42.573_962+00:00 [21779] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:43.074_021+00:00 [21785] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:43.574_076+00:00 [21766] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:44.074_079+00:00 [21762] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:44.574_522+00:00 [21779] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:45.074_246+00:00 [21772] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:45.574_264+00:00 [21760] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:46.074_238+00:00 [21764] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:46.574_286+00:00 [21757] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:39:46.870_388+00:00 [21789] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:39:46.870_396+00:00 [21789] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:39:46.870_491+00:00 [21789] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:39:46.870_495+00:00 [21789] [INFO] create snapshot idx 100000 log_term 1 done: 95 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:39:47.074_655+00:00 [21775] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:39:54.302_577+00:00 [21789] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:39:54.302_585+00:00 [21789] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:39:54.302_679+00:00 [21789] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:39:54.302_684+00:00 [21789] [INFO] create snapshot idx 200000 log_term 1 done: 95 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:40:35.392_686+00:00 [21902] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:40:35.394_004+00:00 [21902] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:40:35.394_033+00:00 [21902] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:40:35.394_039+00:00 [21902] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:40:35.394_067+00:00 [21902] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:40:35.394_071+00:00 [21902] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:40:35.394_074+00:00 [21902] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:40:35.394_106+00:00 [21902] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:40:35.394_273+00:00 [21938] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:40:36.883_267+00:00 [21909] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:40:36.883_277+00:00 [21909] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:40:36.883_291+00:00 [21909] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:40:36.883_303+00:00 [21909] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:40:36.883_309+00:00 [21909] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:40:36.883_313+00:00 [21909] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:40:36.883_332+00:00 [21909] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:40:36.883_380+00:00 [21937] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:40:36.883_388+00:00 [21937] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:40:36.883_402+00:00 [21937] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:40:36.945_090+00:00 [21902] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:40:36.945_468+00:00 [21909] [INFO] 0x555e598168b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:40:36.945_800+00:00 [21909] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:40:36.945_808+00:00 [21909] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:40:36.945_862+00:00 [21937] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:40:36.945_872+00:00 [21937] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:40:36.945_920+00:00 [21937] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:40:36.945_923+00:00 [21937] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:40:36.945_970+00:00 [21937] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:40:36.945_973+00:00 [21937] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:40:36.945_979+00:00 [21937] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:40:37.195_332+00:00 [21902] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:40:37.195_533+00:00 [21909] [INFO] 0x555e59816c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:40:37.195_931+00:00 [21909] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:40:37.195_935+00:00 [21909] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:40:37.196_072+00:00 [21909] [INFO] 0x7fdd280018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:40:37.196_246+00:00 [21909] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:40:37.196_457+00:00 [21937] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:40:37.196_472+00:00 [21937] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:40:37.196_523+00:00 [21937] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:40:37.196_526+00:00 [21937] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:40:37.196_565+00:00 [21937] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:40:37.196_570+00:00 [21937] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:40:37.196_577+00:00 [21937] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:40:37.450_583+00:00 [21907] [INFO] 0x555e598168b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:40:37.450_768+00:00 [21907] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:40:38.748_041+00:00 [21925] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:38.748_370+00:00 [21925] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:38.750_437+00:00 [21925] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:38.754_870+00:00 [21932] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:38.763_181+00:00 [21933] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:38.779_357+00:00 [21936] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:38.811_615+00:00 [21926] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:38.875_815+00:00 [21928] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:39.003_826+00:00 [21919] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:39.260_023+00:00 [21922] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:39.760_151+00:00 [21905] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:40.260_513+00:00 [21914] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:40.760_080+00:00 [21936] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:41.260_176+00:00 [21935] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:41.760_225+00:00 [21926] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:42.260_622+00:00 [21923] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:42.760_852+00:00 [21934] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:43.260_355+00:00 [21913] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:43.760_402+00:00 [21936] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:40:44.096_452+00:00 [21937] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:40:44.096_459+00:00 [21937] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:40:44.096_679+00:00 [21937] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:40:44.096_683+00:00 [21937] [INFO] create snapshot idx 100000 log_term 1 done: 220 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:40:44.260_603+00:00 [21924] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:40:51.507_388+00:00 [21937] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:40:51.507_412+00:00 [21937] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:40:51.507_651+00:00 [21937] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:40:51.507_680+00:00 [21937] [INFO] create snapshot idx 200000 log_term 1 done: 263 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:41:32.562_922+00:00 [22049] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:41:32.564_881+00:00 [22049] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:41:32.564_915+00:00 [22049] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:41:32.564_919+00:00 [22049] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:41:32.564_941+00:00 [22049] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:41:32.564_946+00:00 [22049] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:41:32.564_949+00:00 [22049] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:41:32.564_979+00:00 [22049] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:41:32.565_460+00:00 [22085] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:41:34.476_154+00:00 [22056] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:41:34.476_165+00:00 [22056] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:41:34.476_180+00:00 [22056] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:41:34.476_190+00:00 [22056] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:41:34.476_197+00:00 [22056] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:41:34.476_201+00:00 [22056] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:41:34.476_219+00:00 [22056] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:41:34.476_268+00:00 [22084] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:41:34.476_276+00:00 [22084] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:41:34.476_285+00:00 [22084] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:41:34.616_205+00:00 [22049] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:41:34.616_556+00:00 [22056] [INFO] 0x55fff8bd68b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:41:34.616_905+00:00 [22056] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:41:34.616_915+00:00 [22056] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:41:34.616_963+00:00 [22084] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:41:34.616_973+00:00 [22084] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:41:34.617_019+00:00 [22084] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:41:34.617_022+00:00 [22084] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:41:34.617_066+00:00 [22084] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:41:34.617_070+00:00 [22084] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:41:34.617_075+00:00 [22084] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:41:34.866_710+00:00 [22049] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:41:34.867_048+00:00 [22056] [INFO] 0x55fff8bd6c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:41:34.867_409+00:00 [22056] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:41:34.867_413+00:00 [22056] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:41:34.867_550+00:00 [22056] [INFO] 0x7f672c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:41:34.867_717+00:00 [22056] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:41:34.867_924+00:00 [22084] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:41:34.867_939+00:00 [22084] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:41:34.867_989+00:00 [22084] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:41:34.867_992+00:00 [22084] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:41:34.868_032+00:00 [22084] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:41:34.868_036+00:00 [22084] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:41:34.868_044+00:00 [22084] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:41:35.121_884+00:00 [22083] [INFO] 0x55fff8bd68b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:41:35.122_054+00:00 [22083] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:41:36.470_857+00:00 [22055] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.471_357+00:00 [22055] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.473_655+00:00 [22071] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.477_994+00:00 [22072] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.486_266+00:00 [22072] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.502_429+00:00 [22083] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.534_787+00:00 [22070] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.598_880+00:00 [22077] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.726_962+00:00 [22082] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:36.983_154+00:00 [22074] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:37.483_192+00:00 [22063] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:37.983_280+00:00 [22068] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:38.483_348+00:00 [22082] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:38.983_473+00:00 [22052] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:39.483_979+00:00 [22080] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:39.983_519+00:00 [22075] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:40.483_462+00:00 [22055] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:40.983_625+00:00 [22055] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:41.484_064+00:00 [22062] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:41:41.747_952+00:00 [22084] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:41:41.747_960+00:00 [22084] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:41:41.748_063+00:00 [22084] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:41:41.748_067+00:00 [22084] [INFO] create snapshot idx 100000 log_term 1 done: 103 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:41:41.983_685+00:00 [22057] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:41:49.086_535+00:00 [22084] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:41:49.086_543+00:00 [22084] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:41:49.086_560+00:00 [22084] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:41:49.086_564+00:00 [22084] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:42:30.237_673+00:00 [22196] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:42:30.239_013+00:00 [22196] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:42:30.239_045+00:00 [22196] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:42:30.239_050+00:00 [22196] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:42:30.239_073+00:00 [22196] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:42:30.239_077+00:00 [22196] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:42:30.239_079+00:00 [22196] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:42:30.239_113+00:00 [22196] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:42:30.239_249+00:00 [22232] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:42:32.193_404+00:00 [22203] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:42:32.193_427+00:00 [22203] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:42:32.193_463+00:00 [22203] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:42:32.193_489+00:00 [22203] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:42:32.193_505+00:00 [22203] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:42:32.193_516+00:00 [22203] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:42:32.193_568+00:00 [22203] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:42:32.193_699+00:00 [22231] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:42:32.193_724+00:00 [22231] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:42:32.193_752+00:00 [22231] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:42:32.290_181+00:00 [22196] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:42:32.290_631+00:00 [22203] [INFO] 0x55c29dfd08b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:42:32.290_985+00:00 [22203] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:42:32.290_993+00:00 [22203] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:42:32.291_046+00:00 [22231] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:42:32.291_058+00:00 [22231] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:42:32.291_110+00:00 [22231] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:42:32.291_113+00:00 [22231] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:42:32.291_155+00:00 [22231] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:42:32.291_159+00:00 [22231] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:42:32.291_165+00:00 [22231] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:42:32.540_421+00:00 [22196] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:42:32.540_616+00:00 [22203] [INFO] 0x55c29dfd0c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:42:32.540_993+00:00 [22203] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:42:32.540_998+00:00 [22203] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:42:32.541_139+00:00 [22203] [INFO] 0x7fec940018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:42:32.541_317+00:00 [22203] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:42:32.541_527+00:00 [22231] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:42:32.541_542+00:00 [22231] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:42:32.541_594+00:00 [22231] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:42:32.541_596+00:00 [22231] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:42:32.541_635+00:00 [22231] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:42:32.541_639+00:00 [22231] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:42:32.541_646+00:00 [22231] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:42:32.795_570+00:00 [22201] [INFO] 0x55c29dfd08b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:42:32.795_752+00:00 [22201] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:42:34.144_582+00:00 [22209] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.144_899+00:00 [22209] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.147_331+00:00 [22209] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.151_457+00:00 [22210] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.159_614+00:00 [22207] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.176_041+00:00 [22213] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.208_094+00:00 [22222] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.272_515+00:00 [22207] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.401_020+00:00 [22206] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:34.656_808+00:00 [22219] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:35.156_820+00:00 [22212] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:35.657_287+00:00 [22200] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:36.156_837+00:00 [22207] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:36.656_850+00:00 [22226] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:37.156_951+00:00 [22218] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:37.657_414+00:00 [22224] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:38.157_060+00:00 [22212] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:38.657_153+00:00 [22220] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:39.157_395+00:00 [22208] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:42:39.486_902+00:00 [22231] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:42:39.487_001+00:00 [22231] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:42:39.487_019+00:00 [22231] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:42:39.487_023+00:00 [22231] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:42:39.657_557+00:00 [22217] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:42:46.843_402+00:00 [22231] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:42:46.843_410+00:00 [22231] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:42:46.843_653+00:00 [22231] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:42:46.843_683+00:00 [22231] [INFO] create snapshot idx 200000 log_term 1 done: 268 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:43:27.903_459+00:00 [22346] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:43:27.904_788+00:00 [22346] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:43:27.904_818+00:00 [22346] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:43:27.904_823+00:00 [22346] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:43:27.904_848+00:00 [22346] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:43:27.904_852+00:00 [22346] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:43:27.904_855+00:00 [22346] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:43:27.904_885+00:00 [22346] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:43:27.905_026+00:00 [22382] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:43:29.493_073+00:00 [22353] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:43:29.493_085+00:00 [22353] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:43:29.493_099+00:00 [22353] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:43:29.493_110+00:00 [22353] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:43:29.493_116+00:00 [22353] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:43:29.493_119+00:00 [22353] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:43:29.493_138+00:00 [22353] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:43:29.493_188+00:00 [22381] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:43:29.493_196+00:00 [22381] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:43:29.493_206+00:00 [22381] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:43:29.705_871+00:00 [22346] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:43:29.706_257+00:00 [22353] [INFO] 0x556c10ab58b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:43:29.706_581+00:00 [22353] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:43:29.706_590+00:00 [22353] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:43:29.706_643+00:00 [22381] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:43:29.706_654+00:00 [22381] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:43:29.706_717+00:00 [22381] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:43:29.706_719+00:00 [22381] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:43:29.706_762+00:00 [22381] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:43:29.706_766+00:00 [22381] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:43:29.706_772+00:00 [22381] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:43:29.956_157+00:00 [22346] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:43:29.956_392+00:00 [22353] [INFO] 0x556c10ab5c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:43:29.956_784+00:00 [22353] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:43:29.956_788+00:00 [22353] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:43:29.956_928+00:00 [22353] [INFO] 0x7ff0f40018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:43:29.957_105+00:00 [22353] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:43:29.957_314+00:00 [22381] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:43:29.957_329+00:00 [22381] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:43:29.957_383+00:00 [22381] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:43:29.957_386+00:00 [22381] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:43:29.957_425+00:00 [22381] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:43:29.957_429+00:00 [22381] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:43:29.957_436+00:00 [22381] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:43:30.211_421+00:00 [22351] [INFO] 0x556c10ab58b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:43:30.211_593+00:00 [22351] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:43:31.506_348+00:00 [22367] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.506_625+00:00 [22367] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.509_208+00:00 [22376] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.513_432+00:00 [22354] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.521_620+00:00 [22376] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.537_644+00:00 [22380] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.570_205+00:00 [22377] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.634_351+00:00 [22372] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:31.762_824+00:00 [22355] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:32.018_640+00:00 [22363] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:32.519_179+00:00 [22364] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:33.018_808+00:00 [22372] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:33.518_818+00:00 [22367] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:34.018_915+00:00 [22371] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:34.519_051+00:00 [22366] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:35.019_295+00:00 [22356] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:35.519_424+00:00 [22357] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:36.019_880+00:00 [22379] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:36.519_865+00:00 [22378] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:43:36.957_989+00:00 [22381] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:43:36.957_997+00:00 [22381] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:43:36.958_118+00:00 [22381] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:43:36.958_122+00:00 [22381] [INFO] create snapshot idx 100000 log_term 1 done: 121 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:43:37.019_463+00:00 [22371] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:43:44.307_609+00:00 [22381] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:43:44.307_617+00:00 [22381] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:43:44.307_794+00:00 [22381] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:43:44.307_798+00:00 [22381] [INFO] create snapshot idx 200000 log_term 1 done: 177 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:50:52.836_665+00:00 [22692] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:50:52.837_978+00:00 [22692] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:50:52.838_012+00:00 [22692] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:50:52.838_015+00:00 [22692] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:50:52.838_035+00:00 [22692] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:50:52.838_039+00:00 [22692] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:50:52.838_041+00:00 [22692] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:50:52.838_079+00:00 [22692] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:50:52.838_215+00:00 [22728] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:50:54.883_302+00:00 [22699] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:50:54.883_312+00:00 [22699] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:50:54.883_327+00:00 [22699] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:50:54.883_337+00:00 [22699] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:50:54.883_344+00:00 [22699] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:50:54.883_347+00:00 [22699] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:50:54.883_366+00:00 [22699] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:50:54.883_422+00:00 [22727] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:50:54.883_430+00:00 [22727] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:50:54.883_440+00:00 [22727] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:50:54.889_241+00:00 [22692] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:50:54.889_604+00:00 [22699] [INFO] 0x56045b87d8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:50:54.889_921+00:00 [22699] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:50:54.889_928+00:00 [22699] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:50:54.889_974+00:00 [22727] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:50:54.889_984+00:00 [22727] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:50:54.890_030+00:00 [22727] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:50:54.890_033+00:00 [22727] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:50:54.890_073+00:00 [22727] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:50:54.890_076+00:00 [22727] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:50:54.890_082+00:00 [22727] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:50:55.139_526+00:00 [22692] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:50:55.139_740+00:00 [22699] [INFO] 0x56045b87dc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:50:55.140_127+00:00 [22699] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:50:55.140_131+00:00 [22699] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:50:55.140_272+00:00 [22699] [INFO] 0x7f38c40018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:50:55.140_440+00:00 [22699] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:50:55.140_637+00:00 [22727] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:50:55.140_649+00:00 [22727] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:50:55.140_694+00:00 [22727] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:50:55.140_696+00:00 [22727] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:50:55.140_731+00:00 [22727] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:50:55.140_734+00:00 [22727] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:50:55.140_740+00:00 [22727] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:50:55.393_749+00:00 [22697] [INFO] 0x56045b87d8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:50:55.393_920+00:00 [22697] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:51:02.366_083+00:00 [22704] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.366_431+00:00 [22704] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.368_524+00:00 [22703] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.372_528+00:00 [22702] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.380_659+00:00 [22710] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.396_701+00:00 [22699] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.428_841+00:00 [22718] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.492_922+00:00 [22696] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.620_996+00:00 [22714] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:02.877_018+00:00 [22716] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:03.377_154+00:00 [22711] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:03.877_180+00:00 [22699] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:04.377_253+00:00 [22722] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:04.877_369+00:00 [22716] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:05.377_396+00:00 [22723] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:05.877_450+00:00 [22722] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:06.377_545+00:00 [22698] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:06.877_532+00:00 [22725] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:07.377_646+00:00 [22717] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:07.877_579+00:00 [22713] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:51:08.162_039+00:00 [22727] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:51:08.162_048+00:00 [22727] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:51:08.162_070+00:00 [22727] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:51:08.162_073+00:00 [22727] [INFO] create snapshot idx 100000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:51:50.491_318+00:00 [22833] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:51:50.492_652+00:00 [22833] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:51:50.492_685+00:00 [22833] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:51:50.492_691+00:00 [22833] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:51:50.492_713+00:00 [22833] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:51:50.492_717+00:00 [22833] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:51:50.492_720+00:00 [22833] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:51:50.492_752+00:00 [22833] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:51:50.492_889+00:00 [22869] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:51:52.319_939+00:00 [22840] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:51:52.319_949+00:00 [22840] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:51:52.319_965+00:00 [22840] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:51:52.319_976+00:00 [22840] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:51:52.319_983+00:00 [22840] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:51:52.319_986+00:00 [22840] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:51:52.320_004+00:00 [22840] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:51:52.320_054+00:00 [22868] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:51:52.320_062+00:00 [22868] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:51:52.320_073+00:00 [22868] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:51:52.543_886+00:00 [22833] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:51:52.544_272+00:00 [22840] [INFO] 0x56212b8df8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:51:52.544_598+00:00 [22840] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:51:52.544_606+00:00 [22840] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:51:52.544_657+00:00 [22868] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:51:52.544_669+00:00 [22868] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:51:52.544_716+00:00 [22868] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:51:52.544_718+00:00 [22868] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:51:52.544_762+00:00 [22868] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:51:52.544_765+00:00 [22868] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:51:52.544_771+00:00 [22868] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:51:52.794_127+00:00 [22833] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:51:52.794_324+00:00 [22840] [INFO] 0x56212b8dfc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:51:52.794_826+00:00 [22840] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:51:52.794_831+00:00 [22840] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:51:52.794_973+00:00 [22840] [INFO] 0x7f62680018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:51:52.795_143+00:00 [22840] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:51:52.795_354+00:00 [22868] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:51:52.795_369+00:00 [22868] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:51:52.795_420+00:00 [22868] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:51:52.795_422+00:00 [22868] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:51:52.795_458+00:00 [22868] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:51:52.795_461+00:00 [22868] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:51:52.795_467+00:00 [22868] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:51:53.048_563+00:00 [22838] [INFO] 0x56212b8df8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:51:53.048_710+00:00 [22838] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:51:57.188_007+00:00 [22859] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.188_279+00:00 [22859] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.190_347+00:00 [22859] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.194_475+00:00 [22865] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.202_681+00:00 [22848] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.218_852+00:00 [22854] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.250_817+00:00 [22865] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.314_900+00:00 [22862] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.442_974+00:00 [22841] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:57.699_064+00:00 [22854] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:58.199_244+00:00 [22838] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:58.699_364+00:00 [22845] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:59.199_536+00:00 [22852] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:51:59.699_564+00:00 [22867] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:00.199_617+00:00 [22867] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:00.699_666+00:00 [22867] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:00.920_425+00:00 [22868] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:52:00.920_432+00:00 [22868] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:52:00.920_452+00:00 [22868] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:52:00.920_456+00:00 [22868] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:52:01.199_719+00:00 [22862] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:01.699_802+00:00 [22863] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:02.199_840+00:00 [22860] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:02.699_829+00:00 [22843] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:52:08.283_826+00:00 [22868] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:52:08.283_835+00:00 [22868] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:52:08.283_853+00:00 [22868] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:52:08.283_857+00:00 [22868] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:52:48.168_383+00:00 [22968] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:52:48.169_993+00:00 [22968] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:52:48.170_023+00:00 [22968] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:52:48.170_029+00:00 [22968] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:52:48.170_052+00:00 [22968] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:52:48.170_056+00:00 [22968] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:52:48.170_059+00:00 [22968] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:52:48.170_132+00:00 [22968] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:52:48.170_320+00:00 [23004] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:52:50.141_376+00:00 [22975] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:52:50.141_388+00:00 [22975] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:52:50.141_405+00:00 [22975] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:52:50.141_416+00:00 [22975] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:52:50.141_422+00:00 [22975] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:52:50.141_425+00:00 [22975] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:52:50.141_443+00:00 [22975] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:52:50.141_495+00:00 [23003] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:52:50.141_503+00:00 [23003] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:52:50.141_513+00:00 [23003] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:50.221_886+00:00 [22968] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:52:50.222_320+00:00 [22975] [INFO] 0x555cdbaaa8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:52:50.222_629+00:00 [22975] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:52:50.222_636+00:00 [22975] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:52:50.222_701+00:00 [23003] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:52:50.222_711+00:00 [23003] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:52:50.222_758+00:00 [23003] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:52:50.222_760+00:00 [23003] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:52:50.222_801+00:00 [23003] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:52:50.222_805+00:00 [23003] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:52:50.222_810+00:00 [23003] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:50.472_139+00:00 [22968] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:52:50.472_333+00:00 [22975] [INFO] 0x555cdbaaac60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:52:50.472_756+00:00 [22975] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:52:50.472_760+00:00 [22975] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:52:50.472_899+00:00 [22975] [INFO] 0x7fdaf00018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:52:50.473_072+00:00 [22975] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:52:50.473_260+00:00 [23003] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:52:50.473_273+00:00 [23003] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:52:50.473_316+00:00 [23003] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:52:50.473_318+00:00 [23003] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:52:50.473_350+00:00 [23003] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:52:50.473_354+00:00 [23003] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:52:50.473_360+00:00 [23003] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:50.727_625+00:00 [22973] [INFO] 0x555cdbaaa8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:52:50.727_796+00:00 [22973] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:52:53.907_929+00:00 [22997] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:53.908_381+00:00 [22997] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:53.910_574+00:00 [22973] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:53.914_603+00:00 [22990] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:53.922_653+00:00 [22971] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:53.938_829+00:00 [22994] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:53.971_360+00:00 [22994] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:54.034_847+00:00 [22997] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:54.162_943+00:00 [22975] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:54.418_980+00:00 [22978] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:54.919_085+00:00 [22997] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:55.419_268+00:00 [22995] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:55.919_327+00:00 [22977] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:56.419_463+00:00 [23002] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:56.919_544+00:00 [22996] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:57.234_520+00:00 [23003] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:52:57.234_529+00:00 [23003] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:52:57.234_549+00:00 [23003] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:52:57.234_552+00:00 [23003] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:52:57.419_572+00:00 [22995] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:57.919_635+00:00 [23002] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:58.419_824+00:00 [22981] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:58.919_761+00:00 [22971] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:52:59.420_124+00:00 [22971] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:53:04.138_294+00:00 [23003] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:53:04.138_302+00:00 [23003] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:53:04.138_319+00:00 [23003] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:53:04.138_323+00:00 [23003] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:53:45.855_800+00:00 [23103] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:53:45.857_121+00:00 [23103] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:53:45.857_153+00:00 [23103] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:53:45.857_157+00:00 [23103] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:53:45.857_179+00:00 [23103] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:53:45.857_183+00:00 [23103] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:53:45.857_186+00:00 [23103] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:53:45.857_213+00:00 [23103] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:53:45.857_348+00:00 [23139] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:53:47.592_462+00:00 [23110] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:53:47.592_473+00:00 [23110] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:53:47.592_488+00:00 [23110] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:53:47.592_499+00:00 [23110] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:53:47.592_505+00:00 [23110] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:53:47.592_509+00:00 [23110] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:53:47.592_527+00:00 [23110] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:53:47.592_578+00:00 [23138] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:53:47.592_586+00:00 [23138] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:53:47.592_595+00:00 [23138] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:53:47.658_315+00:00 [23103] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:53:47.658_716+00:00 [23110] [INFO] 0x55de04b098b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:53:47.659_085+00:00 [23110] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:53:47.659_092+00:00 [23110] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:53:47.659_138+00:00 [23138] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:53:47.659_148+00:00 [23138] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:53:47.659_193+00:00 [23138] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:53:47.659_195+00:00 [23138] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:53:47.659_236+00:00 [23138] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:53:47.659_240+00:00 [23138] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:53:47.659_245+00:00 [23138] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:53:47.908_481+00:00 [23103] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:53:47.908_673+00:00 [23110] [INFO] 0x55de04b09c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:53:47.909_105+00:00 [23110] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:53:47.909_110+00:00 [23110] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:53:47.909_249+00:00 [23110] [INFO] 0x7f255c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:53:47.909_407+00:00 [23110] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:53:47.909_614+00:00 [23138] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:53:47.909_629+00:00 [23138] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:53:47.909_679+00:00 [23138] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:53:47.909_681+00:00 [23138] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:53:47.909_721+00:00 [23138] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:53:47.909_724+00:00 [23138] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:53:47.909_730+00:00 [23138] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:53:48.163_553+00:00 [23108] [INFO] 0x55de04b098b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:53:48.163_723+00:00 [23108] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:53:50.985_445+00:00 [23106] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:50.986_497+00:00 [23106] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:50.987_739+00:00 [23124] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:50.991_816+00:00 [23110] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:50.999_945+00:00 [23126] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:51.016_002+00:00 [23124] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:51.048_243+00:00 [23128] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:51.112_284+00:00 [23133] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:51.240_522+00:00 [23109] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:51.496_768+00:00 [23108] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:51.996_966+00:00 [23134] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:52.496_971+00:00 [23109] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:52.996_970+00:00 [23116] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:53.497_163+00:00 [23134] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:53.997_307+00:00 [23119] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:54.448_943+00:00 [23138] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:53:54.448_950+00:00 [23138] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:53:54.449_065+00:00 [23138] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:53:54.449_069+00:00 [23138] [INFO] create snapshot idx 100000 log_term 1 done: 115 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:53:54.497_482+00:00 [23135] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:54.997_396+00:00 [23120] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:55.497_504+00:00 [23132] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:55.997_482+00:00 [23117] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:53:56.497_680+00:00 [23130] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:54:01.266_208+00:00 [23138] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:54:01.266_216+00:00 [23138] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:54:01.266_233+00:00 [23138] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:54:01.266_237+00:00 [23138] [INFO] create snapshot idx 200000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:54:43.280_558+00:00 [23290] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:54:43.281_888+00:00 [23290] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:54:43.281_917+00:00 [23290] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:54:43.281_926+00:00 [23290] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:54:43.281_945+00:00 [23290] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:54:43.281_949+00:00 [23290] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:54:43.281_952+00:00 [23290] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:54:43.281_982+00:00 [23290] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:54:43.282_125+00:00 [23326] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:54:44.460_149+00:00 [23297] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:54:44.460_159+00:00 [23297] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:54:44.460_174+00:00 [23297] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:54:44.460_184+00:00 [23297] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:54:44.460_190+00:00 [23297] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:54:44.460_193+00:00 [23297] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:54:44.460_210+00:00 [23297] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:54:44.460_258+00:00 [23325] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:54:44.460_266+00:00 [23325] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:54:44.460_275+00:00 [23325] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:54:44.582_798+00:00 [23290] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:54:44.583_174+00:00 [23297] [INFO] 0x5645afaf78b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:54:44.583_576+00:00 [23297] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:54:44.583_583+00:00 [23297] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:54:44.583_631+00:00 [23325] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:54:44.583_642+00:00 [23325] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:54:44.583_689+00:00 [23325] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:54:44.583_691+00:00 [23325] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:54:44.583_732+00:00 [23325] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:54:44.583_736+00:00 [23325] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:54:44.583_741+00:00 [23325] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:54:44.833_055+00:00 [23290] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:54:44.833_270+00:00 [23297] [INFO] 0x5645afaf7c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:54:44.833_669+00:00 [23297] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:54:44.833_675+00:00 [23297] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:54:44.833_834+00:00 [23297] [INFO] 0x7f36040018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:54:44.833_997+00:00 [23297] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:54:44.834_202+00:00 [23325] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:54:44.834_217+00:00 [23325] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:54:44.834_271+00:00 [23325] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:54:44.834_273+00:00 [23325] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:54:44.834_313+00:00 [23325] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:54:44.834_317+00:00 [23325] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:54:44.834_324+00:00 [23325] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:54:45.088_490+00:00 [23295] [INFO] 0x5645afaf78b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:54:45.088_661+00:00 [23295] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:54:47.552_003+00:00 [23303] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.552_617+00:00 [23303] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.554_321+00:00 [23295] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.558_385+00:00 [23308] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.566_387+00:00 [23297] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.582_436+00:00 [23312] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.614_678+00:00 [23324] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.678_827+00:00 [23303] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:47.806_980+00:00 [23299] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:48.063_236+00:00 [23311] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:48.563_592+00:00 [23306] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:49.063_364+00:00 [23299] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:49.563_466+00:00 [23324] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:50.063_443+00:00 [23305] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:50.563_520+00:00 [23316] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:50.955_964+00:00 [23325] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:54:50.955_972+00:00 [23325] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:54:50.956_187+00:00 [23325] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:54:50.956_219+00:00 [23325] [INFO] create snapshot idx 100000 log_term 1 done: 243 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:54:51.063_544+00:00 [23293] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:51.563_672+00:00 [23324] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:52.063_986+00:00 [23303] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:52.563_995+00:00 [23293] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:54:53.063_976+00:00 [23304] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:54:58.444_728+00:00 [23325] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:54:58.444_736+00:00 [23325] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:54:58.444_991+00:00 [23325] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:54:58.445_021+00:00 [23325] [INFO] create snapshot idx 200000 log_term 1 done: 280 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:55:40.208_878+00:00 [23474] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:55:40.210_201+00:00 [23474] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:55:40.210_238+00:00 [23474] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:55:40.210_242+00:00 [23474] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:55:40.210_266+00:00 [23474] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:55:40.210_270+00:00 [23474] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:55:40.210_272+00:00 [23474] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:55:40.210_299+00:00 [23474] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:55:40.210_445+00:00 [23510] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:55:41.412_461+00:00 [23481] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:55:41.412_473+00:00 [23481] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:55:41.412_488+00:00 [23481] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:55:41.412_504+00:00 [23481] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:55:41.412_511+00:00 [23481] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:55:41.412_514+00:00 [23481] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:55:41.412_533+00:00 [23481] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:55:41.412_584+00:00 [23509] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:55:41.412_592+00:00 [23509] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:55:41.412_602+00:00 [23509] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:55:41.511_108+00:00 [23474] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:55:41.511_479+00:00 [23481] [INFO] 0x555fa48888b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:55:41.511_793+00:00 [23481] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:55:41.511_801+00:00 [23481] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:55:41.511_848+00:00 [23509] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:55:41.511_859+00:00 [23509] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:55:41.511_903+00:00 [23509] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:55:41.511_906+00:00 [23509] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:55:41.511_948+00:00 [23509] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:55:41.511_951+00:00 [23509] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:55:41.511_957+00:00 [23509] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:55:41.761_556+00:00 [23474] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:55:41.761_858+00:00 [23481] [INFO] 0x555fa4888c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:55:41.762_299+00:00 [23481] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:55:41.762_304+00:00 [23481] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:55:41.762_439+00:00 [23481] [INFO] 0x7fdb980018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:55:41.762_611+00:00 [23481] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:55:41.762_830+00:00 [23509] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:55:41.762_842+00:00 [23509] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:55:41.762_887+00:00 [23509] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:55:41.762_889+00:00 [23509] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:55:41.762_922+00:00 [23509] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:55:41.762_925+00:00 [23509] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:55:41.762_930+00:00 [23509] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:55:42.016_639+00:00 [23479] [INFO] 0x555fa48888b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:55:42.016_816+00:00 [23479] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:55:44.338_935+00:00 [23497] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.339_221+00:00 [23497] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.341_570+00:00 [23497] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.345_638+00:00 [23482] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.353_694+00:00 [23487] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.369_717+00:00 [23496] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.402_063+00:00 [23481] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.466_118+00:00 [23490] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.594_478+00:00 [23477] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:44.850_638+00:00 [23491] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:45.350_555+00:00 [23494] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:45.850_534+00:00 [23504] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:46.350_692+00:00 [23480] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:46.850_697+00:00 [23508] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:47.351_117+00:00 [23486] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:47.850_827+00:00 [23490] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:48.079_716+00:00 [23509] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:55:48.079_724+00:00 [23509] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:55:48.079_827+00:00 [23509] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:55:48.079_831+00:00 [23509] [INFO] create snapshot idx 100000 log_term 1 done: 102 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:55:48.350_868+00:00 [23478] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:48.851_314+00:00 [23502] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:49.351_330+00:00 [23508] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:55:49.851_144+00:00 [23506] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:55:55.441_158+00:00 [23509] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:55:55.441_165+00:00 [23509] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:55:55.441_372+00:00 [23509] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:55:55.441_389+00:00 [23509] [INFO] create snapshot idx 200000 log_term 1 done: 218 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:56:37.106_238+00:00 [23682] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:56:37.107_580+00:00 [23682] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:56:37.107_609+00:00 [23682] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:56:37.107_614+00:00 [23682] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:56:37.107_635+00:00 [23682] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:56:37.107_639+00:00 [23682] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:56:37.107_642+00:00 [23682] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:56:37.107_673+00:00 [23682] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:56:37.107_815+00:00 [23718] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:56:39.154_836+00:00 [23689] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:56:39.154_847+00:00 [23689] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:56:39.154_863+00:00 [23689] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:56:39.154_880+00:00 [23689] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:56:39.154_886+00:00 [23689] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:56:39.154_890+00:00 [23689] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:56:39.154_909+00:00 [23689] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:56:39.154_964+00:00 [23717] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:56:39.154_971+00:00 [23717] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:56:39.154_981+00:00 [23717] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:56:39.159_207+00:00 [23682] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:56:39.159_579+00:00 [23689] [INFO] 0x55bf1e55f8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:56:39.159_886+00:00 [23689] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:56:39.159_894+00:00 [23689] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:56:39.159_941+00:00 [23717] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:56:39.159_952+00:00 [23717] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:56:39.159_998+00:00 [23717] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:56:39.160_001+00:00 [23717] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:56:39.160_042+00:00 [23717] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:56:39.160_046+00:00 [23717] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:56:39.160_051+00:00 [23717] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:56:39.409_447+00:00 [23682] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:56:39.409_656+00:00 [23689] [INFO] 0x55bf1e55fc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:56:39.410_120+00:00 [23689] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:56:39.410_125+00:00 [23689] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:56:39.410_269+00:00 [23689] [INFO] 0x7fedf00018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:56:39.410_451+00:00 [23689] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:56:39.410_679+00:00 [23717] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:56:39.410_695+00:00 [23717] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:56:39.410_753+00:00 [23717] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:56:39.410_755+00:00 [23717] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:56:39.410_794+00:00 [23717] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:56:39.410_798+00:00 [23717] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:56:39.410_805+00:00 [23717] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:56:39.664_232+00:00 [23687] [INFO] 0x55bf1e55f8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:56:39.664_415+00:00 [23687] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:56:42.163_480+00:00 [23713] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.163_778+00:00 [23714] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.165_843+00:00 [23714] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.170_231+00:00 [23716] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.178_327+00:00 [23701] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.194_404+00:00 [23707] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.226_545+00:00 [23695] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.290_556+00:00 [23699] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.418_984+00:00 [23701] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:42.674_791+00:00 [23696] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:43.174_951+00:00 [23699] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:43.675_245+00:00 [23697] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:44.175_601+00:00 [23713] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:44.675_444+00:00 [23691] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:45.175_694+00:00 [23707] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:45.675_718+00:00 [23712] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:45.829_838+00:00 [23717] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:56:45.829_845+00:00 [23717] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:56:45.829_972+00:00 [23717] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:56:45.829_976+00:00 [23717] [INFO] create snapshot idx 100000 log_term 1 done: 127 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:56:46.175_861+00:00 [23713] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:46.675_872+00:00 [23707] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:47.175_933+00:00 [23686] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:56:47.676_389+00:00 [23701] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:56:53.185_217+00:00 [23717] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:56:53.185_241+00:00 [23717] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:56:53.185_322+00:00 [23717] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:56:53.185_326+00:00 [23717] [INFO] create snapshot idx 200000 log_term 1 done: 81 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:57:34.776_919+00:00 [23890] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:57:34.778_249+00:00 [23890] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:57:34.778_279+00:00 [23890] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:57:34.778_284+00:00 [23890] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:57:34.778_306+00:00 [23890] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:57:34.778_310+00:00 [23890] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:57:34.778_312+00:00 [23890] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:57:34.778_348+00:00 [23890] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:57:34.778_493+00:00 [23926] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:57:36.785_522+00:00 [23897] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:57:36.785_531+00:00 [23897] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:57:36.785_546+00:00 [23897] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:57:36.785_562+00:00 [23897] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:57:36.785_570+00:00 [23897] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:57:36.785_574+00:00 [23897] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:57:36.785_593+00:00 [23897] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:57:36.785_640+00:00 [23925] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:57:36.785_648+00:00 [23925] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:57:36.785_659+00:00 [23925] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:57:36.829_498+00:00 [23890] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:57:36.829_859+00:00 [23897] [INFO] 0x5651791518b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:57:36.830_261+00:00 [23897] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:57:36.830_268+00:00 [23897] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:57:36.830_316+00:00 [23925] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:57:36.830_327+00:00 [23925] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:57:36.830_372+00:00 [23925] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:57:36.830_374+00:00 [23925] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:57:36.830_416+00:00 [23925] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:57:36.830_419+00:00 [23925] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:57:36.830_425+00:00 [23925] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:57:37.079_723+00:00 [23890] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:57:37.079_928+00:00 [23897] [INFO] 0x565179151c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:57:37.080_291+00:00 [23897] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:57:37.080_295+00:00 [23897] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:57:37.080_428+00:00 [23897] [INFO] 0x7fecd40018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:57:37.080_599+00:00 [23897] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:57:37.080_801+00:00 [23925] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:57:37.080_815+00:00 [23925] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:57:37.080_867+00:00 [23925] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:57:37.080_869+00:00 [23925] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:57:37.080_908+00:00 [23925] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:57:37.080_912+00:00 [23925] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:57:37.080_918+00:00 [23925] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:57:37.334_786+00:00 [23895] [INFO] 0x5651791518b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:57:37.334_983+00:00 [23895] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:57:39.880_365+00:00 [23903] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:39.880_672+00:00 [23903] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:39.882_867+00:00 [23903] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:39.887_136+00:00 [23908] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:39.895_516+00:00 [23908] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:39.911_634+00:00 [23921] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:39.943_919+00:00 [23919] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:40.008_045+00:00 [23912] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:40.136_446+00:00 [23921] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:40.392_243+00:00 [23923] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:40.892_682+00:00 [23915] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:41.392_188+00:00 [23896] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:41.892_398+00:00 [23923] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:42.392_446+00:00 [23899] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:42.892_492+00:00 [23904] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:43.392_599+00:00 [23924] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:43.586_121+00:00 [23925] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:57:43.586_128+00:00 [23925] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:57:43.586_255+00:00 [23925] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:57:43.586_331+00:00 [23925] [INFO] create snapshot idx 100000 log_term 1 done: 198 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:57:43.892_702+00:00 [23900] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:44.393_190+00:00 [23918] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:44.892_918+00:00 [23913] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:57:45.392_918+00:00 [23924] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:57:50.980_566+00:00 [23925] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:57:50.980_573+00:00 [23925] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:57:50.980_662+00:00 [23925] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:57:50.980_733+00:00 [23925] [INFO] create snapshot idx 200000 log_term 1 done: 155 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:58:32.447_269+00:00 [24102] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:58:32.448_671+00:00 [24102] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:58:32.448_699+00:00 [24102] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:58:32.448_705+00:00 [24102] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:58:32.448_723+00:00 [24102] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:58:32.448_727+00:00 [24102] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:58:32.448_729+00:00 [24102] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:58:32.448_790+00:00 [24102] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:58:32.448_938+00:00 [24138] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:58:34.462_941+00:00 [24109] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:58:34.462_951+00:00 [24109] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:58:34.462_966+00:00 [24109] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:58:34.462_977+00:00 [24109] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:58:34.462_983+00:00 [24109] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:58:34.462_987+00:00 [24109] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:58:34.463_004+00:00 [24109] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:58:34.463_052+00:00 [24137] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:58:34.463_060+00:00 [24137] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:58:34.463_069+00:00 [24137] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:58:34.499_911+00:00 [24102] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:58:34.500_238+00:00 [24109] [INFO] 0x5591a390a8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:58:34.500_534+00:00 [24109] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:58:34.500_541+00:00 [24109] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:58:34.500_587+00:00 [24137] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:58:34.500_597+00:00 [24137] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:58:34.500_642+00:00 [24137] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:58:34.500_644+00:00 [24137] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:58:34.500_684+00:00 [24137] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:58:34.500_687+00:00 [24137] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:58:34.500_693+00:00 [24137] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:58:34.750_150+00:00 [24102] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:58:34.750_322+00:00 [24109] [INFO] 0x5591a390ac60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:58:34.750_673+00:00 [24109] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:58:34.750_678+00:00 [24109] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:58:34.750_823+00:00 [24109] [INFO] 0x7f86d40018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:58:34.750_998+00:00 [24109] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:58:34.751_200+00:00 [24137] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:58:34.751_212+00:00 [24137] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:58:34.751_254+00:00 [24137] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:58:34.751_256+00:00 [24137] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:58:34.751_289+00:00 [24137] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:58:34.751_292+00:00 [24137] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:58:34.751_297+00:00 [24137] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:58:35.005_241+00:00 [24107] [INFO] 0x5591a390a8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:58:35.005_411+00:00 [24107] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:58:37.648_660+00:00 [24119] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 104, Connection reset by peer	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.648_953+00:00 [24119] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.651_340+00:00 [24128] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.655_491+00:00 [24123] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.663_637+00:00 [24134] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.679_986+00:00 [24123] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.712_073+00:00 [24108] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.776_289+00:00 [24126] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:37.904_382+00:00 [24111] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:38.160_613+00:00 [24125] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:38.660_745+00:00 [24111] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:39.160_882+00:00 [24135] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:39.660_905+00:00 [24130] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:40.160_940+00:00 [24109] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:40.661_050+00:00 [24126] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:41.161_319+00:00 [24112] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:41.365_790+00:00 [24137] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:58:41.365_798+00:00 [24137] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:58:41.365_836+00:00 [24137] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:58:41.365_893+00:00 [24137] [INFO] create snapshot idx 100000 log_term 1 done: 91 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:58:41.661_759+00:00 [24124] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:42.161_702+00:00 [24127] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:42.661_874+00:00 [24127] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:58:43.161_595+00:00 [24114] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:58:48.759_376+00:00 [24137] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:58:48.759_384+00:00 [24137] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:58:48.759_563+00:00 [24137] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:58:48.759_568+00:00 [24137] [INFO] create snapshot idx 200000 log_term 1 done: 180 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:59:30.111_636+00:00 [24315] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:59:30.112_955+00:00 [24315] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:59:30.112_986+00:00 [24315] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:59:30.112_993+00:00 [24315] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:59:30.113_015+00:00 [24315] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:59:30.113_019+00:00 [24315] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:59:30.113_021+00:00 [24315] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:59:30.113_053+00:00 [24315] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:59:30.113_193+00:00 [24351] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:59:32.137_227+00:00 [24322] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:59:32.137_236+00:00 [24322] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:59:32.137_251+00:00 [24322] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:59:32.137_262+00:00 [24322] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:59:32.137_268+00:00 [24322] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:59:32.137_272+00:00 [24322] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:59:32.137_289+00:00 [24322] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:59:32.137_335+00:00 [24350] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:59:32.137_343+00:00 [24350] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:59:32.137_352+00:00 [24350] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:59:32.164_757+00:00 [24315] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:59:32.165_108+00:00 [24322] [INFO] 0x560b305808b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:59:32.165_472+00:00 [24322] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:59:32.165_480+00:00 [24322] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:59:32.165_528+00:00 [24350] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:59:32.165_539+00:00 [24350] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:59:32.165_583+00:00 [24350] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:59:32.165_585+00:00 [24350] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:59:32.165_626+00:00 [24350] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:59:32.165_630+00:00 [24350] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:59:32.165_635+00:00 [24350] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:59:32.414_992+00:00 [24315] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-28T19:59:32.415_208+00:00 [24322] [INFO] 0x560b30580c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:59:32.415_662+00:00 [24322] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-28T19:59:32.415_667+00:00 [24322] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-28T19:59:32.415_817+00:00 [24322] [INFO] 0x7fde100018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:59:32.415_993+00:00 [24322] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:59:32.416_189+00:00 [24350] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:59:32.416_202+00:00 [24350] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:59:32.416_249+00:00 [24350] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:59:32.416_251+00:00 [24350] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-28T19:59:32.416_287+00:00 [24350] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:59:32.416_291+00:00 [24350] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-28T19:59:32.416_297+00:00 [24350] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:59:32.669_653+00:00 [24320] [INFO] 0x560b305808b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-28T19:59:32.669_820+00:00 [24320] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-28T19:59:35.295_851+00:00 [24332] [WARN] peer (3) response error: failed to read response to peer 3, localhost:12346, error 2, End of file	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.296_167+00:00 [24332] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.298_742+00:00 [24326] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.303_023+00:00 [24339] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.311_315+00:00 [24326] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.327_486+00:00 [24342] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.359_522+00:00 [24327] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.423_641+00:00 [24318] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.552_210+00:00 [24339] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:35.807_902+00:00 [24327] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:36.308_025+00:00 [24318] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:36.808_002+00:00 [24332] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:37.308_102+00:00 [24328] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:37.808_337+00:00 [24321] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:38.308_289+00:00 [24338] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:38.808_303+00:00 [24332] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:39.027_968+00:00 [24350] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:59:39.027_976+00:00 [24350] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:59:39.028_057+00:00 [24350] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:59:39.028_061+00:00 [24350] [INFO] create snapshot idx 100000 log_term 1 done: 81 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:59:39.308_460+00:00 [24338] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:39.808_459+00:00 [24335] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:40.308_666+00:00 [24318] [WARN] peer (3) response error: failed to connect to peer 3, localhost:12346, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-28T19:59:40.809_158+00:00 [24339] [WARN] too verbose RPC error on peer (3), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-28T19:59:46.433_444+00:00 [24350] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:59:46.433_452+00:00 [24350] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:59:46.433_553+00:00 [24350] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:59:46.433_557+00:00 [24350] [INFO] create snapshot idx 200000 log_term 1 done: 101 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
