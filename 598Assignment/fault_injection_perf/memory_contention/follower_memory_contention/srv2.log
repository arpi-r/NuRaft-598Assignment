2022-04-28T18:17:29.345_034+00:00 [16136] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:17:29.346_374+00:00 [16136] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:17:29.346_414+00:00 [16136] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:17:29.346_418+00:00 [16136] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:17:29.346_442+00:00 [16136] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:17:29.346_446+00:00 [16136] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:17:29.346_449+00:00 [16136] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:17:29.346_476+00:00 [16136] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:17:29.346_617+00:00 [16172] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:17:30.665_665+00:00 [16143] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:17:30.665_677+00:00 [16143] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:17:30.665_692+00:00 [16143] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:17:30.665_703+00:00 [16143] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:17:30.665_709+00:00 [16143] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:17:30.665_712+00:00 [16143] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:17:30.665_730+00:00 [16143] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:17:30.665_780+00:00 [16171] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:17:30.665_788+00:00 [16171] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:17:30.665_798+00:00 [16171] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:17:51.199_224+00:00 [16143] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:17:51.199_242+00:00 [16143] [INFO] session 1 got connection from 127.0.0.1:50608 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:17:51.199_342+00:00 [16143] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:17:51.199_363+00:00 [16143] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:17:51.199_420+00:00 [16143] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:17:51.199_423+00:00 [16143] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:17:51.199_426+00:00 [16143] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:17:51.199_431+00:00 [16143] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:17:51.199_667+00:00 [16143] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50608 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:17:51.449_841+00:00 [16143] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:17:51.449_853+00:00 [16143] [INFO] session 2 got connection from 127.0.0.1:50610 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:17:51.449_933+00:00 [16143] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:17:51.449_937+00:00 [16143] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:17:51.450_060+00:00 [16143] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:17:51.450_065+00:00 [16143] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:17:51.450_129+00:00 [16171] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:17:51.450_133+00:00 [16171] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:17:51.450_141+00:00 [16171] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:17:51.450_152+00:00 [16171] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:17:51.450_156+00:00 [16171] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:17:51.450_176+00:00 [16171] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:17:51.450_269+00:00 [16171] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:17:51.450_282+00:00 [16171] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:17:51.450_340+00:00 [16171] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:17:51.450_345+00:00 [16171] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:17:51.450_354+00:00 [16171] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:06.217_829+00:00 [16171] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:18:06.217_898+00:00 [16171] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:18:06.217_924+00:00 [16171] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:18:06.217_929+00:00 [16171] [INFO] create snapshot idx 100000 log_term 1 done: 24 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:18:26.766_455+00:00 [16327] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:18:26.767_830+00:00 [16327] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:18:26.767_866+00:00 [16327] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:18:26.767_870+00:00 [16327] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:18:26.767_894+00:00 [16327] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:18:26.767_897+00:00 [16327] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:18:26.767_900+00:00 [16327] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:18:26.767_936+00:00 [16327] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:18:26.768_079+00:00 [16363] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:18:28.049_269+00:00 [16334] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:18:28.049_292+00:00 [16334] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:18:28.049_329+00:00 [16334] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:18:28.049_355+00:00 [16334] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:18:28.049_371+00:00 [16334] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:18:28.049_381+00:00 [16334] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:18:28.049_430+00:00 [16334] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:18:28.049_573+00:00 [16362] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:18:28.049_598+00:00 [16362] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:18:28.049_617+00:00 [16362] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:48.879_300+00:00 [16334] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:18:48.879_324+00:00 [16334] [INFO] session 1 got connection from 127.0.0.1:50612 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:18:48.879_434+00:00 [16334] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:18:48.879_456+00:00 [16334] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:18:48.879_516+00:00 [16334] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:18:48.879_519+00:00 [16334] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:18:48.879_521+00:00 [16334] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:18:48.879_527+00:00 [16334] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:48.879_736+00:00 [16334] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50612 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:18:49.130_095+00:00 [16334] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:18:49.130_106+00:00 [16334] [INFO] session 2 got connection from 127.0.0.1:50614 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:18:49.130_189+00:00 [16334] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:18:49.130_193+00:00 [16334] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:18:49.130_320+00:00 [16334] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:18:49.130_325+00:00 [16334] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:18:49.130_390+00:00 [16362] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:18:49.130_393+00:00 [16362] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:18:49.130_401+00:00 [16362] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:18:49.130_412+00:00 [16362] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:18:49.130_416+00:00 [16362] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:18:49.130_435+00:00 [16362] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:49.130_530+00:00 [16362] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:18:49.130_541+00:00 [16362] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:18:49.130_592+00:00 [16362] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:18:49.130_596+00:00 [16362] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:18:49.130_604+00:00 [16362] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:18:57.809_389+00:00 [16362] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:18:57.809_396+00:00 [16362] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:18:57.809_413+00:00 [16362] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:18:57.809_416+00:00 [16362] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:19:05.940_884+00:00 [16362] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:19:05.940_891+00:00 [16362] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:19:05.940_924+00:00 [16362] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:19:05.940_928+00:00 [16362] [INFO] create snapshot idx 200000 log_term 1 done: 32 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:19:24.461_000+00:00 [16462] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:19:24.462_379+00:00 [16462] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:19:24.462_412+00:00 [16462] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:19:24.462_420+00:00 [16462] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:19:24.462_443+00:00 [16462] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:19:24.462_446+00:00 [16462] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:19:24.462_449+00:00 [16462] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:19:24.462_476+00:00 [16462] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:19:24.462_624+00:00 [16498] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:19:26.444_687+00:00 [16469] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:19:26.444_700+00:00 [16469] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:19:26.444_716+00:00 [16469] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:19:26.444_727+00:00 [16469] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:19:26.444_733+00:00 [16469] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:19:26.444_737+00:00 [16469] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:19:26.444_755+00:00 [16469] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:19:26.444_807+00:00 [16497] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:19:26.444_815+00:00 [16497] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:19:26.444_826+00:00 [16497] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:19:46.056_424+00:00 [16469] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:19:46.056_438+00:00 [16469] [INFO] session 1 got connection from 127.0.0.1:50616 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:19:46.056_530+00:00 [16469] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:19:46.056_552+00:00 [16469] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:19:46.056_608+00:00 [16469] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:19:46.056_611+00:00 [16469] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:19:46.056_613+00:00 [16469] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:19:46.056_619+00:00 [16469] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:19:46.056_851+00:00 [16469] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50616 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:19:46.307_009+00:00 [16469] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:19:46.307_021+00:00 [16469] [INFO] session 2 got connection from 127.0.0.1:50618 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:19:46.307_111+00:00 [16469] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:19:46.307_115+00:00 [16469] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:19:46.307_239+00:00 [16469] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:19:46.307_243+00:00 [16469] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:19:46.307_306+00:00 [16497] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:19:46.307_309+00:00 [16497] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:19:46.307_318+00:00 [16497] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:19:46.307_329+00:00 [16497] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:19:46.307_333+00:00 [16497] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:19:46.307_353+00:00 [16497] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:19:46.307_450+00:00 [16497] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:19:46.307_462+00:00 [16497] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:19:46.307_522+00:00 [16497] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:19:46.307_527+00:00 [16497] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:19:46.307_536+00:00 [16497] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:19:52.879_031+00:00 [16497] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:19:52.879_040+00:00 [16497] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:19:52.879_060+00:00 [16497] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:19:52.879_063+00:00 [16497] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:19:58.976_024+00:00 [16497] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:19:58.976_032+00:00 [16497] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:19:58.976_053+00:00 [16497] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:19:58.976_057+00:00 [16497] [INFO] create snapshot idx 200000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:05.179_577+00:00 [16497] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:05.179_584+00:00 [16497] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:05.179_601+00:00 [16497] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:05.179_604+00:00 [16497] [INFO] create snapshot idx 300000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:21.644_746+00:00 [16640] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:20:21.646_103+00:00 [16640] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:20:21.646_133+00:00 [16640] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:20:21.646_143+00:00 [16640] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:20:21.646_171+00:00 [16640] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:20:21.646_175+00:00 [16640] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:20:21.646_177+00:00 [16640] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:20:21.646_207+00:00 [16640] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:20:21.646_357+00:00 [16676] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:20:23.497_372+00:00 [16647] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:20:23.497_382+00:00 [16647] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:20:23.497_397+00:00 [16647] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:20:23.497_407+00:00 [16647] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:20:23.497_414+00:00 [16647] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:20:23.497_417+00:00 [16647] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:20:23.497_436+00:00 [16647] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:20:23.497_484+00:00 [16675] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:20:23.497_491+00:00 [16675] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:20:23.497_501+00:00 [16675] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:20:43.237_322+00:00 [16647] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:20:43.237_342+00:00 [16647] [INFO] session 1 got connection from 127.0.0.1:50620 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:20:43.237_440+00:00 [16647] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:20:43.237_463+00:00 [16647] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:20:43.237_523+00:00 [16647] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:20:43.237_527+00:00 [16647] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:20:43.237_529+00:00 [16647] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:20:43.237_534+00:00 [16647] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:20:43.237_776+00:00 [16647] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50620 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:20:43.488_066+00:00 [16647] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:20:43.488_076+00:00 [16647] [INFO] session 2 got connection from 127.0.0.1:50622 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:20:43.488_162+00:00 [16647] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:20:43.488_165+00:00 [16647] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:20:43.488_292+00:00 [16647] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:20:43.488_296+00:00 [16647] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:20:43.488_363+00:00 [16675] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:20:43.488_366+00:00 [16675] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:20:43.488_375+00:00 [16675] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:20:43.488_387+00:00 [16675] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:20:43.488_391+00:00 [16675] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:20:43.488_410+00:00 [16675] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:20:43.488_509+00:00 [16675] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:20:43.488_521+00:00 [16675] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:20:43.488_579+00:00 [16675] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:20:43.488_584+00:00 [16675] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:20:43.488_593+00:00 [16675] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:20:49.225_640+00:00 [16675] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:49.225_649+00:00 [16675] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:49.225_666+00:00 [16675] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:49.225_669+00:00 [16675] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:54.515_922+00:00 [16675] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:54.515_930+00:00 [16675] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:54.515_954+00:00 [16675] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:54.515_958+00:00 [16675] [INFO] create snapshot idx 200000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:20:59.895_570+00:00 [16675] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:20:59.895_583+00:00 [16675] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:20:59.895_611+00:00 [16675] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:20:59.895_617+00:00 [16675] [INFO] create snapshot idx 300000 log_term 1 done: 28 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:21:18.831_948+00:00 [16852] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:21:18.833_304+00:00 [16852] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:21:18.833_334+00:00 [16852] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:21:18.833_339+00:00 [16852] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:21:18.833_363+00:00 [16852] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:21:18.833_367+00:00 [16852] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:21:18.833_370+00:00 [16852] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:21:18.833_398+00:00 [16852] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:21:18.833_547+00:00 [16888] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:21:19.916_601+00:00 [16859] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:21:19.916_611+00:00 [16859] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:21:19.916_625+00:00 [16859] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:21:19.916_643+00:00 [16859] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:21:19.916_649+00:00 [16859] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:21:19.916_653+00:00 [16859] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:21:19.916_670+00:00 [16859] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:21:19.916_722+00:00 [16887] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:21:19.916_730+00:00 [16887] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:21:19.916_740+00:00 [16887] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:21:40.677_687+00:00 [16859] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:21:40.677_709+00:00 [16859] [INFO] session 1 got connection from 127.0.0.1:50624 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:21:40.677_811+00:00 [16859] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:21:40.677_834+00:00 [16859] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:21:40.677_894+00:00 [16859] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:21:40.677_898+00:00 [16859] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:21:40.677_900+00:00 [16859] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:21:40.677_905+00:00 [16859] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:21:40.678_150+00:00 [16859] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50624 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:21:40.928_280+00:00 [16859] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:21:40.928_291+00:00 [16859] [INFO] session 2 got connection from 127.0.0.1:50626 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:21:40.928_373+00:00 [16859] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:21:40.928_376+00:00 [16859] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:21:40.928_502+00:00 [16859] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:21:40.928_507+00:00 [16859] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:21:40.928_571+00:00 [16887] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:21:40.928_574+00:00 [16887] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:21:40.928_582+00:00 [16887] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:21:40.928_594+00:00 [16887] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:21:40.928_598+00:00 [16887] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:21:40.928_618+00:00 [16887] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:21:40.928_715+00:00 [16887] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:21:40.928_726+00:00 [16887] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:21:40.928_775+00:00 [16887] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:21:40.928_779+00:00 [16887] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:21:40.928_785+00:00 [16887] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:21:46.295_773+00:00 [16887] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:21:46.295_783+00:00 [16887] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:21:46.295_806+00:00 [16887] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:21:46.295_812+00:00 [16887] [INFO] create snapshot idx 100000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:21:51.186_745+00:00 [16887] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:21:51.186_753+00:00 [16887] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:21:51.186_775+00:00 [16887] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:21:51.186_779+00:00 [16887] [INFO] create snapshot idx 200000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:21:56.116_497+00:00 [16887] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:21:56.116_510+00:00 [16887] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:21:56.116_538+00:00 [16887] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:21:56.116_543+00:00 [16887] [INFO] create snapshot idx 300000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:22:16.282_509+00:00 [17009] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:22:16.283_900+00:00 [17009] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:22:16.283_937+00:00 [17009] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:22:16.283_943+00:00 [17009] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:22:16.283_969+00:00 [17009] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:22:16.283_973+00:00 [17009] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:22:16.283_976+00:00 [17009] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:22:16.284_014+00:00 [17009] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:22:16.284_164+00:00 [17045] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:22:17.636_230+00:00 [17016] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:22:17.636_241+00:00 [17016] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:22:17.636_255+00:00 [17016] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:22:17.636_266+00:00 [17016] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:22:17.636_273+00:00 [17016] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:22:17.636_277+00:00 [17016] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:22:17.636_295+00:00 [17016] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:22:17.636_348+00:00 [17044] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:22:17.636_356+00:00 [17044] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:22:17.636_365+00:00 [17044] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:22:37.875_881+00:00 [17016] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:22:37.875_900+00:00 [17016] [INFO] session 1 got connection from 127.0.0.1:50628 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:22:37.876_002+00:00 [17016] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:22:37.876_025+00:00 [17016] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:22:37.876_087+00:00 [17016] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:22:37.876_091+00:00 [17016] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:22:37.876_093+00:00 [17016] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:22:37.876_098+00:00 [17016] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:22:37.876_330+00:00 [17016] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50628 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:22:38.126_591+00:00 [17016] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:22:38.126_601+00:00 [17016] [INFO] session 2 got connection from 127.0.0.1:50630 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:22:38.126_708+00:00 [17016] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:22:38.126_712+00:00 [17016] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:22:38.126_838+00:00 [17016] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:22:38.126_843+00:00 [17016] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:22:38.126_908+00:00 [17044] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:22:38.126_911+00:00 [17044] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:22:38.126_920+00:00 [17044] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:22:38.126_931+00:00 [17044] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:22:38.126_935+00:00 [17044] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:22:38.126_954+00:00 [17044] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:22:38.127_049+00:00 [17044] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:22:38.127_062+00:00 [17044] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:22:38.127_128+00:00 [17044] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:22:38.127_133+00:00 [17044] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:22:38.127_141+00:00 [17044] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:22:43.396_754+00:00 [17044] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:22:43.396_766+00:00 [17044] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:22:43.396_794+00:00 [17044] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:22:43.396_799+00:00 [17044] [INFO] create snapshot idx 100000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:22:48.350_941+00:00 [17044] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:22:48.350_949+00:00 [17044] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:22:48.350_972+00:00 [17044] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:22:48.350_976+00:00 [17044] [INFO] create snapshot idx 200000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:22:53.390_652+00:00 [17044] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:22:53.390_669+00:00 [17044] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:22:53.390_693+00:00 [17044] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:22:53.390_697+00:00 [17044] [INFO] create snapshot idx 300000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:23:13.471_888+00:00 [17156] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:23:13.473_245+00:00 [17156] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:23:13.473_280+00:00 [17156] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:23:13.473_285+00:00 [17156] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:23:13.473_310+00:00 [17156] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:23:13.473_314+00:00 [17156] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:23:13.473_316+00:00 [17156] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:23:13.473_345+00:00 [17156] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:23:13.473_490+00:00 [17192] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:23:14.644_538+00:00 [17163] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:23:14.644_549+00:00 [17163] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:23:14.644_564+00:00 [17163] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:23:14.644_575+00:00 [17163] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:23:14.644_581+00:00 [17163] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:23:14.644_584+00:00 [17163] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:23:14.644_604+00:00 [17163] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:23:14.644_653+00:00 [17191] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:23:14.644_661+00:00 [17191] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:23:14.644_670+00:00 [17191] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:23:34.824_946+00:00 [17163] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:23:34.824_967+00:00 [17163] [INFO] session 1 got connection from 127.0.0.1:50632 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:23:34.825_069+00:00 [17163] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:23:34.825_091+00:00 [17163] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:23:34.825_151+00:00 [17163] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:23:34.825_154+00:00 [17163] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:23:34.825_156+00:00 [17163] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:23:34.825_161+00:00 [17163] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:23:34.825_400+00:00 [17163] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50632 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:23:35.075_765+00:00 [17163] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:23:35.075_775+00:00 [17163] [INFO] session 2 got connection from 127.0.0.1:50636 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:23:35.075_853+00:00 [17163] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:23:35.075_857+00:00 [17163] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:23:35.075_980+00:00 [17163] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:23:35.075_983+00:00 [17163] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:23:35.076_037+00:00 [17191] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:23:35.076_041+00:00 [17191] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:23:35.076_047+00:00 [17191] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:23:35.076_056+00:00 [17191] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:23:35.076_060+00:00 [17191] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:23:35.076_077+00:00 [17191] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:23:35.076_156+00:00 [17191] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:23:35.076_166+00:00 [17191] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:23:35.076_216+00:00 [17191] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:23:35.076_219+00:00 [17191] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:23:35.076_226+00:00 [17191] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:23:40.538_736+00:00 [17191] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:23:40.538_742+00:00 [17191] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:23:40.538_759+00:00 [17191] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:23:40.538_763+00:00 [17191] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:23:45.842_700+00:00 [17191] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:23:45.842_712+00:00 [17191] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:23:45.842_743+00:00 [17191] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:23:45.842_749+00:00 [17191] [INFO] create snapshot idx 200000 log_term 1 done: 31 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:23:51.226_194+00:00 [17191] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:23:51.226_202+00:00 [17191] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:23:51.226_222+00:00 [17191] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:23:51.226_225+00:00 [17191] [INFO] create snapshot idx 300000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:24:10.415_497+00:00 [17299] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:24:10.416_829+00:00 [17299] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:24:10.416_863+00:00 [17299] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:24:10.416_869+00:00 [17299] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:24:10.416_897+00:00 [17299] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:24:10.416_901+00:00 [17299] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:24:10.416_904+00:00 [17299] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:24:10.416_933+00:00 [17299] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:24:10.417_078+00:00 [17335] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:24:11.625_111+00:00 [17306] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:24:11.625_121+00:00 [17306] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:24:11.625_137+00:00 [17306] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:24:11.625_147+00:00 [17306] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:24:11.625_154+00:00 [17306] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:24:11.625_158+00:00 [17306] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:24:11.625_176+00:00 [17306] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:24:11.625_226+00:00 [17334] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:24:11.625_234+00:00 [17334] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:24:11.625_244+00:00 [17334] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:24:32.008_551+00:00 [17306] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:24:32.008_571+00:00 [17306] [INFO] session 1 got connection from 127.0.0.1:50638 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:24:32.008_670+00:00 [17306] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:24:32.008_693+00:00 [17306] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:24:32.008_751+00:00 [17306] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:24:32.008_754+00:00 [17306] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:24:32.008_756+00:00 [17306] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:24:32.008_761+00:00 [17306] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:24:32.008_989+00:00 [17306] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50638 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:24:32.259_151+00:00 [17306] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:24:32.259_161+00:00 [17306] [INFO] session 2 got connection from 127.0.0.1:50640 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:24:32.259_244+00:00 [17306] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:24:32.259_247+00:00 [17306] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:24:32.259_363+00:00 [17306] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:24:32.259_367+00:00 [17306] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:24:32.259_430+00:00 [17334] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:24:32.259_434+00:00 [17334] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:24:32.259_443+00:00 [17334] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:24:32.259_454+00:00 [17334] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:24:32.259_458+00:00 [17334] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:24:32.259_478+00:00 [17334] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:24:32.259_575+00:00 [17334] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:24:32.259_592+00:00 [17334] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:24:32.259_649+00:00 [17334] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:24:32.259_653+00:00 [17334] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:24:32.259_670+00:00 [17334] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:24:37.892_852+00:00 [17334] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:24:37.892_863+00:00 [17334] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:24:37.892_888+00:00 [17334] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:24:37.892_893+00:00 [17334] [INFO] create snapshot idx 100000 log_term 1 done: 24 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:24:43.422_772+00:00 [17334] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:24:43.422_780+00:00 [17334] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:24:43.422_805+00:00 [17334] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:24:43.422_810+00:00 [17334] [INFO] create snapshot idx 200000 log_term 1 done: 24 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:24:48.833_526+00:00 [17334] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:24:48.833_533+00:00 [17334] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:24:48.833_614+00:00 [17334] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:24:48.833_619+00:00 [17334] [INFO] create snapshot idx 300000 log_term 1 done: 81 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:25:07.589_607+00:00 [17448] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:25:07.591_007+00:00 [17448] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:25:07.591_040+00:00 [17448] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:25:07.591_044+00:00 [17448] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:25:07.591_067+00:00 [17448] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:25:07.591_071+00:00 [17448] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:25:07.591_074+00:00 [17448] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:25:07.591_103+00:00 [17448] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:25:07.591_248+00:00 [17484] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:25:09.211_287+00:00 [17455] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:25:09.211_298+00:00 [17455] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:25:09.211_314+00:00 [17455] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:25:09.211_331+00:00 [17455] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:25:09.211_338+00:00 [17455] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:25:09.211_341+00:00 [17455] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:25:09.211_361+00:00 [17455] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:25:09.211_410+00:00 [17483] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:25:09.211_417+00:00 [17483] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:25:09.211_427+00:00 [17483] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:25:29.429_018+00:00 [17455] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:25:29.429_039+00:00 [17455] [INFO] session 1 got connection from 127.0.0.1:50642 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:25:29.429_140+00:00 [17455] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:25:29.429_162+00:00 [17455] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:25:29.429_223+00:00 [17455] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:25:29.429_226+00:00 [17455] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:25:29.429_228+00:00 [17455] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:25:29.429_234+00:00 [17455] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:25:29.429_477+00:00 [17455] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50642 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:25:29.679_612+00:00 [17455] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:25:29.679_622+00:00 [17455] [INFO] session 2 got connection from 127.0.0.1:50644 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:25:29.679_700+00:00 [17455] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:25:29.679_704+00:00 [17455] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:25:29.679_916+00:00 [17455] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:25:29.679_921+00:00 [17455] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:25:29.679_999+00:00 [17483] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:25:29.680_002+00:00 [17483] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:25:29.680_011+00:00 [17483] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:25:29.680_022+00:00 [17483] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:25:29.680_026+00:00 [17483] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:25:29.680_046+00:00 [17483] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:25:29.680_168+00:00 [17483] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:25:29.680_181+00:00 [17483] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:25:29.680_234+00:00 [17483] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:25:29.680_238+00:00 [17483] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:25:29.680_245+00:00 [17483] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:25:35.388_789+00:00 [17483] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:25:35.388_796+00:00 [17483] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:25:35.388_813+00:00 [17483] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:25:35.388_818+00:00 [17483] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:25:40.978_579+00:00 [17483] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:25:40.978_588+00:00 [17483] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:25:40.978_682+00:00 [17483] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:25:40.978_688+00:00 [17483] [INFO] create snapshot idx 200000 log_term 1 done: 36 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:25:46.562_540+00:00 [17483] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:25:46.562_546+00:00 [17483] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:25:46.562_562+00:00 [17483] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:25:46.562_565+00:00 [17483] [INFO] create snapshot idx 300000 log_term 1 done: 15 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:26:05.017_424+00:00 [17596] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T18:26:05.018_812+00:00 [17596] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T18:26:05.018_844+00:00 [17596] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T18:26:05.018_848+00:00 [17596] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T18:26:05.018_866+00:00 [17596] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T18:26:05.018_871+00:00 [17596] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T18:26:05.018_873+00:00 [17596] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T18:26:05.018_901+00:00 [17596] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T18:26:05.019_046+00:00 [17632] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T18:26:07.033_221+00:00 [17603] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T18:26:07.033_245+00:00 [17603] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T18:26:07.033_282+00:00 [17603] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T18:26:07.033_308+00:00 [17603] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T18:26:07.033_323+00:00 [17603] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T18:26:07.033_333+00:00 [17603] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T18:26:07.033_382+00:00 [17603] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T18:26:07.033_513+00:00 [17631] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:26:07.033_539+00:00 [17631] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:26:07.033_566+00:00 [17631] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:26:26.861_862+00:00 [17603] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:26:26.861_883+00:00 [17603] [INFO] session 1 got connection from 127.0.0.1:50646 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:26:26.861_982+00:00 [17603] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T18:26:26.862_004+00:00 [17603] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:26:26.862_063+00:00 [17603] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:26:26.862_066+00:00 [17603] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T18:26:26.862_069+00:00 [17603] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:26:26.862_074+00:00 [17603] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:26:26.862_302+00:00 [17603] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50646 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T18:26:27.112_855+00:00 [17603] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T18:26:27.112_865+00:00 [17603] [INFO] session 2 got connection from 127.0.0.1:50648 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T18:26:27.112_948+00:00 [17603] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T18:26:27.112_952+00:00 [17603] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T18:26:27.113_078+00:00 [17603] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:26:27.113_082+00:00 [17603] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T18:26:27.113_145+00:00 [17631] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:26:27.113_149+00:00 [17631] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T18:26:27.113_156+00:00 [17631] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:26:27.113_166+00:00 [17631] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:26:27.113_169+00:00 [17631] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T18:26:27.113_187+00:00 [17631] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:26:27.113_270+00:00 [17631] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T18:26:27.113_281+00:00 [17631] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T18:26:27.113_333+00:00 [17631] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T18:26:27.113_337+00:00 [17631] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T18:26:27.113_345+00:00 [17631] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T18:26:32.732_515+00:00 [17631] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:26:32.732_521+00:00 [17631] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:26:32.732_538+00:00 [17631] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:26:32.732_542+00:00 [17631] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:26:38.219_622+00:00 [17631] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:26:38.219_630+00:00 [17631] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:26:38.219_730+00:00 [17631] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:26:38.219_735+00:00 [17631] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T18:26:43.696_631+00:00 [17631] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T18:26:43.696_639+00:00 [17631] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T18:26:43.696_731+00:00 [17631] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T18:26:43.696_736+00:00 [17631] [INFO] create snapshot idx 300000 log_term 1 done: 91 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:05:45.486_495+00:00 [18391] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:05:45.487_875+00:00 [18391] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:05:45.487_906+00:00 [18391] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:05:45.487_920+00:00 [18391] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:05:45.487_943+00:00 [18391] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:05:45.487_947+00:00 [18391] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:05:45.487_950+00:00 [18391] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:05:45.487_979+00:00 [18391] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:05:45.488_118+00:00 [18427] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:05:47.418_152+00:00 [18398] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:05:47.418_164+00:00 [18398] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:05:47.418_178+00:00 [18398] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:05:47.418_188+00:00 [18398] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:05:47.418_195+00:00 [18398] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:05:47.418_199+00:00 [18398] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:05:47.418_217+00:00 [18398] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:05:47.418_270+00:00 [18426] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:05:47.418_278+00:00 [18426] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:05:47.418_288+00:00 [18426] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:06:07.583_686+00:00 [18398] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:06:07.583_707+00:00 [18398] [INFO] session 1 got connection from 127.0.0.1:50650 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:06:07.583_805+00:00 [18398] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:06:07.583_827+00:00 [18398] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:06:07.583_888+00:00 [18398] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:06:07.583_891+00:00 [18398] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:06:07.583_893+00:00 [18398] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:06:07.583_899+00:00 [18398] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:06:07.584_142+00:00 [18398] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50650 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:06:07.834_631+00:00 [18398] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:06:07.834_642+00:00 [18398] [INFO] session 2 got connection from 127.0.0.1:50652 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:06:07.834_749+00:00 [18398] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:06:07.834_753+00:00 [18398] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:06:07.834_869+00:00 [18398] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:06:07.834_873+00:00 [18398] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:06:07.834_937+00:00 [18426] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:06:07.834_940+00:00 [18426] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:06:07.834_949+00:00 [18426] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:06:07.834_960+00:00 [18426] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:06:07.834_964+00:00 [18426] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:06:07.834_983+00:00 [18426] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:06:07.835_080+00:00 [18426] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:06:07.835_098+00:00 [18426] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:06:07.835_160+00:00 [18426] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:06:07.835_166+00:00 [18426] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:06:07.835_172+00:00 [18426] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:06:22.648_772+00:00 [18426] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:06:22.648_780+00:00 [18426] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:06:22.648_800+00:00 [18426] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:06:22.648_803+00:00 [18426] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:06:43.154_307+00:00 [18566] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:06:43.155_693+00:00 [18566] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:06:43.155_726+00:00 [18566] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:06:43.155_734+00:00 [18566] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:06:43.155_757+00:00 [18566] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:06:43.155_761+00:00 [18566] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:06:43.155_764+00:00 [18566] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:06:43.155_793+00:00 [18566] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:06:43.155_940+00:00 [18602] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:06:44.302_003+00:00 [18573] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:06:44.302_013+00:00 [18573] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:06:44.302_028+00:00 [18573] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:06:44.302_039+00:00 [18573] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:06:44.302_045+00:00 [18573] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:06:44.302_049+00:00 [18573] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:06:44.302_067+00:00 [18573] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:06:44.302_117+00:00 [18601] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:06:44.302_125+00:00 [18601] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:06:44.302_135+00:00 [18601] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:07:04.751_316+00:00 [18573] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:07:04.751_336+00:00 [18573] [INFO] session 1 got connection from 127.0.0.1:50654 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:07:04.751_437+00:00 [18573] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:07:04.751_460+00:00 [18573] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:07:04.751_521+00:00 [18573] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:07:04.751_524+00:00 [18573] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:07:04.751_526+00:00 [18573] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:07:04.751_532+00:00 [18573] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:07:04.751_764+00:00 [18573] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50654 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:07:05.001_738+00:00 [18573] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:07:05.001_749+00:00 [18573] [INFO] session 2 got connection from 127.0.0.1:50656 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:07:05.001_828+00:00 [18573] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:07:05.001_832+00:00 [18573] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:07:05.001_956+00:00 [18573] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:07:05.001_961+00:00 [18573] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:07:05.002_024+00:00 [18601] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:07:05.002_028+00:00 [18601] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:07:05.002_036+00:00 [18601] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:07:05.002_047+00:00 [18601] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:07:05.002_051+00:00 [18601] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:07:05.002_070+00:00 [18601] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:07:05.002_164+00:00 [18601] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:07:05.002_176+00:00 [18601] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:07:05.002_234+00:00 [18601] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:07:05.002_238+00:00 [18601] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:07:05.002_247+00:00 [18601] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:07:13.766_541+00:00 [18601] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:07:13.766_600+00:00 [18601] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:07:13.766_618+00:00 [18601] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:07:13.766_621+00:00 [18601] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:07:21.983_651+00:00 [18601] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:07:21.983_659+00:00 [18601] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:07:21.983_682+00:00 [18601] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:07:21.983_687+00:00 [18601] [INFO] create snapshot idx 200000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:07:40.334_796+00:00 [18701] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:07:40.336_145+00:00 [18701] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:07:40.336_174+00:00 [18701] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:07:40.336_183+00:00 [18701] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:07:40.336_207+00:00 [18701] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:07:40.336_211+00:00 [18701] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:07:40.336_213+00:00 [18701] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:07:40.336_242+00:00 [18701] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:07:40.336_390+00:00 [18737] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:07:42.100_425+00:00 [18708] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:07:42.100_435+00:00 [18708] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:07:42.100_450+00:00 [18708] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:07:42.100_461+00:00 [18708] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:07:42.100_468+00:00 [18708] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:07:42.100_472+00:00 [18708] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:07:42.100_491+00:00 [18708] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:07:42.100_542+00:00 [18736] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:07:42.100_550+00:00 [18736] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:07:42.100_559+00:00 [18736] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:01.679_270+00:00 [18708] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:08:01.679_292+00:00 [18708] [INFO] session 1 got connection from 127.0.0.1:50658 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:08:01.679_397+00:00 [18708] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:08:01.679_418+00:00 [18708] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:01.679_479+00:00 [18708] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:01.679_482+00:00 [18708] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:08:01.679_484+00:00 [18708] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:01.679_489+00:00 [18708] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:01.679_727+00:00 [18708] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50658 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:08:01.930_238+00:00 [18708] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:08:01.930_249+00:00 [18708] [INFO] session 2 got connection from 127.0.0.1:50660 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:08:01.930_332+00:00 [18708] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:08:01.930_335+00:00 [18708] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:08:01.930_460+00:00 [18708] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:08:01.930_464+00:00 [18708] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:08:01.930_530+00:00 [18736] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:01.930_533+00:00 [18736] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:08:01.930_541+00:00 [18736] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:01.930_552+00:00 [18736] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:01.930_556+00:00 [18736] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:08:01.930_575+00:00 [18736] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:01.930_659+00:00 [18736] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:01.930_687+00:00 [18736] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:01.930_748+00:00 [18736] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:01.930_752+00:00 [18736] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:01.930_759+00:00 [18736] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:08.480_894+00:00 [18736] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:08:08.480_902+00:00 [18736] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:08:08.480_920+00:00 [18736] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:08:08.480_923+00:00 [18736] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:08:14.522_423+00:00 [18736] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:08:14.522_429+00:00 [18736] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:08:14.522_449+00:00 [18736] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:08:14.522_453+00:00 [18736] [INFO] create snapshot idx 200000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:08:20.565_756+00:00 [18736] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:08:20.565_768+00:00 [18736] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:08:20.565_796+00:00 [18736] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:08:20.565_802+00:00 [18736] [INFO] create snapshot idx 300000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:08:37.269_328+00:00 [18838] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:08:37.270_677+00:00 [18838] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:08:37.270_713+00:00 [18838] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:08:37.270_718+00:00 [18838] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:08:37.270_744+00:00 [18838] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:08:37.270_748+00:00 [18838] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:08:37.270_751+00:00 [18838] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:08:37.270_783+00:00 [18838] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:08:37.270_925+00:00 [18874] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:08:38.426_984+00:00 [18845] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:08:38.426_994+00:00 [18845] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:08:38.427_008+00:00 [18845] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:08:38.427_018+00:00 [18845] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:08:38.427_025+00:00 [18845] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:08:38.427_028+00:00 [18845] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:08:38.427_048+00:00 [18845] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:08:38.427_096+00:00 [18873] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:38.427_104+00:00 [18873] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:38.427_114+00:00 [18873] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:58.863_053+00:00 [18845] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:08:58.863_073+00:00 [18845] [INFO] session 1 got connection from 127.0.0.1:50662 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:08:58.863_180+00:00 [18845] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:08:58.863_202+00:00 [18845] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:58.863_263+00:00 [18845] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:58.863_266+00:00 [18845] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:08:58.863_268+00:00 [18845] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:58.863_275+00:00 [18845] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:58.863_685+00:00 [18845] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50662 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:08:59.113_852+00:00 [18845] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:08:59.113_863+00:00 [18845] [INFO] session 2 got connection from 127.0.0.1:50664 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:08:59.113_948+00:00 [18845] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:08:59.113_951+00:00 [18845] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:08:59.114_078+00:00 [18845] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:08:59.114_082+00:00 [18845] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:08:59.114_146+00:00 [18873] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:59.114_149+00:00 [18873] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:08:59.114_158+00:00 [18873] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:59.114_169+00:00 [18873] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:59.114_174+00:00 [18873] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:08:59.114_194+00:00 [18873] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:08:59.114_289+00:00 [18873] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:08:59.114_302+00:00 [18873] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:08:59.114_360+00:00 [18873] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:08:59.114_364+00:00 [18873] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:08:59.114_373+00:00 [18873] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:09:04.699_882+00:00 [18873] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:09:04.699_896+00:00 [18873] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:09:04.699_913+00:00 [18873] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:09:04.699_916+00:00 [18873] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:09:10.039_072+00:00 [18873] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:09:10.039_080+00:00 [18873] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:09:10.039_104+00:00 [18873] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:09:10.039_108+00:00 [18873] [INFO] create snapshot idx 200000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:09:15.408_236+00:00 [18873] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:09:15.408_242+00:00 [18873] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:09:15.408_259+00:00 [18873] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:09:15.408_263+00:00 [18873] [INFO] create snapshot idx 300000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:09:34.456_350+00:00 [18978] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:09:34.457_717+00:00 [18978] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:09:34.457_747+00:00 [18978] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:09:34.457_752+00:00 [18978] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:09:34.457_774+00:00 [18978] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:09:34.457_778+00:00 [18978] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:09:34.457_781+00:00 [18978] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:09:34.457_811+00:00 [18978] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:09:34.457_957+00:00 [19014] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:09:36.309_074+00:00 [18985] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:09:36.309_085+00:00 [18985] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:09:36.309_101+00:00 [18985] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:09:36.309_120+00:00 [18985] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:09:36.309_127+00:00 [18985] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:09:36.309_132+00:00 [18985] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:09:36.309_150+00:00 [18985] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:09:36.309_203+00:00 [19013] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:09:36.309_210+00:00 [19013] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:09:36.309_220+00:00 [19013] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:09:56.313_971+00:00 [18985] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:09:56.313_992+00:00 [18985] [INFO] session 1 got connection from 127.0.0.1:50668 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:09:56.314_095+00:00 [18985] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:09:56.314_116+00:00 [18985] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:09:56.314_174+00:00 [18985] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:09:56.314_177+00:00 [18985] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:09:56.314_179+00:00 [18985] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:09:56.314_185+00:00 [18985] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:09:56.314_422+00:00 [18985] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50668 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:09:56.564_733+00:00 [18985] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:09:56.564_744+00:00 [18985] [INFO] session 2 got connection from 127.0.0.1:50670 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:09:56.564_827+00:00 [18985] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:09:56.564_831+00:00 [18985] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:09:56.564_958+00:00 [18985] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:09:56.564_962+00:00 [18985] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:09:56.565_025+00:00 [19013] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:09:56.565_028+00:00 [19013] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:09:56.565_036+00:00 [19013] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:09:56.565_047+00:00 [19013] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:09:56.565_052+00:00 [19013] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:09:56.565_071+00:00 [19013] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:09:56.565_164+00:00 [19013] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:09:56.565_176+00:00 [19013] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:09:56.565_234+00:00 [19013] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:09:56.565_238+00:00 [19013] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:09:56.565_247+00:00 [19013] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:01.912_402+00:00 [19013] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:01.912_413+00:00 [19013] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:01.912_441+00:00 [19013] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:01.912_444+00:00 [19013] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:10:06.911_687+00:00 [19013] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:06.911_695+00:00 [19013] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:06.911_721+00:00 [19013] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:06.911_725+00:00 [19013] [INFO] create snapshot idx 200000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:10:11.943_487+00:00 [19013] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:11.943_500+00:00 [19013] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:11.943_528+00:00 [19013] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:11.943_533+00:00 [19013] [INFO] create snapshot idx 300000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:10:31.912_727+00:00 [19119] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:10:31.914_078+00:00 [19119] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:10:31.914_111+00:00 [19119] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:10:31.914_115+00:00 [19119] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:10:31.914_140+00:00 [19119] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:10:31.914_144+00:00 [19119] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:10:31.914_147+00:00 [19119] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:10:31.914_176+00:00 [19119] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:10:31.914_328+00:00 [19155] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:10:33.180_513+00:00 [19126] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:10:33.180_539+00:00 [19126] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:10:33.180_576+00:00 [19126] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:10:33.180_616+00:00 [19126] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:10:33.180_632+00:00 [19126] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:10:33.180_642+00:00 [19126] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:10:33.180_690+00:00 [19126] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:10:33.180_833+00:00 [19154] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:10:33.180_859+00:00 [19154] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:10:33.180_886+00:00 [19154] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:53.997_229+00:00 [19126] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:10:53.997_250+00:00 [19126] [INFO] session 1 got connection from 127.0.0.1:50672 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:10:53.997_359+00:00 [19126] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:10:53.997_380+00:00 [19126] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:10:53.997_438+00:00 [19126] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:10:53.997_441+00:00 [19126] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:10:53.997_443+00:00 [19126] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:10:53.997_449+00:00 [19126] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:53.997_685+00:00 [19126] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50672 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:10:54.247_798+00:00 [19126] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:10:54.247_809+00:00 [19126] [INFO] session 2 got connection from 127.0.0.1:50674 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:10:54.247_891+00:00 [19126] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:10:54.247_894+00:00 [19126] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:10:54.248_018+00:00 [19126] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:10:54.248_023+00:00 [19126] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:10:54.248_085+00:00 [19154] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:10:54.248_089+00:00 [19154] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:10:54.248_097+00:00 [19154] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:10:54.248_109+00:00 [19154] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:10:54.248_113+00:00 [19154] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:10:54.248_130+00:00 [19154] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:54.248_222+00:00 [19154] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:10:54.248_234+00:00 [19154] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:10:54.248_293+00:00 [19154] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:10:54.248_298+00:00 [19154] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:10:54.248_307+00:00 [19154] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:10:59.440_693+00:00 [19154] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:10:59.440_705+00:00 [19154] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:10:59.440_732+00:00 [19154] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:10:59.440_820+00:00 [19154] [INFO] create snapshot idx 100000 log_term 1 done: 109 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:11:04.604_188+00:00 [19154] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:11:04.604_194+00:00 [19154] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:11:04.604_214+00:00 [19154] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:11:04.604_218+00:00 [19154] [INFO] create snapshot idx 200000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:11:09.783_439+00:00 [19154] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:11:09.783_445+00:00 [19154] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:11:09.783_462+00:00 [19154] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:11:09.783_466+00:00 [19154] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:11:29.591_403+00:00 [19262] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:11:29.592_786+00:00 [19262] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:11:29.592_823+00:00 [19262] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:11:29.592_827+00:00 [19262] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:11:29.592_851+00:00 [19262] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:11:29.592_855+00:00 [19262] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:11:29.592_858+00:00 [19262] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:11:29.592_888+00:00 [19262] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:11:29.593_035+00:00 [19298] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:11:30.654_070+00:00 [19269] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:11:30.654_080+00:00 [19269] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:11:30.654_096+00:00 [19269] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:11:30.654_107+00:00 [19269] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:11:30.654_113+00:00 [19269] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:11:30.654_117+00:00 [19269] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:11:30.654_135+00:00 [19269] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:11:30.654_185+00:00 [19297] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:11:30.654_193+00:00 [19297] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:11:30.654_202+00:00 [19297] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:11:50.939_916+00:00 [19269] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:11:50.939_940+00:00 [19269] [INFO] session 1 got connection from 127.0.0.1:50676 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:11:50.940_042+00:00 [19269] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:11:50.940_065+00:00 [19269] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:11:50.940_127+00:00 [19269] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:11:50.940_130+00:00 [19269] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:11:50.940_133+00:00 [19269] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:11:50.940_138+00:00 [19269] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:11:50.940_373+00:00 [19269] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50676 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:11:51.190_857+00:00 [19269] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:11:51.190_868+00:00 [19269] [INFO] session 2 got connection from 127.0.0.1:50680 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:11:51.190_949+00:00 [19269] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:11:51.190_953+00:00 [19269] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:11:51.191_068+00:00 [19269] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:11:51.191_072+00:00 [19269] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:11:51.191_135+00:00 [19297] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:11:51.191_139+00:00 [19297] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:11:51.191_148+00:00 [19297] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:11:51.191_159+00:00 [19297] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:11:51.191_163+00:00 [19297] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:11:51.191_182+00:00 [19297] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:11:51.191_278+00:00 [19297] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:11:51.191_295+00:00 [19297] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:11:51.191_362+00:00 [19297] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:11:51.191_367+00:00 [19297] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:11:51.191_376+00:00 [19297] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:11:56.592_716+00:00 [19297] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:11:56.592_725+00:00 [19297] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:11:56.592_747+00:00 [19297] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:11:56.592_750+00:00 [19297] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:01.891_042+00:00 [19297] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:01.891_050+00:00 [19297] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:01.891_077+00:00 [19297] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:01.891_082+00:00 [19297] [INFO] create snapshot idx 200000 log_term 1 done: 26 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:07.327_222+00:00 [19297] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:07.327_235+00:00 [19297] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:07.327_316+00:00 [19297] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:07.327_327+00:00 [19297] [INFO] create snapshot idx 300000 log_term 1 done: 85 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:26.527_022+00:00 [19757] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:12:26.528_371+00:00 [19757] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:12:26.528_403+00:00 [19757] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:12:26.528_406+00:00 [19757] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:12:26.528_430+00:00 [19757] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:12:26.528_434+00:00 [19757] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:12:26.528_437+00:00 [19757] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:12:26.528_469+00:00 [19757] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:12:26.528_613+00:00 [19793] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:12:28.331_647+00:00 [19764] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:12:28.331_657+00:00 [19764] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:12:28.331_671+00:00 [19764] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:12:28.331_681+00:00 [19764] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:12:28.331_688+00:00 [19764] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:12:28.331_692+00:00 [19764] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:12:28.331_709+00:00 [19764] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:12:28.331_757+00:00 [19792] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:12:28.331_765+00:00 [19792] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:12:28.331_774+00:00 [19792] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:12:48.110_852+00:00 [19764] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:12:48.110_877+00:00 [19764] [INFO] session 1 got connection from 127.0.0.1:50682 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:12:48.111_005+00:00 [19764] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:12:48.111_035+00:00 [19764] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:12:48.111_110+00:00 [19764] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:12:48.111_113+00:00 [19764] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:12:48.111_115+00:00 [19764] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:12:48.111_121+00:00 [19764] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:12:48.111_368+00:00 [19764] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50682 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:12:48.361_309+00:00 [19764] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:12:48.361_320+00:00 [19764] [INFO] session 2 got connection from 127.0.0.1:50684 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:12:48.361_407+00:00 [19764] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:12:48.361_411+00:00 [19764] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:12:48.361_535+00:00 [19764] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:12:48.361_539+00:00 [19764] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:12:48.361_603+00:00 [19792] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:12:48.361_606+00:00 [19792] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:12:48.361_614+00:00 [19792] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:12:48.361_625+00:00 [19792] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:12:48.361_629+00:00 [19792] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:12:48.361_649+00:00 [19792] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:12:48.361_741+00:00 [19792] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:12:48.361_754+00:00 [19792] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:12:48.361_810+00:00 [19792] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:12:48.361_814+00:00 [19792] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:12:48.361_822+00:00 [19792] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:12:53.798_704+00:00 [19792] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:53.798_710+00:00 [19792] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:53.798_727+00:00 [19792] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:53.798_730+00:00 [19792] [INFO] create snapshot idx 100000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:12:59.248_010+00:00 [19792] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:12:59.248_085+00:00 [19792] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:12:59.248_106+00:00 [19792] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:12:59.248_110+00:00 [19792] [INFO] create snapshot idx 200000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:13:04.762_122+00:00 [19792] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:13:04.762_128+00:00 [19792] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:13:04.762_145+00:00 [19792] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:13:04.762_149+00:00 [19792] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:13:23.699_868+00:00 [19910] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:13:23.701_226+00:00 [19910] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:13:23.701_259+00:00 [19910] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:13:23.701_266+00:00 [19910] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:13:23.701_290+00:00 [19910] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:13:23.701_294+00:00 [19910] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:13:23.701_297+00:00 [19910] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:13:23.701_330+00:00 [19910] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:13:23.701_474+00:00 [19946] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:13:25.327_590+00:00 [19917] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:13:25.327_601+00:00 [19917] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:13:25.327_616+00:00 [19917] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:13:25.327_627+00:00 [19917] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:13:25.327_634+00:00 [19917] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:13:25.327_637+00:00 [19917] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:13:25.327_655+00:00 [19917] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:13:25.327_704+00:00 [19945] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:13:25.327_712+00:00 [19945] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:13:25.327_721+00:00 [19945] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:13:45.579_330+00:00 [19917] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:13:45.579_352+00:00 [19917] [INFO] session 1 got connection from 127.0.0.1:50686 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:13:45.579_454+00:00 [19917] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:13:45.579_476+00:00 [19917] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:13:45.579_536+00:00 [19917] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:13:45.579_539+00:00 [19917] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:13:45.579_541+00:00 [19917] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:13:45.579_546+00:00 [19917] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:13:45.579_773+00:00 [19917] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50686 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:13:45.830_004+00:00 [19917] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:13:45.830_015+00:00 [19917] [INFO] session 2 got connection from 127.0.0.1:50688 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:13:45.830_095+00:00 [19917] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:13:45.830_099+00:00 [19917] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:13:45.830_215+00:00 [19917] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:13:45.830_219+00:00 [19917] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:13:45.830_283+00:00 [19945] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:13:45.830_286+00:00 [19945] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:13:45.830_295+00:00 [19945] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:13:45.830_306+00:00 [19945] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:13:45.830_310+00:00 [19945] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:13:45.830_329+00:00 [19945] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:13:45.830_437+00:00 [19945] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:13:45.830_455+00:00 [19945] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:13:45.830_518+00:00 [19945] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:13:45.830_522+00:00 [19945] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:13:45.830_530+00:00 [19945] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:13:51.449_091+00:00 [19945] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:13:51.449_097+00:00 [19945] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:13:51.449_115+00:00 [19945] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:13:51.449_194+00:00 [19945] [INFO] create snapshot idx 100000 log_term 1 done: 92 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:13:57.005_688+00:00 [19945] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:13:57.005_697+00:00 [19945] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:13:57.005_716+00:00 [19945] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:13:57.005_719+00:00 [19945] [INFO] create snapshot idx 200000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:14:02.602_637+00:00 [19945] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:14:02.602_643+00:00 [19945] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:14:02.602_668+00:00 [19945] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:14:02.602_671+00:00 [19945] [INFO] create snapshot idx 300000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:14:21.167_556+00:00 [20059] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:14:21.168_922+00:00 [20059] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:14:21.168_954+00:00 [20059] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:14:21.168_959+00:00 [20059] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:14:21.168_986+00:00 [20059] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:14:21.168_990+00:00 [20059] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:14:21.168_993+00:00 [20059] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:14:21.169_023+00:00 [20059] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:14:21.169_174+00:00 [20095] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:14:22.566_222+00:00 [20066] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:14:22.566_233+00:00 [20066] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:14:22.566_248+00:00 [20066] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:14:22.566_259+00:00 [20066] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:14:22.566_266+00:00 [20066] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:14:22.566_270+00:00 [20066] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:14:22.566_290+00:00 [20066] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:14:22.566_346+00:00 [20094] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:14:22.566_354+00:00 [20094] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:14:22.566_364+00:00 [20094] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:14:43.300_806+00:00 [20066] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:14:43.300_828+00:00 [20066] [INFO] session 1 got connection from 127.0.0.1:50690 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:14:43.300_936+00:00 [20066] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:14:43.300_957+00:00 [20066] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:14:43.301_020+00:00 [20066] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:14:43.301_024+00:00 [20066] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:14:43.301_026+00:00 [20066] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:14:43.301_031+00:00 [20066] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:14:43.301_260+00:00 [20066] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50690 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:14:43.551_297+00:00 [20066] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:14:43.551_309+00:00 [20066] [INFO] session 2 got connection from 127.0.0.1:50692 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:14:43.551_390+00:00 [20066] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:14:43.551_394+00:00 [20066] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:14:43.551_519+00:00 [20066] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:14:43.551_523+00:00 [20066] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:14:43.551_586+00:00 [20094] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:14:43.551_590+00:00 [20094] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:14:43.551_599+00:00 [20094] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:14:43.551_610+00:00 [20094] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:14:43.551_614+00:00 [20094] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:14:43.551_635+00:00 [20094] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:14:43.551_741+00:00 [20094] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:14:43.551_753+00:00 [20094] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:14:43.551_813+00:00 [20094] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:14:43.551_817+00:00 [20094] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:14:43.551_826+00:00 [20094] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:14:49.155_553+00:00 [20094] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:14:49.155_562+00:00 [20094] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:14:49.155_588+00:00 [20094] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:14:49.155_661+00:00 [20094] [INFO] create snapshot idx 100000 log_term 1 done: 93 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:14:54.662_389+00:00 [20094] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:14:54.662_397+00:00 [20094] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:14:54.662_495+00:00 [20094] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:14:54.662_499+00:00 [20094] [INFO] create snapshot idx 200000 log_term 1 done: 97 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:15:00.175_118+00:00 [20094] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:15:00.175_124+00:00 [20094] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:15:00.175_141+00:00 [20094] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:15:00.175_145+00:00 [20094] [INFO] create snapshot idx 300000 log_term 1 done: 16 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:33:13.035_751+00:00 [20490] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:33:13.037_098+00:00 [20490] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:33:13.037_130+00:00 [20490] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:33:13.037_138+00:00 [20490] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:33:13.037_161+00:00 [20490] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:33:13.037_165+00:00 [20490] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:33:13.037_168+00:00 [20490] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:33:13.037_196+00:00 [20490] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:33:13.037_347+00:00 [20526] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:33:15.060_433+00:00 [20497] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:33:15.060_457+00:00 [20497] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:33:15.060_494+00:00 [20497] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:33:15.060_522+00:00 [20497] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:33:15.060_538+00:00 [20497] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:33:15.060_549+00:00 [20497] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:33:15.060_598+00:00 [20497] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:33:15.060_726+00:00 [20525] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:33:15.060_752+00:00 [20525] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:33:15.060_777+00:00 [20525] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:33:35.135_869+00:00 [20497] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:33:35.135_891+00:00 [20497] [INFO] session 1 got connection from 127.0.0.1:50694 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:33:35.136_009+00:00 [20497] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:33:35.136_039+00:00 [20497] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:33:35.136_109+00:00 [20497] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:33:35.136_112+00:00 [20497] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:33:35.136_114+00:00 [20497] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:33:35.136_120+00:00 [20497] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:33:35.136_355+00:00 [20497] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50694 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:33:35.386_381+00:00 [20497] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:33:35.386_392+00:00 [20497] [INFO] session 2 got connection from 127.0.0.1:50696 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:33:35.386_473+00:00 [20497] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:33:35.386_477+00:00 [20497] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:33:35.386_600+00:00 [20497] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:33:35.386_604+00:00 [20497] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:33:35.386_686+00:00 [20525] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:33:35.386_690+00:00 [20525] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:33:35.386_702+00:00 [20525] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:33:35.386_715+00:00 [20525] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:33:35.386_719+00:00 [20525] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:33:35.386_739+00:00 [20525] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:33:35.386_837+00:00 [20525] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:33:35.386_854+00:00 [20525] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:33:35.386_915+00:00 [20525] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:33:35.386_920+00:00 [20525] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:33:35.386_934+00:00 [20525] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:33:47.465_647+00:00 [20525] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:33:47.465_656+00:00 [20525] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:33:47.465_676+00:00 [20525] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:33:47.465_679+00:00 [20525] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:34:10.701_228+00:00 [20715] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:34:10.703_325+00:00 [20715] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:34:10.703_360+00:00 [20715] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:34:10.703_365+00:00 [20715] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:34:10.703_389+00:00 [20715] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:34:10.703_394+00:00 [20715] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:34:10.703_397+00:00 [20715] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:34:10.703_433+00:00 [20715] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:34:10.703_931+00:00 [20751] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:34:31.599_212+00:00 [20813] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:34:31.600_558+00:00 [20813] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:34:31.600_590+00:00 [20813] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:34:31.600_595+00:00 [20813] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:34:31.600_623+00:00 [20813] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:34:31.600_627+00:00 [20813] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:34:31.600_630+00:00 [20813] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:34:31.600_659+00:00 [20813] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:34:31.600_808+00:00 [20849] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:34:32.886_836+00:00 [20820] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:34:32.886_847+00:00 [20820] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:34:32.886_863+00:00 [20820] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:34:32.886_873+00:00 [20820] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:34:32.886_880+00:00 [20820] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:34:32.886_885+00:00 [20820] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:34:32.886_903+00:00 [20820] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:34:32.886_953+00:00 [20848] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:34:32.886_961+00:00 [20848] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:34:32.886_970+00:00 [20848] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:34:53.182_787+00:00 [20820] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:34:53.182_807+00:00 [20820] [INFO] session 1 got connection from 127.0.0.1:50698 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:34:53.182_905+00:00 [20820] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:34:53.182_928+00:00 [20820] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:34:53.182_988+00:00 [20820] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:34:53.182_991+00:00 [20820] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:34:53.182_993+00:00 [20820] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:34:53.182_999+00:00 [20820] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:34:53.183_252+00:00 [20820] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50698 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:34:53.433_242+00:00 [20820] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:34:53.433_253+00:00 [20820] [INFO] session 2 got connection from 127.0.0.1:50700 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:34:53.433_332+00:00 [20820] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:34:53.433_336+00:00 [20820] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:34:53.433_460+00:00 [20820] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:34:53.433_465+00:00 [20820] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:34:53.433_528+00:00 [20848] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:34:53.433_532+00:00 [20848] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:34:53.433_540+00:00 [20848] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:34:53.433_551+00:00 [20848] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:34:53.433_555+00:00 [20848] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:34:53.433_575+00:00 [20848] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:34:53.433_662+00:00 [20848] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:34:53.433_673+00:00 [20848] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:34:53.433_724+00:00 [20848] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:34:53.433_727+00:00 [20848] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:34:53.433_735+00:00 [20848] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:05.663_890+00:00 [20848] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:35:05.663_898+00:00 [20848] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:35:05.663_918+00:00 [20848] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:35:05.663_921+00:00 [20848] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:35:28.748_269+00:00 [21015] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:35:28.749_648+00:00 [21015] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:35:28.749_682+00:00 [21015] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:35:28.749_690+00:00 [21015] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:35:28.749_712+00:00 [21015] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:35:28.749_716+00:00 [21015] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:35:28.749_719+00:00 [21015] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:35:28.749_749+00:00 [21015] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:35:28.749_895+00:00 [21051] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:35:29.866_995+00:00 [21022] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:35:29.867_004+00:00 [21022] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:35:29.867_020+00:00 [21022] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:35:29.867_030+00:00 [21022] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:35:29.867_036+00:00 [21022] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:35:29.867_040+00:00 [21022] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:35:29.867_058+00:00 [21022] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:35:29.867_108+00:00 [21050] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:35:29.867_116+00:00 [21050] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:35:29.867_126+00:00 [21050] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:50.839_359+00:00 [21022] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:35:50.839_378+00:00 [21022] [INFO] session 1 got connection from 127.0.0.1:50702 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:35:50.839_476+00:00 [21022] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:35:50.839_499+00:00 [21022] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:35:50.839_559+00:00 [21022] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:35:50.839_562+00:00 [21022] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:35:50.839_564+00:00 [21022] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:35:50.839_570+00:00 [21022] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:50.839_812+00:00 [21022] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50702 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:35:51.089_759+00:00 [21022] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:35:51.089_770+00:00 [21022] [INFO] session 2 got connection from 127.0.0.1:50704 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:35:51.089_851+00:00 [21022] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:35:51.089_855+00:00 [21022] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:35:51.089_978+00:00 [21022] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:35:51.089_983+00:00 [21022] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:35:51.090_048+00:00 [21050] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:35:51.090_051+00:00 [21050] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:35:51.090_060+00:00 [21050] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:35:51.090_071+00:00 [21050] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:35:51.090_075+00:00 [21050] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:35:51.090_095+00:00 [21050] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:51.090_188+00:00 [21050] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:35:51.090_200+00:00 [21050] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:35:51.090_259+00:00 [21050] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:35:51.090_263+00:00 [21050] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:35:51.090_272+00:00 [21050] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:35:59.135_742+00:00 [21050] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:35:59.135_751+00:00 [21050] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:35:59.135_771+00:00 [21050] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:35:59.135_774+00:00 [21050] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:36:06.656_069+00:00 [21050] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:36:06.656_078+00:00 [21050] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:36:06.656_100+00:00 [21050] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:36:06.656_104+00:00 [21050] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:36:26.413_948+00:00 [21207] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:36:26.415_345+00:00 [21207] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:36:26.415_377+00:00 [21207] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:36:26.415_383+00:00 [21207] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:36:26.415_410+00:00 [21207] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:36:26.415_414+00:00 [21207] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:36:26.415_416+00:00 [21207] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:36:26.415_446+00:00 [21207] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:36:26.415_593+00:00 [21243] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:36:27.543_627+00:00 [21214] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:36:27.543_637+00:00 [21214] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:36:27.543_652+00:00 [21214] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:36:27.543_662+00:00 [21214] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:36:27.543_668+00:00 [21214] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:36:27.543_672+00:00 [21214] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:36:27.543_690+00:00 [21214] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:36:27.543_740+00:00 [21242] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:36:27.543_747+00:00 [21242] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:36:27.543_757+00:00 [21242] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:36:48.260_171+00:00 [21214] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:36:48.260_190+00:00 [21214] [INFO] session 1 got connection from 127.0.0.1:50706 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:36:48.260_288+00:00 [21214] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:36:48.260_309+00:00 [21214] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:36:48.260_362+00:00 [21214] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:36:48.260_366+00:00 [21214] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:36:48.260_368+00:00 [21214] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:36:48.260_373+00:00 [21214] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:36:48.260_604+00:00 [21214] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50706 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:36:48.510_739+00:00 [21214] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:36:48.510_750+00:00 [21214] [INFO] session 2 got connection from 127.0.0.1:50708 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:36:48.510_828+00:00 [21214] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:36:48.510_832+00:00 [21214] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:36:48.510_956+00:00 [21214] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:36:48.510_960+00:00 [21214] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:36:48.511_024+00:00 [21242] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:36:48.511_028+00:00 [21242] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:36:48.511_036+00:00 [21242] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:36:48.511_047+00:00 [21242] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:36:48.511_051+00:00 [21242] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:36:48.511_070+00:00 [21242] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:36:48.511_165+00:00 [21242] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:36:48.511_178+00:00 [21242] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:36:48.511_235+00:00 [21242] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:36:48.511_239+00:00 [21242] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:36:48.511_248+00:00 [21242] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:36:55.376_271+00:00 [21242] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:36:55.376_281+00:00 [21242] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:36:55.376_344+00:00 [21242] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:36:55.376_347+00:00 [21242] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:37:02.156_625+00:00 [21242] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:37:02.156_634+00:00 [21242] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:37:02.156_656+00:00 [21242] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:37:02.156_660+00:00 [21242] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:37:23.846_233+00:00 [21392] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:37:23.847_623+00:00 [21392] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:37:23.847_655+00:00 [21392] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:37:23.847_664+00:00 [21392] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:37:23.847_686+00:00 [21392] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:37:23.847_690+00:00 [21392] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:37:23.847_694+00:00 [21392] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:37:23.847_724+00:00 [21392] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:37:23.847_871+00:00 [21428] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:37:25.453_933+00:00 [21399] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:37:25.453_944+00:00 [21399] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:37:25.453_960+00:00 [21399] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:37:25.453_971+00:00 [21399] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:37:25.453_977+00:00 [21399] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:37:25.453_981+00:00 [21399] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:37:25.454_000+00:00 [21399] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:37:25.454_054+00:00 [21427] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:37:25.454_061+00:00 [21427] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:37:25.454_072+00:00 [21427] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:37:45.190_929+00:00 [21399] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:37:45.190_950+00:00 [21399] [INFO] session 1 got connection from 127.0.0.1:50710 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:37:45.191_050+00:00 [21399] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:37:45.191_073+00:00 [21399] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:37:45.191_133+00:00 [21399] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:37:45.191_136+00:00 [21399] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:37:45.191_138+00:00 [21399] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:37:45.191_144+00:00 [21399] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:37:45.191_381+00:00 [21399] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50710 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:37:45.440_967+00:00 [21399] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:37:45.440_977+00:00 [21399] [INFO] session 2 got connection from 127.0.0.1:50712 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:37:45.441_057+00:00 [21399] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:37:45.441_061+00:00 [21399] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:37:45.441_186+00:00 [21399] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:37:45.441_190+00:00 [21399] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:37:45.441_255+00:00 [21427] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:37:45.441_258+00:00 [21427] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:37:45.441_266+00:00 [21427] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:37:45.441_277+00:00 [21427] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:37:45.441_281+00:00 [21427] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:37:45.441_300+00:00 [21427] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:37:45.441_394+00:00 [21427] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:37:45.441_407+00:00 [21427] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:37:45.441_461+00:00 [21427] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:37:45.441_464+00:00 [21427] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:37:45.441_471+00:00 [21427] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:37:52.199_847+00:00 [21427] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:37:52.199_857+00:00 [21427] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:37:52.199_877+00:00 [21427] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:37:52.199_940+00:00 [21427] [INFO] create snapshot idx 100000 log_term 1 done: 79 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:37:59.064_960+00:00 [21427] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:37:59.064_969+00:00 [21427] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:37:59.064_993+00:00 [21427] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:37:59.064_997+00:00 [21427] [INFO] create snapshot idx 200000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:38:20.762_784+00:00 [21532] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:38:20.764_125+00:00 [21532] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:38:20.764_165+00:00 [21532] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:38:20.764_170+00:00 [21532] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:38:20.764_195+00:00 [21532] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:38:20.764_199+00:00 [21532] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:38:20.764_202+00:00 [21532] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:38:20.764_233+00:00 [21532] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:38:20.764_382+00:00 [21568] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:38:22.549_463+00:00 [21539] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:38:22.549_474+00:00 [21539] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:38:22.549_489+00:00 [21539] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:38:22.549_500+00:00 [21539] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:38:22.549_506+00:00 [21539] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:38:22.549_509+00:00 [21539] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:38:22.549_528+00:00 [21539] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:38:22.549_580+00:00 [21567] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:38:22.549_588+00:00 [21567] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:38:22.549_598+00:00 [21567] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:38:42.601_687+00:00 [21539] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:38:42.601_708+00:00 [21539] [INFO] session 1 got connection from 127.0.0.1:50714 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:38:42.601_813+00:00 [21539] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:38:42.601_835+00:00 [21539] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:38:42.601_902+00:00 [21539] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:38:42.601_905+00:00 [21539] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:38:42.601_907+00:00 [21539] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:38:42.601_912+00:00 [21539] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:38:42.602_155+00:00 [21539] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50714 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:38:42.852_843+00:00 [21539] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:38:42.852_853+00:00 [21539] [INFO] session 2 got connection from 127.0.0.1:50716 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:38:42.852_932+00:00 [21539] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:38:42.852_936+00:00 [21539] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:38:42.853_059+00:00 [21539] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:38:42.853_064+00:00 [21539] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:38:42.853_127+00:00 [21567] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:38:42.853_130+00:00 [21567] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:38:42.853_138+00:00 [21567] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:38:42.853_150+00:00 [21567] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:38:42.853_153+00:00 [21567] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:38:42.853_173+00:00 [21567] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:38:42.853_267+00:00 [21567] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:38:42.853_277+00:00 [21567] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:38:42.853_327+00:00 [21567] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:38:42.853_330+00:00 [21567] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:38:42.853_338+00:00 [21567] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:38:49.739_351+00:00 [21567] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:38:49.739_361+00:00 [21567] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:38:49.739_445+00:00 [21567] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:38:49.739_450+00:00 [21567] [INFO] create snapshot idx 100000 log_term 1 done: 84 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:38:57.118_079+00:00 [21567] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:38:57.118_144+00:00 [21567] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:38:57.118_168+00:00 [21567] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:38:57.118_172+00:00 [21567] [INFO] create snapshot idx 200000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:39:18.179_211+00:00 [21673] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:39:18.180_596+00:00 [21673] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:39:18.180_630+00:00 [21673] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:39:18.180_634+00:00 [21673] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:39:18.180_657+00:00 [21673] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:39:18.180_661+00:00 [21673] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:39:18.180_664+00:00 [21673] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:39:18.180_697+00:00 [21673] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:39:18.180_850+00:00 [21709] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:39:19.866_904+00:00 [21680] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:39:19.866_914+00:00 [21680] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:39:19.866_928+00:00 [21680] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:39:19.866_944+00:00 [21680] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:39:19.866_951+00:00 [21680] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:39:19.866_955+00:00 [21680] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:39:19.866_973+00:00 [21680] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:39:19.867_024+00:00 [21708] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:39:19.867_032+00:00 [21708] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:39:19.867_042+00:00 [21708] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:39:39.776_047+00:00 [21680] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:39:39.776_068+00:00 [21680] [INFO] session 1 got connection from 127.0.0.1:50718 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:39:39.776_178+00:00 [21680] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:39:39.776_200+00:00 [21680] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:39:39.776_260+00:00 [21680] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:39:39.776_263+00:00 [21680] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:39:39.776_266+00:00 [21680] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:39:39.776_271+00:00 [21680] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:39:39.776_508+00:00 [21680] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50718 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:39:40.027_080+00:00 [21680] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:39:40.027_089+00:00 [21680] [INFO] session 2 got connection from 127.0.0.1:50722 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:39:40.027_162+00:00 [21680] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:39:40.027_166+00:00 [21680] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:39:40.027_279+00:00 [21680] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:39:40.027_283+00:00 [21680] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:39:40.027_345+00:00 [21708] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:39:40.027_349+00:00 [21708] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:39:40.027_357+00:00 [21708] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:39:40.027_367+00:00 [21708] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:39:40.027_371+00:00 [21708] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:39:40.027_388+00:00 [21708] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:39:40.027_483+00:00 [21708] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:39:40.027_501+00:00 [21708] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:39:40.027_568+00:00 [21708] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:39:40.027_571+00:00 [21708] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:39:40.027_577+00:00 [21708] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:39:46.869_637+00:00 [21708] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:39:46.869_646+00:00 [21708] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:39:46.869_667+00:00 [21708] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:39:46.869_670+00:00 [21708] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:39:54.301_972+00:00 [21708] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:39:54.301_982+00:00 [21708] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:39:54.302_067+00:00 [21708] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:39:54.302_071+00:00 [21708] [INFO] create snapshot idx 200000 log_term 1 done: 85 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:40:15.354_379+00:00 [21814] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:40:15.355_765+00:00 [21814] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:40:15.355_797+00:00 [21814] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:40:15.355_805+00:00 [21814] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:40:15.355_830+00:00 [21814] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:40:15.355_834+00:00 [21814] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:40:15.355_837+00:00 [21814] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:40:15.355_870+00:00 [21814] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:40:15.356_019+00:00 [21850] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:40:17.044_078+00:00 [21821] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:40:17.044_089+00:00 [21821] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:40:17.044_104+00:00 [21821] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:40:17.044_114+00:00 [21821] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:40:17.044_121+00:00 [21821] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:40:17.044_125+00:00 [21821] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:40:17.044_143+00:00 [21821] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:40:17.044_196+00:00 [21849] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:40:17.044_204+00:00 [21849] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:40:17.044_214+00:00 [21849] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:40:36.945_510+00:00 [21821] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:40:36.945_535+00:00 [21821] [INFO] session 1 got connection from 127.0.0.1:50724 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:40:36.945_633+00:00 [21821] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:40:36.945_655+00:00 [21821] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:40:36.945_713+00:00 [21821] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:40:36.945_717+00:00 [21821] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:40:36.945_719+00:00 [21821] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:40:36.945_724+00:00 [21821] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:40:36.945_975+00:00 [21821] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50724 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:40:37.196_101+00:00 [21821] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:40:37.196_112+00:00 [21821] [INFO] session 2 got connection from 127.0.0.1:50726 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:40:37.196_194+00:00 [21821] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:40:37.196_198+00:00 [21821] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:40:37.196_323+00:00 [21821] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:40:37.196_327+00:00 [21821] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:40:37.196_390+00:00 [21849] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:40:37.196_393+00:00 [21849] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:40:37.196_402+00:00 [21849] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:40:37.196_413+00:00 [21849] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:40:37.196_417+00:00 [21849] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:40:37.196_436+00:00 [21849] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:40:37.196_532+00:00 [21849] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:40:37.196_544+00:00 [21849] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:40:37.196_601+00:00 [21849] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:40:37.196_605+00:00 [21849] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:40:37.196_614+00:00 [21849] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:40:44.095_750+00:00 [21849] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:40:44.095_759+00:00 [21849] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:40:44.095_779+00:00 [21849] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:40:44.095_782+00:00 [21849] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:40:51.506_713+00:00 [21849] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:40:51.506_722+00:00 [21849] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:40:51.506_808+00:00 [21849] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:40:51.506_867+00:00 [21849] [INFO] create snapshot idx 200000 log_term 1 done: 141 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:41:12.525_793+00:00 [21966] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:41:12.527_177+00:00 [21966] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:41:12.527_210+00:00 [21966] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:41:12.527_216+00:00 [21966] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:41:12.527_243+00:00 [21966] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:41:12.527_247+00:00 [21966] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:41:12.527_250+00:00 [21966] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:41:12.527_279+00:00 [21966] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:41:12.527_427+00:00 [22002] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:41:14.361_483+00:00 [21973] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:41:14.361_494+00:00 [21973] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:41:14.361_510+00:00 [21973] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:41:14.361_522+00:00 [21973] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:41:14.361_530+00:00 [21973] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:41:14.361_533+00:00 [21973] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:41:14.361_551+00:00 [21973] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:41:14.361_603+00:00 [22001] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:41:14.361_611+00:00 [22001] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:41:14.361_620+00:00 [22001] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:41:34.616_591+00:00 [21973] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:41:34.616_616+00:00 [21973] [INFO] session 1 got connection from 127.0.0.1:50728 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:41:34.616_728+00:00 [21973] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:41:34.616_750+00:00 [21973] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:41:34.616_810+00:00 [21973] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:41:34.616_814+00:00 [21973] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:41:34.616_816+00:00 [21973] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:41:34.616_823+00:00 [21973] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:41:34.617_075+00:00 [21973] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50728 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:41:34.867_579+00:00 [21973] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:41:34.867_590+00:00 [21973] [INFO] session 2 got connection from 127.0.0.1:50730 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:41:34.867_665+00:00 [21973] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:41:34.867_669+00:00 [21973] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:41:34.867_795+00:00 [21973] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:41:34.867_799+00:00 [21973] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:41:34.867_866+00:00 [22001] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:41:34.867_869+00:00 [22001] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:41:34.867_877+00:00 [22001] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:41:34.867_888+00:00 [22001] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:41:34.867_892+00:00 [22001] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:41:34.867_911+00:00 [22001] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:41:34.868_006+00:00 [22001] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:41:34.868_018+00:00 [22001] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:41:34.868_076+00:00 [22001] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:41:34.868_081+00:00 [22001] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:41:34.868_090+00:00 [22001] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:41:41.747_690+00:00 [22001] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:41:41.747_699+00:00 [22001] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:41:41.747_790+00:00 [22001] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:41:41.747_828+00:00 [22001] [INFO] create snapshot idx 100000 log_term 1 done: 64 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:41:49.085_465+00:00 [22001] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:41:49.085_474+00:00 [22001] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:41:49.085_496+00:00 [22001] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:41:49.085_562+00:00 [22001] [INFO] create snapshot idx 200000 log_term 1 done: 83 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:42:10.197_923+00:00 [22113] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:42:10.199_314+00:00 [22113] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:42:10.199_347+00:00 [22113] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:42:10.199_355+00:00 [22113] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:42:10.199_379+00:00 [22113] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:42:10.199_383+00:00 [22113] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:42:10.199_386+00:00 [22113] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:42:10.199_416+00:00 [22113] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:42:10.199_563+00:00 [22149] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:42:11.955_734+00:00 [22120] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:42:11.955_758+00:00 [22120] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:42:11.955_793+00:00 [22120] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:42:11.955_820+00:00 [22120] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:42:11.955_836+00:00 [22120] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:42:11.955_846+00:00 [22120] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:42:11.955_895+00:00 [22120] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:42:11.956_029+00:00 [22148] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:42:11.956_055+00:00 [22148] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:42:11.956_082+00:00 [22148] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:42:32.290_677+00:00 [22120] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:42:32.290_701+00:00 [22120] [INFO] session 1 got connection from 127.0.0.1:50732 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:42:32.290_819+00:00 [22120] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:42:32.290_842+00:00 [22120] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:42:32.290_903+00:00 [22120] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:42:32.290_907+00:00 [22120] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:42:32.290_909+00:00 [22120] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:42:32.290_914+00:00 [22120] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:42:32.291_161+00:00 [22120] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50732 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:42:32.541_171+00:00 [22120] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:42:32.541_182+00:00 [22120] [INFO] session 2 got connection from 127.0.0.1:50734 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:42:32.541_265+00:00 [22120] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:42:32.541_269+00:00 [22120] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:42:32.541_395+00:00 [22120] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:42:32.541_399+00:00 [22120] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:42:32.541_462+00:00 [22148] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:42:32.541_465+00:00 [22148] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:42:32.541_474+00:00 [22148] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:42:32.541_485+00:00 [22148] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:42:32.541_489+00:00 [22148] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:42:32.541_508+00:00 [22148] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:42:32.541_602+00:00 [22148] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:42:32.541_615+00:00 [22148] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:42:32.541_672+00:00 [22148] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:42:32.541_676+00:00 [22148] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:42:32.541_686+00:00 [22148] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:42:39.485_764+00:00 [22148] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:42:39.485_773+00:00 [22148] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:42:39.485_855+00:00 [22148] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:42:39.485_859+00:00 [22148] [INFO] create snapshot idx 100000 log_term 1 done: 81 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:42:46.842_194+00:00 [22148] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:42:46.842_203+00:00 [22148] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:42:46.842_288+00:00 [22148] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:42:46.842_293+00:00 [22148] [INFO] create snapshot idx 200000 log_term 1 done: 85 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:43:07.870_507+00:00 [22263] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:43:07.871_899+00:00 [22263] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:43:07.871_942+00:00 [22263] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:43:07.871_947+00:00 [22263] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:43:07.871_969+00:00 [22263] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:43:07.871_973+00:00 [22263] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:43:07.871_976+00:00 [22263] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:43:07.872_005+00:00 [22263] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:43:07.872_156+00:00 [22299] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:43:09.615_263+00:00 [22270] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:43:09.615_273+00:00 [22270] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:43:09.615_289+00:00 [22270] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:43:09.615_300+00:00 [22270] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:43:09.615_306+00:00 [22270] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:43:09.615_309+00:00 [22270] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:43:09.615_327+00:00 [22270] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:43:09.615_380+00:00 [22298] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:43:09.615_388+00:00 [22298] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:43:09.615_398+00:00 [22298] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:43:29.706_293+00:00 [22270] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:43:29.706_313+00:00 [22270] [INFO] session 1 got connection from 127.0.0.1:50736 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:43:29.706_414+00:00 [22270] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:43:29.706_437+00:00 [22270] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:43:29.706_497+00:00 [22270] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:43:29.706_501+00:00 [22270] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:43:29.706_503+00:00 [22270] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:43:29.706_508+00:00 [22270] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:43:29.706_767+00:00 [22270] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50736 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:43:29.956_954+00:00 [22270] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:43:29.956_965+00:00 [22270] [INFO] session 2 got connection from 127.0.0.1:50740 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:43:29.957_052+00:00 [22270] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:43:29.957_056+00:00 [22270] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:43:29.957_183+00:00 [22270] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:43:29.957_187+00:00 [22270] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:43:29.957_251+00:00 [22298] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:43:29.957_255+00:00 [22298] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:43:29.957_263+00:00 [22298] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:43:29.957_275+00:00 [22298] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:43:29.957_279+00:00 [22298] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:43:29.957_298+00:00 [22298] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:43:29.957_397+00:00 [22298] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:43:29.957_410+00:00 [22298] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:43:29.957_472+00:00 [22298] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:43:29.957_478+00:00 [22298] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:43:29.957_486+00:00 [22298] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:43:36.956_726+00:00 [22298] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:43:36.956_735+00:00 [22298] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:43:36.956_875+00:00 [22298] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:43:36.956_880+00:00 [22298] [INFO] create snapshot idx 100000 log_term 1 done: 140 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:43:44.306_220+00:00 [22298] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:43:44.306_230+00:00 [22298] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:43:44.306_278+00:00 [22298] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:43:44.306_320+00:00 [22298] [INFO] create snapshot idx 200000 log_term 1 done: 85 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:50:32.800_231+00:00 [22561] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:50:32.801_598+00:00 [22561] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:50:32.801_632+00:00 [22561] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:50:32.801_636+00:00 [22561] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:50:32.801_662+00:00 [22561] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:50:32.801_665+00:00 [22561] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:50:32.801_668+00:00 [22561] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:50:32.801_699+00:00 [22561] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:50:32.801_838+00:00 [22597] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:50:34.636_894+00:00 [22568] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:50:34.636_903+00:00 [22568] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:50:34.636_918+00:00 [22568] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:50:34.636_928+00:00 [22568] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:50:34.636_934+00:00 [22568] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:50:34.636_938+00:00 [22568] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:50:34.636_956+00:00 [22568] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:50:34.637_002+00:00 [22596] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:50:34.637_010+00:00 [22596] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:50:34.637_019+00:00 [22596] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:50:54.889_633+00:00 [22568] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:50:54.889_654+00:00 [22568] [INFO] session 1 got connection from 127.0.0.1:50744 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:50:54.889_758+00:00 [22568] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:50:54.889_779+00:00 [22568] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:50:54.889_839+00:00 [22568] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:50:54.889_842+00:00 [22568] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:50:54.889_844+00:00 [22568] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:50:54.889_850+00:00 [22568] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:50:54.890_078+00:00 [22568] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50744 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:50:55.140_295+00:00 [22568] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:50:55.140_306+00:00 [22568] [INFO] session 2 got connection from 127.0.0.1:50746 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:50:55.140_387+00:00 [22568] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:50:55.140_390+00:00 [22568] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:50:55.140_516+00:00 [22568] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:50:55.140_520+00:00 [22568] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:50:55.140_584+00:00 [22596] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:50:55.140_587+00:00 [22596] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:50:55.140_594+00:00 [22596] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:50:55.140_605+00:00 [22596] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:50:55.140_609+00:00 [22596] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:50:55.140_628+00:00 [22596] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:50:55.140_721+00:00 [22596] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:50:55.140_736+00:00 [22596] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:50:55.140_795+00:00 [22596] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:50:55.140_800+00:00 [22596] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:50:55.140_808+00:00 [22596] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:51:08.162_075+00:00 [22596] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:51:08.162_083+00:00 [22596] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:51:08.162_103+00:00 [22596] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:51:08.162_106+00:00 [22596] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:51:30.451_659+00:00 [22750] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:51:30.453_012+00:00 [22750] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:51:30.453_047+00:00 [22750] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:51:30.453_051+00:00 [22750] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:51:30.453_078+00:00 [22750] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:51:30.453_082+00:00 [22750] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:51:30.453_085+00:00 [22750] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:51:30.453_121+00:00 [22750] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:51:30.453_264+00:00 [22786] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:51:31.811_433+00:00 [22757] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:51:31.811_456+00:00 [22757] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:51:31.811_493+00:00 [22757] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:51:31.811_519+00:00 [22757] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:51:31.811_535+00:00 [22757] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:51:31.811_546+00:00 [22757] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:51:31.811_595+00:00 [22757] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:51:31.811_727+00:00 [22785] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:51:31.811_752+00:00 [22785] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:51:31.811_779+00:00 [22785] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:51:52.544_305+00:00 [22757] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:51:52.544_328+00:00 [22757] [INFO] session 1 got connection from 127.0.0.1:50748 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:51:52.544_433+00:00 [22757] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:51:52.544_456+00:00 [22757] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:51:52.544_517+00:00 [22757] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:51:52.544_520+00:00 [22757] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:51:52.544_522+00:00 [22757] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:51:52.544_527+00:00 [22757] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:51:52.544_767+00:00 [22757] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50748 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:51:52.795_000+00:00 [22757] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:51:52.795_010+00:00 [22757] [INFO] session 2 got connection from 127.0.0.1:50750 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:51:52.795_090+00:00 [22757] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:51:52.795_094+00:00 [22757] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:51:52.795_220+00:00 [22757] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:51:52.795_225+00:00 [22757] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:51:52.795_290+00:00 [22785] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:51:52.795_293+00:00 [22785] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:51:52.795_302+00:00 [22785] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:51:52.795_313+00:00 [22785] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:51:52.795_317+00:00 [22785] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:51:52.795_335+00:00 [22785] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:51:52.795_430+00:00 [22785] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:51:52.795_442+00:00 [22785] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:51:52.795_491+00:00 [22785] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:51:52.795_495+00:00 [22785] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:51:52.795_503+00:00 [22785] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:00.920_371+00:00 [22785] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:52:00.920_381+00:00 [22785] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:52:00.920_401+00:00 [22785] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:52:00.920_405+00:00 [22785] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:52:08.283_845+00:00 [22785] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:52:08.283_853+00:00 [22785] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:52:08.283_875+00:00 [22785] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:52:08.283_879+00:00 [22785] [INFO] create snapshot idx 200000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:52:28.124_390+00:00 [22885] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:52:28.125_770+00:00 [22885] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:52:28.125_803+00:00 [22885] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:52:28.125_811+00:00 [22885] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:52:28.125_836+00:00 [22885] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:52:28.125_840+00:00 [22885] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:52:28.125_843+00:00 [22885] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:52:28.125_873+00:00 [22885] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:52:28.126_046+00:00 [22921] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:52:30.119_251+00:00 [22892] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:52:30.119_275+00:00 [22892] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:52:30.119_312+00:00 [22892] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:52:30.119_339+00:00 [22892] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:52:30.119_354+00:00 [22892] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:52:30.119_364+00:00 [22892] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:52:30.119_413+00:00 [22892] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:52:30.119_557+00:00 [22920] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:52:30.119_583+00:00 [22920] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:52:30.119_604+00:00 [22920] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:50.222_352+00:00 [22892] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:52:50.222_372+00:00 [22892] [INFO] session 1 got connection from 127.0.0.1:50752 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:52:50.222_468+00:00 [22892] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:52:50.222_490+00:00 [22892] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:52:50.222_548+00:00 [22892] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:52:50.222_551+00:00 [22892] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:52:50.222_553+00:00 [22892] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:52:50.222_559+00:00 [22892] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:50.222_806+00:00 [22892] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50752 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:52:50.472_928+00:00 [22892] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:52:50.472_939+00:00 [22892] [INFO] session 2 got connection from 127.0.0.1:50754 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:52:50.473_020+00:00 [22892] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:52:50.473_024+00:00 [22892] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:52:50.473_148+00:00 [22892] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:52:50.473_152+00:00 [22892] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:52:50.473_214+00:00 [22920] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:52:50.473_217+00:00 [22920] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:52:50.473_226+00:00 [22920] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:52:50.473_237+00:00 [22920] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:52:50.473_241+00:00 [22920] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:52:50.473_259+00:00 [22920] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:50.473_358+00:00 [22920] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:52:50.473_375+00:00 [22920] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:52:50.473_436+00:00 [22920] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:52:50.473_441+00:00 [22920] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:52:50.473_447+00:00 [22920] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:52:57.234_447+00:00 [22920] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:52:57.234_457+00:00 [22920] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:52:57.234_479+00:00 [22920] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:52:57.234_482+00:00 [22920] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:53:04.138_216+00:00 [22920] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:53:04.138_225+00:00 [22920] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:53:04.138_248+00:00 [22920] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:53:04.138_252+00:00 [22920] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:53:25.802_428+00:00 [23022] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:53:25.803_808+00:00 [23022] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:53:25.803_843+00:00 [23022] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:53:25.803_848+00:00 [23022] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:53:25.803_875+00:00 [23022] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:53:25.803_879+00:00 [23022] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:53:25.803_882+00:00 [23022] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:53:25.803_912+00:00 [23022] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:53:25.804_061+00:00 [23058] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:53:27.027_157+00:00 [23029] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:53:27.027_168+00:00 [23029] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:53:27.027_184+00:00 [23029] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:53:27.027_196+00:00 [23029] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:53:27.027_202+00:00 [23029] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:53:27.027_206+00:00 [23029] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:53:27.027_225+00:00 [23029] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:53:27.027_277+00:00 [23057] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:53:27.027_284+00:00 [23057] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:53:27.027_294+00:00 [23057] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:53:47.658_807+00:00 [23029] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:53:47.658_827+00:00 [23029] [INFO] session 1 got connection from 127.0.0.1:50756 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:53:47.658_926+00:00 [23029] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:53:47.658_947+00:00 [23029] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:53:47.659_006+00:00 [23029] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:53:47.659_010+00:00 [23029] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:53:47.659_012+00:00 [23029] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:53:47.659_017+00:00 [23029] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:53:47.659_241+00:00 [23029] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50756 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:53:47.909_267+00:00 [23029] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:53:47.909_277+00:00 [23029] [INFO] session 2 got connection from 127.0.0.1:50758 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:53:47.909_355+00:00 [23029] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:53:47.909_359+00:00 [23029] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:53:47.909_483+00:00 [23029] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:53:47.909_487+00:00 [23029] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:53:47.909_548+00:00 [23057] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:53:47.909_552+00:00 [23057] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:53:47.909_560+00:00 [23057] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:53:47.909_571+00:00 [23057] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:53:47.909_575+00:00 [23057] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:53:47.909_594+00:00 [23057] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:53:47.909_688+00:00 [23057] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:53:47.909_701+00:00 [23057] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:53:47.909_752+00:00 [23057] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:53:47.909_755+00:00 [23057] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:53:47.909_762+00:00 [23057] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:53:54.448_708+00:00 [23057] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:53:54.448_718+00:00 [23057] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:53:54.448_800+00:00 [23057] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:53:54.448_804+00:00 [23057] [INFO] create snapshot idx 100000 log_term 1 done: 82 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:54:01.266_179+00:00 [23057] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:54:01.266_188+00:00 [23057] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:54:01.266_211+00:00 [23057] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:54:01.266_215+00:00 [23057] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:54:23.241_355+00:00 [23177] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:54:23.242_782+00:00 [23177] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:54:23.242_814+00:00 [23177] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:54:23.242_823+00:00 [23177] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:54:23.242_847+00:00 [23177] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:54:23.242_851+00:00 [23177] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:54:23.242_854+00:00 [23177] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:54:23.242_884+00:00 [23177] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:54:23.243_034+00:00 [23213] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:54:24.719_078+00:00 [23184] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:54:24.719_089+00:00 [23184] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:54:24.719_103+00:00 [23184] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:54:24.719_113+00:00 [23184] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:54:24.719_120+00:00 [23184] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:54:24.719_124+00:00 [23184] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:54:24.719_142+00:00 [23184] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:54:24.719_196+00:00 [23212] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:54:24.719_204+00:00 [23212] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:54:24.719_214+00:00 [23212] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:54:44.583_288+00:00 [23184] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:54:44.583_309+00:00 [23184] [INFO] session 1 got connection from 127.0.0.1:50760 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:54:44.583_413+00:00 [23184] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:54:44.583_434+00:00 [23184] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:54:44.583_494+00:00 [23184] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:54:44.583_497+00:00 [23184] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:54:44.583_499+00:00 [23184] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:54:44.583_505+00:00 [23184] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:54:44.583_738+00:00 [23184] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50760 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:54:44.833_854+00:00 [23184] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:54:44.833_864+00:00 [23184] [INFO] session 2 got connection from 127.0.0.1:50762 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:54:44.833_945+00:00 [23184] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:54:44.833_948+00:00 [23184] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:54:44.834_073+00:00 [23184] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:54:44.834_078+00:00 [23184] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:54:44.834_141+00:00 [23212] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:54:44.834_144+00:00 [23212] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:54:44.834_152+00:00 [23212] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:54:44.834_163+00:00 [23212] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:54:44.834_167+00:00 [23212] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:54:44.834_187+00:00 [23212] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:54:44.834_281+00:00 [23212] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:54:44.834_294+00:00 [23212] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:54:44.834_353+00:00 [23212] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:54:44.834_357+00:00 [23212] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:54:44.834_366+00:00 [23212] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:54:50.955_515+00:00 [23212] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:54:50.955_524+00:00 [23212] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:54:50.955_545+00:00 [23212] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:54:50.955_606+00:00 [23212] [INFO] create snapshot idx 100000 log_term 1 done: 76 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:54:58.444_192+00:00 [23212] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:54:58.444_202+00:00 [23212] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:54:58.444_313+00:00 [23212] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:54:58.444_352+00:00 [23212] [INFO] create snapshot idx 200000 log_term 1 done: 145 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:55:20.165_253+00:00 [23376] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:55:20.166_621+00:00 [23376] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:55:20.166_653+00:00 [23376] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:55:20.166_658+00:00 [23376] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:55:20.166_706+00:00 [23376] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:55:20.166_710+00:00 [23376] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:55:20.166_713+00:00 [23376] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:55:20.166_755+00:00 [23376] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:55:20.166_906+00:00 [23412] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:55:21.545_951+00:00 [23383] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:55:21.545_961+00:00 [23383] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:55:21.545_975+00:00 [23383] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:55:21.545_986+00:00 [23383] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:55:21.545_992+00:00 [23383] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:55:21.545_995+00:00 [23383] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:55:21.546_014+00:00 [23383] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:55:21.546_063+00:00 [23411] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:55:21.546_071+00:00 [23411] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:55:21.546_080+00:00 [23411] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:55:41.511_508+00:00 [23383] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:55:41.511_530+00:00 [23383] [INFO] session 1 got connection from 127.0.0.1:50764 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:55:41.511_631+00:00 [23383] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:55:41.511_653+00:00 [23383] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:55:41.511_713+00:00 [23383] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:55:41.511_716+00:00 [23383] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:55:41.511_718+00:00 [23383] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:55:41.511_723+00:00 [23383] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:55:41.511_953+00:00 [23383] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50764 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:55:41.762_462+00:00 [23383] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:55:41.762_472+00:00 [23383] [INFO] session 2 got connection from 127.0.0.1:50766 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:55:41.762_560+00:00 [23383] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:55:41.762_563+00:00 [23383] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:55:41.762_718+00:00 [23383] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:55:41.762_722+00:00 [23383] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:55:41.762_787+00:00 [23411] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:55:41.762_791+00:00 [23411] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:55:41.762_799+00:00 [23411] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:55:41.762_810+00:00 [23411] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:55:41.762_814+00:00 [23411] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:55:41.762_831+00:00 [23411] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:55:41.762_928+00:00 [23411] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:55:41.762_945+00:00 [23411] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:55:41.763_007+00:00 [23411] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:55:41.763_012+00:00 [23411] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:55:41.763_020+00:00 [23411] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:55:48.079_220+00:00 [23411] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:55:48.079_296+00:00 [23411] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:55:48.079_361+00:00 [23411] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:55:48.079_365+00:00 [23411] [INFO] create snapshot idx 100000 log_term 1 done: 65 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:55:55.440_484+00:00 [23411] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:55:55.440_494+00:00 [23411] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:55:55.440_517+00:00 [23411] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:55:55.440_520+00:00 [23411] [INFO] create snapshot idx 200000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:56:17.077_397+00:00 [23569] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:56:17.078_779+00:00 [23569] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:56:17.078_814+00:00 [23569] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:56:17.078_820+00:00 [23569] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:56:17.078_845+00:00 [23569] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:56:17.078_850+00:00 [23569] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:56:17.078_853+00:00 [23569] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:56:17.078_882+00:00 [23569] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:56:17.079_037+00:00 [23605] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:56:18.642_133+00:00 [23576] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:56:18.642_144+00:00 [23576] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:56:18.642_159+00:00 [23576] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:56:18.642_174+00:00 [23576] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:56:18.642_180+00:00 [23576] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:56:18.642_185+00:00 [23576] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:56:18.642_202+00:00 [23576] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:56:18.642_260+00:00 [23604] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:56:18.642_267+00:00 [23604] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:56:18.642_276+00:00 [23604] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:56:39.159_609+00:00 [23576] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:56:39.159_630+00:00 [23576] [INFO] session 1 got connection from 127.0.0.1:50768 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:56:39.159_733+00:00 [23576] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:56:39.159_754+00:00 [23576] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:56:39.159_811+00:00 [23576] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:56:39.159_814+00:00 [23576] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:56:39.159_816+00:00 [23576] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:56:39.159_822+00:00 [23576] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:56:39.160_046+00:00 [23576] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50768 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:56:39.410_302+00:00 [23576] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:56:39.410_312+00:00 [23576] [INFO] session 2 got connection from 127.0.0.1:50770 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:56:39.410_398+00:00 [23576] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:56:39.410_402+00:00 [23576] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:56:39.410_528+00:00 [23576] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:56:39.410_532+00:00 [23576] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:56:39.410_597+00:00 [23604] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:56:39.410_600+00:00 [23604] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:56:39.410_609+00:00 [23604] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:56:39.410_620+00:00 [23604] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:56:39.410_624+00:00 [23604] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:56:39.410_644+00:00 [23604] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:56:39.410_763+00:00 [23604] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:56:39.410_776+00:00 [23604] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:56:39.410_832+00:00 [23604] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:56:39.410_836+00:00 [23604] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:56:39.410_845+00:00 [23604] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:56:45.828_971+00:00 [23604] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:56:45.828_980+00:00 [23604] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:56:45.829_061+00:00 [23604] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:56:45.829_065+00:00 [23604] [INFO] create snapshot idx 100000 log_term 1 done: 80 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:56:53.184_426+00:00 [23604] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:56:53.184_476+00:00 [23604] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:56:53.184_501+00:00 [23604] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:56:53.184_505+00:00 [23604] [INFO] create snapshot idx 200000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:57:14.738_093+00:00 [23775] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:57:14.739_497+00:00 [23775] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:57:14.739_530+00:00 [23775] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:57:14.739_535+00:00 [23775] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:57:14.739_559+00:00 [23775] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:57:14.739_563+00:00 [23775] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:57:14.739_566+00:00 [23775] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:57:14.739_597+00:00 [23775] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:57:14.739_743+00:00 [23811] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:57:16.400_864+00:00 [23782] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:57:16.400_875+00:00 [23782] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:57:16.400_889+00:00 [23782] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:57:16.400_906+00:00 [23782] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:57:16.400_913+00:00 [23782] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:57:16.400_916+00:00 [23782] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:57:16.400_934+00:00 [23782] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:57:16.400_986+00:00 [23810] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:57:16.400_994+00:00 [23810] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:57:16.401_003+00:00 [23810] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:57:36.829_986+00:00 [23782] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:57:36.830_005+00:00 [23782] [INFO] session 1 got connection from 127.0.0.1:50772 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:57:36.830_106+00:00 [23782] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:57:36.830_128+00:00 [23782] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:57:36.830_186+00:00 [23782] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:57:36.830_189+00:00 [23782] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:57:36.830_191+00:00 [23782] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:57:36.830_196+00:00 [23782] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:57:36.830_421+00:00 [23782] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50772 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:57:37.080_460+00:00 [23782] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:57:37.080_471+00:00 [23782] [INFO] session 2 got connection from 127.0.0.1:50774 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:57:37.080_547+00:00 [23782] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:57:37.080_551+00:00 [23782] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:57:37.080_673+00:00 [23782] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:57:37.080_677+00:00 [23782] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:57:37.080_738+00:00 [23810] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:57:37.080_742+00:00 [23810] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:57:37.080_750+00:00 [23810] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:57:37.080_761+00:00 [23810] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:57:37.080_764+00:00 [23810] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:57:37.080_784+00:00 [23810] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:57:37.080_877+00:00 [23810] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:57:37.080_889+00:00 [23810] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:57:37.080_945+00:00 [23810] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:57:37.080_950+00:00 [23810] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:57:37.080_959+00:00 [23810] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:57:43.585_319+00:00 [23810] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:57:43.585_371+00:00 [23810] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:57:43.585_392+00:00 [23810] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:57:43.585_396+00:00 [23810] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:57:50.979_660+00:00 [23810] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:57:50.979_670+00:00 [23810] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:57:50.979_692+00:00 [23810] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:57:50.979_695+00:00 [23810] [INFO] create snapshot idx 200000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:58:12.406_845+00:00 [23987] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:58:12.408_196+00:00 [23987] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:58:12.408_228+00:00 [23987] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:58:12.408_237+00:00 [23987] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:58:12.408_262+00:00 [23987] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:58:12.408_266+00:00 [23987] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:58:12.408_268+00:00 [23987] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:58:12.408_299+00:00 [23987] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:58:12.408_438+00:00 [24023] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:58:14.178_554+00:00 [23994] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:58:14.178_578+00:00 [23994] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:58:14.178_619+00:00 [23994] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:58:14.178_646+00:00 [23994] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:58:14.178_716+00:00 [23994] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:58:14.178_729+00:00 [23994] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:58:14.178_780+00:00 [23994] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:58:14.178_913+00:00 [24022] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:58:14.178_938+00:00 [24022] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:58:14.178_964+00:00 [24022] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:58:34.500_264+00:00 [23994] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:58:34.500_283+00:00 [23994] [INFO] session 1 got connection from 127.0.0.1:50776 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:58:34.500_380+00:00 [23994] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:58:34.500_400+00:00 [23994] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:58:34.500_457+00:00 [23994] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:58:34.500_460+00:00 [23994] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:58:34.500_462+00:00 [23994] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:58:34.500_467+00:00 [23994] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:58:34.500_688+00:00 [23994] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50776 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:58:34.750_848+00:00 [23994] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:58:34.750_859+00:00 [23994] [INFO] session 2 got connection from 127.0.0.1:50778 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:58:34.750_947+00:00 [23994] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:58:34.750_951+00:00 [23994] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:58:34.751_075+00:00 [23994] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:58:34.751_080+00:00 [23994] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:58:34.751_144+00:00 [24022] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:58:34.751_148+00:00 [24022] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:58:34.751_156+00:00 [24022] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:58:34.751_167+00:00 [24022] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:58:34.751_171+00:00 [24022] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:58:34.751_190+00:00 [24022] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:58:34.751_284+00:00 [24022] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:58:34.751_301+00:00 [24022] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:58:34.751_366+00:00 [24022] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:58:34.751_371+00:00 [24022] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:58:34.751_380+00:00 [24022] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:58:41.364_609+00:00 [24022] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:58:41.364_664+00:00 [24022] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:58:41.364_685+00:00 [24022] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:58:41.364_689+00:00 [24022] [INFO] create snapshot idx 100000 log_term 1 done: 20 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:58:48.758_338+00:00 [24022] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:58:48.758_349+00:00 [24022] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:58:48.758_372+00:00 [24022] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:58:48.758_376+00:00 [24022] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:59:10.074_633+00:00 [24208] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-28T19:59:10.076_037+00:00 [24208] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-28T19:59:10.076_078+00:00 [24208] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-28T19:59:10.076_082+00:00 [24208] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-28T19:59:10.076_106+00:00 [24208] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-28T19:59:10.076_110+00:00 [24208] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-28T19:59:10.076_113+00:00 [24208] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-28T19:59:10.076_143+00:00 [24208] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-28T19:59:10.076_293+00:00 [24244] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-28T19:59:11.544_355+00:00 [24215] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-28T19:59:11.544_365+00:00 [24215] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-28T19:59:11.544_381+00:00 [24215] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-28T19:59:11.544_396+00:00 [24215] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-28T19:59:11.544_403+00:00 [24215] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-28T19:59:11.544_406+00:00 [24215] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-28T19:59:11.544_425+00:00 [24215] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-28T19:59:11.544_475+00:00 [24243] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:59:11.544_483+00:00 [24243] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:59:11.544_493+00:00 [24243] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:59:32.165_210+00:00 [24215] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:59:32.165_229+00:00 [24215] [INFO] session 1 got connection from 127.0.0.1:50780 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:59:32.165_325+00:00 [24215] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-28T19:59:32.165_345+00:00 [24215] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:59:32.165_399+00:00 [24215] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:59:32.165_402+00:00 [24215] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-28T19:59:32.165_404+00:00 [24215] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:59:32.165_410+00:00 [24215] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:59:32.165_632+00:00 [24215] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50780 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-28T19:59:32.415_848+00:00 [24215] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-28T19:59:32.415_859+00:00 [24215] [INFO] session 2 got connection from 127.0.0.1:50782 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-28T19:59:32.415_941+00:00 [24215] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-28T19:59:32.415_944+00:00 [24215] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-28T19:59:32.416_070+00:00 [24215] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:59:32.416_075+00:00 [24215] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-28T19:59:32.416_139+00:00 [24243] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:59:32.416_142+00:00 [24243] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-28T19:59:32.416_150+00:00 [24243] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:59:32.416_161+00:00 [24243] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:59:32.416_165+00:00 [24243] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-28T19:59:32.416_185+00:00 [24243] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:59:32.416_278+00:00 [24243] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-28T19:59:32.416_295+00:00 [24243] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-28T19:59:32.416_362+00:00 [24243] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-28T19:59:32.416_367+00:00 [24243] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-28T19:59:32.416_385+00:00 [24243] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-28T19:59:39.026_610+00:00 [24243] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:59:39.026_619+00:00 [24243] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:59:39.026_720+00:00 [24243] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:59:39.026_725+00:00 [24243] [INFO] create snapshot idx 100000 log_term 1 done: 101 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-28T19:59:46.432_143+00:00 [24243] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-28T19:59:46.432_152+00:00 [24243] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-28T19:59:46.432_219+00:00 [24243] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-28T19:59:46.432_223+00:00 [24243] [INFO] create snapshot idx 200000 log_term 1 done: 66 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
