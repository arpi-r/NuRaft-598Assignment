2022-04-29T05:25:14.990_361+00:00 [47895] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:25:14.991_774+00:00 [47895] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:25:14.991_806+00:00 [47895] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:25:14.991_811+00:00 [47895] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:25:14.991_838+00:00 [47895] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:25:14.991_842+00:00 [47895] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:25:14.991_845+00:00 [47895] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:25:14.991_872+00:00 [47895] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:25:14.992_022+00:00 [47931] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:25:16.941_087+00:00 [47902] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:25:16.941_099+00:00 [47902] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:25:16.941_113+00:00 [47902] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:25:16.941_124+00:00 [47902] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:25:16.941_130+00:00 [47902] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:25:16.941_133+00:00 [47902] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:25:16.941_152+00:00 [47902] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:25:16.941_204+00:00 [47930] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:25:16.941_211+00:00 [47930] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:25:16.941_221+00:00 [47930] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:25:36.563_367+00:00 [47902] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:25:36.563_389+00:00 [47902] [INFO] session 1 got connection from 127.0.0.1:50824 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:25:36.563_489+00:00 [47902] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:25:36.563_513+00:00 [47902] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:25:36.563_577+00:00 [47902] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:25:36.563_581+00:00 [47902] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:25:36.563_583+00:00 [47902] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:25:36.563_589+00:00 [47902] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:25:36.563_836+00:00 [47902] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50824 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:25:36.813_948+00:00 [47902] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:25:36.813_959+00:00 [47902] [INFO] session 2 got connection from 127.0.0.1:50826 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:25:36.814_044+00:00 [47902] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:25:36.814_048+00:00 [47902] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:25:36.814_190+00:00 [47902] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:25:36.814_195+00:00 [47902] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:25:36.814_260+00:00 [47930] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:25:36.814_263+00:00 [47930] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:25:36.814_271+00:00 [47930] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:25:36.814_282+00:00 [47930] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:25:36.814_286+00:00 [47930] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:25:36.814_306+00:00 [47930] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:25:36.814_402+00:00 [47930] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:25:36.814_415+00:00 [47930] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:25:36.814_470+00:00 [47930] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:25:36.814_474+00:00 [47930] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:25:36.814_482+00:00 [47930] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:26:31.374_256+00:00 [48578] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:26:31.375_627+00:00 [48578] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:26:31.375_659+00:00 [48578] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:26:31.375_670+00:00 [48578] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:26:31.375_694+00:00 [48578] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:26:31.375_698+00:00 [48578] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:26:31.375_701+00:00 [48578] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:26:31.375_732+00:00 [48578] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:26:31.375_879+00:00 [48614] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:26:32.893_952+00:00 [48585] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:26:32.893_963+00:00 [48585] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:26:32.893_978+00:00 [48585] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:26:32.893_989+00:00 [48585] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:26:32.893_996+00:00 [48585] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:26:32.894_000+00:00 [48585] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:26:32.894_018+00:00 [48585] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:26:32.894_073+00:00 [48613] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:26:32.894_081+00:00 [48613] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:26:32.894_091+00:00 [48613] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:26:53.199_653+00:00 [48585] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:26:53.199_673+00:00 [48585] [INFO] session 1 got connection from 127.0.0.1:50828 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:26:53.199_774+00:00 [48585] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:26:53.199_797+00:00 [48585] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:26:53.199_853+00:00 [48585] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:26:53.199_856+00:00 [48585] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:26:53.199_858+00:00 [48585] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:26:53.199_864+00:00 [48585] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:26:53.200_103+00:00 [48585] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50828 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:26:53.450_241+00:00 [48585] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:26:53.450_253+00:00 [48585] [INFO] session 2 got connection from 127.0.0.1:50830 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:26:53.450_334+00:00 [48585] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:26:53.450_338+00:00 [48585] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:26:53.450_465+00:00 [48585] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:26:53.450_470+00:00 [48585] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:26:53.450_534+00:00 [48613] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:26:53.450_537+00:00 [48613] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:26:53.450_545+00:00 [48613] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:26:53.450_556+00:00 [48613] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:26:53.450_561+00:00 [48613] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:26:53.450_580+00:00 [48613] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:26:53.450_689+00:00 [48613] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:26:53.450_708+00:00 [48613] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:26:53.450_774+00:00 [48613] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:26:53.450_777+00:00 [48613] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:26:53.450_785+00:00 [48613] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:27:26.662_089+00:00 [48613] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:27:26.662_097+00:00 [48613] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:27:26.662_116+00:00 [48613] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:27:26.662_121+00:00 [48613] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:27:47.753_414+00:00 [49213] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:27:47.754_809+00:00 [49213] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:27:47.754_851+00:00 [49213] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:27:47.754_855+00:00 [49213] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:27:47.754_883+00:00 [49213] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:27:47.754_887+00:00 [49213] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:27:47.754_890+00:00 [49213] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:27:47.754_921+00:00 [49213] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:27:47.755_070+00:00 [49249] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:27:49.690_122+00:00 [49220] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:27:49.690_135+00:00 [49220] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:27:49.690_151+00:00 [49220] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:27:49.690_161+00:00 [49220] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:27:49.690_169+00:00 [49220] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:27:49.690_173+00:00 [49220] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:27:49.690_191+00:00 [49220] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:27:49.690_243+00:00 [49248] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:27:49.690_251+00:00 [49248] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:27:49.690_261+00:00 [49248] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:28:09.575_149+00:00 [49220] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:28:09.575_171+00:00 [49220] [INFO] session 1 got connection from 127.0.0.1:50832 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:28:09.575_280+00:00 [49220] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:28:09.575_303+00:00 [49220] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:28:09.575_365+00:00 [49220] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:28:09.575_369+00:00 [49220] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:28:09.575_371+00:00 [49220] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:28:09.575_376+00:00 [49220] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:28:09.575_619+00:00 [49220] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50832 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:28:09.825_672+00:00 [49220] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:28:09.825_683+00:00 [49220] [INFO] session 2 got connection from 127.0.0.1:50836 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:28:09.825_762+00:00 [49220] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:28:09.825_766+00:00 [49220] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:28:09.825_881+00:00 [49220] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:28:09.825_885+00:00 [49220] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:28:09.825_949+00:00 [49248] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:28:09.825_952+00:00 [49248] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:28:09.825_960+00:00 [49248] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:28:09.825_972+00:00 [49248] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:28:09.825_976+00:00 [49248] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:28:09.825_997+00:00 [49248] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:28:09.826_092+00:00 [49248] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:28:09.826_110+00:00 [49248] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:28:09.826_190+00:00 [49248] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:28:09.826_194+00:00 [49248] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:28:09.826_200+00:00 [49248] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:28:41.929_866+00:00 [49248] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:28:41.929_874+00:00 [49248] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:28:41.929_897+00:00 [49248] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:28:41.929_902+00:00 [49248] [INFO] create snapshot idx 100000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:29:04.884_994+00:00 [49750] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:29:04.886_382+00:00 [49750] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:29:04.886_421+00:00 [49750] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:29:04.886_425+00:00 [49750] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:29:04.886_455+00:00 [49750] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:29:04.886_459+00:00 [49750] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:29:04.886_463+00:00 [49750] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:29:04.886_491+00:00 [49750] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:29:04.886_658+00:00 [49786] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:29:06.113_746+00:00 [49757] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:29:06.113_757+00:00 [49757] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:29:06.113_772+00:00 [49757] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:29:06.113_788+00:00 [49757] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:29:06.113_795+00:00 [49757] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:29:06.113_798+00:00 [49757] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:29:06.113_817+00:00 [49757] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:29:06.113_873+00:00 [49785] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:29:06.113_881+00:00 [49785] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:29:06.113_891+00:00 [49785] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:29:26.457_257+00:00 [49757] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:29:26.457_278+00:00 [49757] [INFO] session 1 got connection from 127.0.0.1:50838 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:29:26.457_387+00:00 [49757] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:29:26.457_411+00:00 [49757] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:29:26.457_476+00:00 [49757] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:29:26.457_480+00:00 [49757] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:29:26.457_482+00:00 [49757] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:29:26.457_487+00:00 [49757] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:29:26.457_751+00:00 [49757] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50838 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:29:26.707_948+00:00 [49757] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:29:26.707_960+00:00 [49757] [INFO] session 2 got connection from 127.0.0.1:50840 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:29:26.708_049+00:00 [49757] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:29:26.708_054+00:00 [49757] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:29:26.708_183+00:00 [49757] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:29:26.708_188+00:00 [49757] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:29:26.708_257+00:00 [49785] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:29:26.708_260+00:00 [49785] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:29:26.708_269+00:00 [49785] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:29:26.708_280+00:00 [49785] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:29:26.708_285+00:00 [49785] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:29:26.708_306+00:00 [49785] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:29:26.708_417+00:00 [49785] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:29:26.708_435+00:00 [49785] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:29:26.708_499+00:00 [49785] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:29:26.708_505+00:00 [49785] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:29:26.708_513+00:00 [49785] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:30:38.921_832+00:00 [50417] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:30:38.923_306+00:00 [50417] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:30:38.923_340+00:00 [50417] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:30:38.923_345+00:00 [50417] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:30:38.923_373+00:00 [50417] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:30:38.923_378+00:00 [50417] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:30:38.923_381+00:00 [50417] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:30:38.923_412+00:00 [50417] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:30:38.923_575+00:00 [50453] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:30:40.452_644+00:00 [50424] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:30:40.452_656+00:00 [50424] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:30:40.452_672+00:00 [50424] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:30:40.452_690+00:00 [50424] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:30:40.452_697+00:00 [50424] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:30:40.452_700+00:00 [50424] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:30:40.452_719+00:00 [50424] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:30:40.452_777+00:00 [50452] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:30:40.452_785+00:00 [50452] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:30:40.452_795+00:00 [50452] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:31:00.485_551+00:00 [50424] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:31:00.485_572+00:00 [50424] [INFO] session 1 got connection from 127.0.0.1:50842 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:31:00.485_671+00:00 [50424] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:31:00.485_694+00:00 [50424] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:31:00.485_753+00:00 [50424] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:31:00.485_756+00:00 [50424] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:31:00.485_758+00:00 [50424] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:31:00.485_764+00:00 [50424] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:31:00.486_004+00:00 [50424] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50842 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:31:00.736_012+00:00 [50424] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:31:00.736_025+00:00 [50424] [INFO] session 2 got connection from 127.0.0.1:50844 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:31:00.736_104+00:00 [50424] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:31:00.736_108+00:00 [50424] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:31:00.736_228+00:00 [50424] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:31:00.736_233+00:00 [50424] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:31:00.736_303+00:00 [50452] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:31:00.736_307+00:00 [50452] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:31:00.736_316+00:00 [50452] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:31:00.736_330+00:00 [50452] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:31:00.736_334+00:00 [50452] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:31:00.736_357+00:00 [50452] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:31:00.736_468+00:00 [50452] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:31:00.736_484+00:00 [50452] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:31:00.736_534+00:00 [50452] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:31:00.736_538+00:00 [50452] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:31:00.736_545+00:00 [50452] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:31:56.043_250+00:00 [50861] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:31:56.044_642+00:00 [50861] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:31:56.044_676+00:00 [50861] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:31:56.044_680+00:00 [50861] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:31:56.044_706+00:00 [50861] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:31:56.044_710+00:00 [50861] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:31:56.044_713+00:00 [50861] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:31:56.044_743+00:00 [50861] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:31:56.044_898+00:00 [50897] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:31:57.682_978+00:00 [50868] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:31:57.682_992+00:00 [50868] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:31:57.683_010+00:00 [50868] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:31:57.683_023+00:00 [50868] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:31:57.683_031+00:00 [50868] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:31:57.683_037+00:00 [50868] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:31:57.683_065+00:00 [50868] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:31:57.683_125+00:00 [50896] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:31:57.683_133+00:00 [50896] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:31:57.683_146+00:00 [50896] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:32:17.615_848+00:00 [50868] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:32:17.615_869+00:00 [50868] [INFO] session 1 got connection from 127.0.0.1:50846 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:32:17.615_970+00:00 [50868] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:32:17.615_993+00:00 [50868] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:32:17.616_054+00:00 [50868] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:32:17.616_057+00:00 [50868] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:32:17.616_060+00:00 [50868] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:32:17.616_065+00:00 [50868] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:32:17.616_311+00:00 [50868] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50846 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:32:17.866_222+00:00 [50868] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:32:17.866_233+00:00 [50868] [INFO] session 2 got connection from 127.0.0.1:50848 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:32:17.866_321+00:00 [50868] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:32:17.866_325+00:00 [50868] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:32:17.866_453+00:00 [50868] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:32:17.866_457+00:00 [50868] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:32:17.866_523+00:00 [50896] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:32:17.866_526+00:00 [50896] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:32:17.866_534+00:00 [50896] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:32:17.866_545+00:00 [50896] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:32:17.866_549+00:00 [50896] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:32:17.866_570+00:00 [50896] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:32:17.866_681+00:00 [50896] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:32:17.866_699+00:00 [50896] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:32:17.866_762+00:00 [50896] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:32:17.866_773+00:00 [50896] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:32:17.866_780+00:00 [50896] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:32:51.443_836+00:00 [50896] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:32:51.443_844+00:00 [50896] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:32:51.443_862+00:00 [50896] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:32:51.443_866+00:00 [50896] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:33:12.673_295+00:00 [51217] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:33:12.674_651+00:00 [51217] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:33:12.674_720+00:00 [51217] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:33:12.674_724+00:00 [51217] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:33:12.674_753+00:00 [51217] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:33:12.674_756+00:00 [51217] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:33:12.674_759+00:00 [51217] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:33:12.674_793+00:00 [51217] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:33:12.674_951+00:00 [51253] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:33:14.355_963+00:00 [51224] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:33:14.355_974+00:00 [51224] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:33:14.355_989+00:00 [51224] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:33:14.356_000+00:00 [51224] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:33:14.356_008+00:00 [51224] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:33:14.356_011+00:00 [51224] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:33:14.356_030+00:00 [51224] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:33:14.356_081+00:00 [51252] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:33:14.356_088+00:00 [51252] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:33:14.356_098+00:00 [51252] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:33:34.238_314+00:00 [51224] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:33:34.238_337+00:00 [51224] [INFO] session 1 got connection from 127.0.0.1:50850 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:33:34.238_441+00:00 [51224] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:33:34.238_464+00:00 [51224] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:33:34.238_525+00:00 [51224] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:33:34.238_529+00:00 [51224] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:33:34.238_531+00:00 [51224] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:33:34.238_536+00:00 [51224] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:33:34.238_802+00:00 [51224] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50850 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:33:34.488_781+00:00 [51224] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:33:34.488_790+00:00 [51224] [INFO] session 2 got connection from 127.0.0.1:50852 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:33:34.488_859+00:00 [51224] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:33:34.488_862+00:00 [51224] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:33:34.488_980+00:00 [51224] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:33:34.488_984+00:00 [51224] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:33:34.489_039+00:00 [51252] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:33:34.489_042+00:00 [51252] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:33:34.489_049+00:00 [51252] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:33:34.489_058+00:00 [51252] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:33:34.489_061+00:00 [51252] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:33:34.489_078+00:00 [51252] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:33:34.489_159+00:00 [51252] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:33:34.489_169+00:00 [51252] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:33:34.489_212+00:00 [51252] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:33:34.489_215+00:00 [51252] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:33:34.489_221+00:00 [51252] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:34:06.224_264+00:00 [51252] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:34:06.224_273+00:00 [51252] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:34:06.224_295+00:00 [51252] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:34:06.224_300+00:00 [51252] [INFO] create snapshot idx 100000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:34:29.047_905+00:00 [51577] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:34:29.049_337+00:00 [51577] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:34:29.049_378+00:00 [51577] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:34:29.049_383+00:00 [51577] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:34:29.049_414+00:00 [51577] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:34:29.049_419+00:00 [51577] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:34:29.049_422+00:00 [51577] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:34:29.049_453+00:00 [51577] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:34:29.050_030+00:00 [51613] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:34:30.283_708+00:00 [51584] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:34:30.283_721+00:00 [51584] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:34:30.283_738+00:00 [51584] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:34:30.283_749+00:00 [51584] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:34:30.283_757+00:00 [51584] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:34:30.283_761+00:00 [51584] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:34:30.283_779+00:00 [51584] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:34:30.284_268+00:00 [51612] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:34:30.284_281+00:00 [51612] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:34:30.284_292+00:00 [51612] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:34:51.119_228+00:00 [51584] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:34:51.119_247+00:00 [51584] [INFO] session 1 got connection from 127.0.0.1:50854 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:34:51.119_364+00:00 [51584] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:34:51.119_388+00:00 [51584] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:34:51.119_452+00:00 [51584] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:34:51.119_456+00:00 [51584] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:34:51.119_458+00:00 [51584] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:34:51.119_464+00:00 [51584] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:34:51.119_693+00:00 [51584] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50854 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:34:51.369_985+00:00 [51584] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:34:51.369_996+00:00 [51584] [INFO] session 2 got connection from 127.0.0.1:50856 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:34:51.370_082+00:00 [51584] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:34:51.370_086+00:00 [51584] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:34:51.370_222+00:00 [51584] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:34:51.370_227+00:00 [51584] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:34:51.370_294+00:00 [51612] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:34:51.370_298+00:00 [51612] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:34:51.370_307+00:00 [51612] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:34:51.370_318+00:00 [51612] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:34:51.370_323+00:00 [51612] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:34:51.370_343+00:00 [51612] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:34:51.370_442+00:00 [51612] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:34:51.370_460+00:00 [51612] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:34:51.370_522+00:00 [51612] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:34:51.370_527+00:00 [51612] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:34:51.370_537+00:00 [51612] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:35:22.711_689+00:00 [51612] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:35:22.711_698+00:00 [51612] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:35:22.711_720+00:00 [51612] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:35:22.711_726+00:00 [51612] [INFO] create snapshot idx 100000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:35:45.935_190+00:00 [51988] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:35:45.936_559+00:00 [51988] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:35:45.936_601+00:00 [51988] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:35:45.936_605+00:00 [51988] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:35:45.936_629+00:00 [51988] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:35:45.936_633+00:00 [51988] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:35:45.936_635+00:00 [51988] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:35:45.936_671+00:00 [51988] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:35:45.936_818+00:00 [52024] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:35:47.757_858+00:00 [51995] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:35:47.757_869+00:00 [51995] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:35:47.757_884+00:00 [51995] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:35:47.757_895+00:00 [51995] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:35:47.757_901+00:00 [51995] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:35:47.757_905+00:00 [51995] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:35:47.757_923+00:00 [51995] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:35:47.757_972+00:00 [52023] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:35:47.757_980+00:00 [52023] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:35:47.757_990+00:00 [52023] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:36:07.507_493+00:00 [51995] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:36:07.507_516+00:00 [51995] [INFO] session 1 got connection from 127.0.0.1:50858 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:36:07.507_622+00:00 [51995] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:36:07.507_646+00:00 [51995] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:36:07.507_707+00:00 [51995] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:36:07.507_711+00:00 [51995] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:36:07.507_713+00:00 [51995] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:36:07.507_718+00:00 [51995] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:36:07.507_970+00:00 [51995] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50858 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:36:07.758_198+00:00 [51995] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:36:07.758_209+00:00 [51995] [INFO] session 2 got connection from 127.0.0.1:50860 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:36:07.758_294+00:00 [51995] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:36:07.758_298+00:00 [51995] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:36:07.758_427+00:00 [51995] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:36:07.758_431+00:00 [51995] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:36:07.758_499+00:00 [52023] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:36:07.758_502+00:00 [52023] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:36:07.758_511+00:00 [52023] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:36:07.758_522+00:00 [52023] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:36:07.758_526+00:00 [52023] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:36:07.758_546+00:00 [52023] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:36:07.758_646+00:00 [52023] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:36:07.758_689+00:00 [52023] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:36:07.758_757+00:00 [52023] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:36:07.758_761+00:00 [52023] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:36:07.758_767+00:00 [52023] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:36:38.515_194+00:00 [52023] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:36:38.515_205+00:00 [52023] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:36:38.515_230+00:00 [52023] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:36:38.515_236+00:00 [52023] [INFO] create snapshot idx 100000 log_term 1 done: 25 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:37:02.827_026+00:00 [52414] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:37:02.828_372+00:00 [52414] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:37:02.828_408+00:00 [52414] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:37:02.828_415+00:00 [52414] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:37:02.828_439+00:00 [52414] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:37:02.828_443+00:00 [52414] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:37:02.828_445+00:00 [52414] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:37:02.828_473+00:00 [52414] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:37:02.828_626+00:00 [52450] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:37:04.044_693+00:00 [52421] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:37:04.044_706+00:00 [52421] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:37:04.044_722+00:00 [52421] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:37:04.044_733+00:00 [52421] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:37:04.044_741+00:00 [52421] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:37:04.044_745+00:00 [52421] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:37:04.044_765+00:00 [52421] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:37:04.044_824+00:00 [52449] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:37:04.044_832+00:00 [52449] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:37:04.044_842+00:00 [52449] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:37:24.648_940+00:00 [52421] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:37:24.648_962+00:00 [52421] [INFO] session 1 got connection from 127.0.0.1:50862 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:37:24.649_069+00:00 [52421] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:37:24.649_092+00:00 [52421] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:37:24.649_152+00:00 [52421] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:37:24.649_155+00:00 [52421] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:37:24.649_157+00:00 [52421] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:37:24.649_163+00:00 [52421] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:37:24.649_426+00:00 [52421] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50862 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:37:24.899_278+00:00 [52421] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:37:24.899_289+00:00 [52421] [INFO] session 2 got connection from 127.0.0.1:50864 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:37:24.899_370+00:00 [52421] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:37:24.899_374+00:00 [52421] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:37:24.899_500+00:00 [52421] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:37:24.899_504+00:00 [52421] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:37:24.899_569+00:00 [52449] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:37:24.899_572+00:00 [52449] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:37:24.899_581+00:00 [52449] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:37:24.899_592+00:00 [52449] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:37:24.899_596+00:00 [52449] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:37:24.899_616+00:00 [52449] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:37:24.899_734+00:00 [52449] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:37:24.899_752+00:00 [52449] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:37:24.899_817+00:00 [52449] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:37:24.899_821+00:00 [52449] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:37:24.899_831+00:00 [52449] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:37:54.872_446+00:00 [52449] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:37:54.872_455+00:00 [52449] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:37:54.872_479+00:00 [52449] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:37:54.872_484+00:00 [52449] [INFO] create snapshot idx 100000 log_term 1 done: 24 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:38:19.215_166+00:00 [52852] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:38:19.216_509+00:00 [52852] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:38:19.216_544+00:00 [52852] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:38:19.216_548+00:00 [52852] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:38:19.216_572+00:00 [52852] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:38:19.216_575+00:00 [52852] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:38:19.216_579+00:00 [52852] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:38:19.216_614+00:00 [52852] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:38:19.216_760+00:00 [52888] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:38:20.902_808+00:00 [52859] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:38:20.902_816+00:00 [52859] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:38:20.902_829+00:00 [52859] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:38:20.902_840+00:00 [52859] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:38:20.902_847+00:00 [52859] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:38:20.902_850+00:00 [52859] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:38:20.902_866+00:00 [52859] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:38:20.902_923+00:00 [52887] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:38:20.902_936+00:00 [52887] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:38:20.902_946+00:00 [52887] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:38:40.536_325+00:00 [52859] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:38:40.536_348+00:00 [52859] [INFO] session 1 got connection from 127.0.0.1:50866 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:38:40.536_457+00:00 [52859] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:38:40.536_479+00:00 [52859] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:38:40.536_541+00:00 [52859] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:38:40.536_544+00:00 [52859] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:38:40.536_546+00:00 [52859] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:38:40.536_552+00:00 [52859] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:38:40.536_793+00:00 [52859] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50866 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:38:40.786_845+00:00 [52859] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:38:40.786_856+00:00 [52859] [INFO] session 2 got connection from 127.0.0.1:50868 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:38:40.786_937+00:00 [52859] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:38:40.786_941+00:00 [52859] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:38:40.787_068+00:00 [52859] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:38:40.787_072+00:00 [52859] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:38:40.787_137+00:00 [52887] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:38:40.787_140+00:00 [52887] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:38:40.787_149+00:00 [52887] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:38:40.787_160+00:00 [52887] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:38:40.787_164+00:00 [52887] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:38:40.787_185+00:00 [52887] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:38:40.787_280+00:00 [52887] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:38:40.787_297+00:00 [52887] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:38:40.787_375+00:00 [52887] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:38:40.787_381+00:00 [52887] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:38:40.787_388+00:00 [52887] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:39:12.150_668+00:00 [52887] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:39:12.150_682+00:00 [52887] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:39:12.150_711+00:00 [52887] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:39:12.150_716+00:00 [52887] [INFO] create snapshot idx 100000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:39:36.354_750+00:00 [53287] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:39:36.356_119+00:00 [53287] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:39:36.356_158+00:00 [53287] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:39:36.356_165+00:00 [53287] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:39:36.356_189+00:00 [53287] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:39:36.356_193+00:00 [53287] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:39:36.356_196+00:00 [53287] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:39:36.356_225+00:00 [53287] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:39:36.356_371+00:00 [53323] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:39:38.297_414+00:00 [53294] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:39:38.297_425+00:00 [53294] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:39:38.297_440+00:00 [53294] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:39:38.297_451+00:00 [53294] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:39:38.297_458+00:00 [53294] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:39:38.297_462+00:00 [53294] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:39:38.297_479+00:00 [53294] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:39:38.297_532+00:00 [53322] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:39:38.297_540+00:00 [53322] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:39:38.297_550+00:00 [53322] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:39:57.676_387+00:00 [53294] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:39:57.676_410+00:00 [53294] [INFO] session 1 got connection from 127.0.0.1:50870 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:39:57.676_514+00:00 [53294] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:39:57.676_534+00:00 [53294] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:39:57.676_593+00:00 [53294] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:39:57.676_596+00:00 [53294] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:39:57.676_598+00:00 [53294] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:39:57.676_604+00:00 [53294] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:39:57.676_837+00:00 [53294] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50870 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:39:57.927_075+00:00 [53294] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:39:57.927_086+00:00 [53294] [INFO] session 2 got connection from 127.0.0.1:50872 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:39:57.927_175+00:00 [53294] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:39:57.927_179+00:00 [53294] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:39:57.927_367+00:00 [53294] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:39:57.927_373+00:00 [53294] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:39:57.927_467+00:00 [53322] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:39:57.927_471+00:00 [53322] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:39:57.927_493+00:00 [53322] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:39:57.927_505+00:00 [53322] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:39:57.927_510+00:00 [53322] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:39:57.927_530+00:00 [53322] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:39:57.927_629+00:00 [53322] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:39:57.927_641+00:00 [53322] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:39:57.927_703+00:00 [53322] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:39:57.927_708+00:00 [53322] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:39:57.927_717+00:00 [53322] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:40:29.220_581+00:00 [53322] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:40:29.220_688+00:00 [53322] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:40:29.220_715+00:00 [53322] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:40:29.220_721+00:00 [53322] [INFO] create snapshot idx 100000 log_term 1 done: 25 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:40:52.994_269+00:00 [53728] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:40:52.995_675+00:00 [53728] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:40:52.995_707+00:00 [53728] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:40:52.995_715+00:00 [53728] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:40:52.995_739+00:00 [53728] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:40:52.995_743+00:00 [53728] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:40:52.995_746+00:00 [53728] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:40:52.995_778+00:00 [53728] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:40:52.995_929+00:00 [53764] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:40:54.771_981+00:00 [53735] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:40:54.771_991+00:00 [53735] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:40:54.772_005+00:00 [53735] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:40:54.772_016+00:00 [53735] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:40:54.772_022+00:00 [53735] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:40:54.772_026+00:00 [53735] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:40:54.772_043+00:00 [53735] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:40:54.772_093+00:00 [53763] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:40:54.772_101+00:00 [53763] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:40:54.772_110+00:00 [53763] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:41:14.817_668+00:00 [53735] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:41:14.817_687+00:00 [53735] [INFO] session 1 got connection from 127.0.0.1:50874 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:41:14.817_786+00:00 [53735] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:41:14.817_809+00:00 [53735] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:41:14.817_866+00:00 [53735] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:41:14.817_870+00:00 [53735] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:41:14.817_872+00:00 [53735] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:41:14.817_877+00:00 [53735] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:41:14.818_105+00:00 [53735] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50874 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:41:15.068_243+00:00 [53735] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:41:15.068_253+00:00 [53735] [INFO] session 2 got connection from 127.0.0.1:50876 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:41:15.068_335+00:00 [53735] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:41:15.068_338+00:00 [53735] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:41:15.068_465+00:00 [53735] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:41:15.068_469+00:00 [53735] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:41:15.068_533+00:00 [53763] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:41:15.068_536+00:00 [53763] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:41:15.068_544+00:00 [53763] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:41:15.068_556+00:00 [53763] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:41:15.068_560+00:00 [53763] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:41:15.068_579+00:00 [53763] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:41:15.068_677+00:00 [53763] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:41:15.068_689+00:00 [53763] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:41:15.068_745+00:00 [53763] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:41:15.068_750+00:00 [53763] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:41:15.068_758+00:00 [53763] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:41:45.849_855+00:00 [53763] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:41:45.849_931+00:00 [53763] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:41:45.849_958+00:00 [53763] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:41:45.849_963+00:00 [53763] [INFO] create snapshot idx 100000 log_term 1 done: 26 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:42:09.378_586+00:00 [54170] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:42:09.380_007+00:00 [54170] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:42:09.380_037+00:00 [54170] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:42:09.380_043+00:00 [54170] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:42:09.380_066+00:00 [54170] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:42:09.380_070+00:00 [54170] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:42:09.380_073+00:00 [54170] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:42:09.380_103+00:00 [54170] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:42:09.380_247+00:00 [54206] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:42:11.074_426+00:00 [54177] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:42:11.074_450+00:00 [54177] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:42:11.074_487+00:00 [54177] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:42:11.074_514+00:00 [54177] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:42:11.074_529+00:00 [54177] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:42:11.074_539+00:00 [54177] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:42:11.074_588+00:00 [54177] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:42:11.074_785+00:00 [54205] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:42:11.074_814+00:00 [54205] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:42:11.074_840+00:00 [54205] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:42:30.699_738+00:00 [54177] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:42:30.699_758+00:00 [54177] [INFO] session 1 got connection from 127.0.0.1:50878 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:42:30.699_856+00:00 [54177] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:42:30.699_878+00:00 [54177] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:42:30.699_935+00:00 [54177] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:42:30.699_938+00:00 [54177] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:42:30.699_940+00:00 [54177] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:42:30.699_946+00:00 [54177] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:42:30.700_187+00:00 [54177] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50878 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:42:30.951_124+00:00 [54177] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:42:30.951_135+00:00 [54177] [INFO] session 2 got connection from 127.0.0.1:50880 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:42:30.951_216+00:00 [54177] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:42:30.951_219+00:00 [54177] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:42:30.951_345+00:00 [54177] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:42:30.951_349+00:00 [54177] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:42:30.951_410+00:00 [54205] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:42:30.951_413+00:00 [54205] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:42:30.951_419+00:00 [54205] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:42:30.951_428+00:00 [54205] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:42:30.951_431+00:00 [54205] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:42:30.951_448+00:00 [54205] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:42:30.951_527+00:00 [54205] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:42:30.951_537+00:00 [54205] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:42:30.951_584+00:00 [54205] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:42:30.951_587+00:00 [54205] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:42:30.951_594+00:00 [54205] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:43:03.203_966+00:00 [54205] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:43:03.204_065+00:00 [54205] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:43:03.204_095+00:00 [54205] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:43:03.204_101+00:00 [54205] [INFO] create snapshot idx 100000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:45:21.858_555+00:00 [55056] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:45:21.859_925+00:00 [55056] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:45:21.859_957+00:00 [55056] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:45:21.859_965+00:00 [55056] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:45:21.859_990+00:00 [55056] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:45:21.859_994+00:00 [55056] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:45:21.859_997+00:00 [55056] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:45:21.860_031+00:00 [55056] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:45:21.860_177+00:00 [55092] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:45:23.432_209+00:00 [55063] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:45:23.432_220+00:00 [55063] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:45:23.432_236+00:00 [55063] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:45:23.432_247+00:00 [55063] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:45:23.432_254+00:00 [55063] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:45:23.432_258+00:00 [55063] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:45:23.432_276+00:00 [55063] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:45:23.432_327+00:00 [55091] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:45:23.432_334+00:00 [55091] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:45:23.432_344+00:00 [55091] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:45:43.921_446+00:00 [55063] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:45:43.921_466+00:00 [55063] [INFO] session 1 got connection from 127.0.0.1:50882 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:45:43.921_563+00:00 [55063] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:45:43.921_584+00:00 [55063] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:45:43.921_641+00:00 [55063] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:45:43.921_644+00:00 [55063] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:45:43.921_646+00:00 [55063] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:45:43.921_651+00:00 [55063] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:45:43.921_881+00:00 [55063] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50882 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:45:44.171_867+00:00 [55063] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:45:44.171_878+00:00 [55063] [INFO] session 2 got connection from 127.0.0.1:50884 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:45:44.171_954+00:00 [55063] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:45:44.171_957+00:00 [55063] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:45:44.172_074+00:00 [55063] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:45:44.172_079+00:00 [55063] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:45:44.172_142+00:00 [55091] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:45:44.172_146+00:00 [55091] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:45:44.172_153+00:00 [55091] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:45:44.172_165+00:00 [55091] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:45:44.172_169+00:00 [55091] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:45:44.172_188+00:00 [55091] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:45:44.172_283+00:00 [55091] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:45:44.172_300+00:00 [55091] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:45:44.172_359+00:00 [55091] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:45:44.172_363+00:00 [55091] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:45:44.172_379+00:00 [55091] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:46:38.728_140+00:00 [55485] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:46:38.729_503+00:00 [55485] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:46:38.729_535+00:00 [55485] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:46:38.729_540+00:00 [55485] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:46:38.729_567+00:00 [55485] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:46:38.729_572+00:00 [55485] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:46:38.729_574+00:00 [55485] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:46:38.729_603+00:00 [55485] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:46:38.729_754+00:00 [55521] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:46:40.672_825+00:00 [55492] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:46:40.672_832+00:00 [55492] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:46:40.672_846+00:00 [55492] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:46:40.672_856+00:00 [55492] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:46:40.672_861+00:00 [55492] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:46:40.672_864+00:00 [55492] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:46:40.672_880+00:00 [55492] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:46:40.672_922+00:00 [55520] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:46:40.672_928+00:00 [55520] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:46:40.672_937+00:00 [55520] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:47:00.053_607+00:00 [55492] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:47:00.053_630+00:00 [55492] [INFO] session 1 got connection from 127.0.0.1:50886 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:47:00.053_734+00:00 [55492] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:47:00.053_757+00:00 [55492] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:47:00.053_817+00:00 [55492] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:47:00.053_820+00:00 [55492] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:47:00.053_822+00:00 [55492] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:47:00.053_828+00:00 [55492] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:47:00.054_136+00:00 [55492] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50886 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:47:00.304_541+00:00 [55492] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:47:00.304_552+00:00 [55492] [INFO] session 2 got connection from 127.0.0.1:50888 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:47:00.304_637+00:00 [55492] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:47:00.304_640+00:00 [55492] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:47:00.304_769+00:00 [55492] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:47:00.304_773+00:00 [55492] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:47:00.304_838+00:00 [55520] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:47:00.304_841+00:00 [55520] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:47:00.304_849+00:00 [55520] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:47:00.304_862+00:00 [55520] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:47:00.304_867+00:00 [55520] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:47:00.304_891+00:00 [55520] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:47:00.305_033+00:00 [55520] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:47:00.305_052+00:00 [55520] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:47:00.305_118+00:00 [55520] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:47:00.305_123+00:00 [55520] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:47:00.305_131+00:00 [55520] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:47:34.024_495+00:00 [55520] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:47:34.024_504+00:00 [55520] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:47:34.024_523+00:00 [55520] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:47:34.024_527+00:00 [55520] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:47:55.342_916+00:00 [55858] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:47:55.344_268+00:00 [55858] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:47:55.344_312+00:00 [55858] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:47:55.344_317+00:00 [55858] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:47:55.344_339+00:00 [55858] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:47:55.344_343+00:00 [55858] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:47:55.344_346+00:00 [55858] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:47:55.344_376+00:00 [55858] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:47:55.344_523+00:00 [55894] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:47:57.347_541+00:00 [55865] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:47:57.347_550+00:00 [55865] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:47:57.347_566+00:00 [55865] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:47:57.347_576+00:00 [55865] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:47:57.347_582+00:00 [55865] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:47:57.347_586+00:00 [55865] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:47:57.347_603+00:00 [55865] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:47:57.347_651+00:00 [55893] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:47:57.347_659+00:00 [55893] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:47:57.347_669+00:00 [55893] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:48:17.418_308+00:00 [55865] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:48:17.418_328+00:00 [55865] [INFO] session 1 got connection from 127.0.0.1:50890 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:48:17.418_427+00:00 [55865] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:48:17.418_448+00:00 [55865] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:48:17.418_508+00:00 [55865] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:48:17.418_511+00:00 [55865] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:48:17.418_513+00:00 [55865] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:48:17.418_518+00:00 [55865] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:48:17.418_762+00:00 [55865] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50890 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:48:17.668_805+00:00 [55865] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:48:17.668_817+00:00 [55865] [INFO] session 2 got connection from 127.0.0.1:50892 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:48:17.668_893+00:00 [55865] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:48:17.668_897+00:00 [55865] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:48:17.669_021+00:00 [55865] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:48:17.669_025+00:00 [55865] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:48:17.669_089+00:00 [55893] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:48:17.669_092+00:00 [55893] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:48:17.669_100+00:00 [55893] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:48:17.669_111+00:00 [55893] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:48:17.669_115+00:00 [55893] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:48:17.669_135+00:00 [55893] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:48:17.669_228+00:00 [55893] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:48:17.669_241+00:00 [55893] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:48:17.669_296+00:00 [55893] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:48:17.669_301+00:00 [55893] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:48:17.669_310+00:00 [55893] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:48:49.048_935+00:00 [55893] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:48:49.048_944+00:00 [55893] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:48:49.048_962+00:00 [55893] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:48:49.048_965+00:00 [55893] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:49:12.224_838+00:00 [56254] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:49:12.226_189+00:00 [56254] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:49:12.226_224+00:00 [56254] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:49:12.226_231+00:00 [56254] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:49:12.226_255+00:00 [56254] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:49:12.226_259+00:00 [56254] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:49:12.226_262+00:00 [56254] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:49:12.226_296+00:00 [56254] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:49:12.226_440+00:00 [56290] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:49:13.733_588+00:00 [56261] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:49:13.733_598+00:00 [56261] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:49:13.733_612+00:00 [56261] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:49:13.733_622+00:00 [56261] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:49:13.733_628+00:00 [56261] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:49:13.733_632+00:00 [56261] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:49:13.733_650+00:00 [56261] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:49:13.733_698+00:00 [56289] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:49:13.733_706+00:00 [56289] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:49:13.733_716+00:00 [56289] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:49:34.049_190+00:00 [56261] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:49:34.049_210+00:00 [56261] [INFO] session 1 got connection from 127.0.0.1:50894 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:49:34.049_310+00:00 [56261] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:49:34.049_333+00:00 [56261] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:49:34.049_392+00:00 [56261] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:49:34.049_395+00:00 [56261] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:49:34.049_397+00:00 [56261] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:49:34.049_403+00:00 [56261] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:49:34.049_636+00:00 [56261] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50894 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:49:34.299_774+00:00 [56261] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:49:34.299_785+00:00 [56261] [INFO] session 2 got connection from 127.0.0.1:50896 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:49:34.299_865+00:00 [56261] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:49:34.299_869+00:00 [56261] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:49:34.299_995+00:00 [56261] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:49:34.300_000+00:00 [56261] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:49:34.300_064+00:00 [56289] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:49:34.300_067+00:00 [56289] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:49:34.300_088+00:00 [56289] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:49:34.300_103+00:00 [56289] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:49:34.300_109+00:00 [56289] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:49:34.300_133+00:00 [56289] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:49:34.300_263+00:00 [56289] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:49:34.300_281+00:00 [56289] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:49:34.300_344+00:00 [56289] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:49:34.300_349+00:00 [56289] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:49:34.300_357+00:00 [56289] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:50:06.101_017+00:00 [56289] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:50:06.101_024+00:00 [56289] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:50:06.101_042+00:00 [56289] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:50:06.101_045+00:00 [56289] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:50:29.348_837+00:00 [56625] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:50:29.350_216+00:00 [56625] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:50:29.350_249+00:00 [56625] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:50:29.350_253+00:00 [56625] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:50:29.350_277+00:00 [56625] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:50:29.350_281+00:00 [56625] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:50:29.350_285+00:00 [56625] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:50:29.350_313+00:00 [56625] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:50:29.350_461+00:00 [56661] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:50:30.996_541+00:00 [56632] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:50:30.996_551+00:00 [56632] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:50:30.996_567+00:00 [56632] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:50:30.996_585+00:00 [56632] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:50:30.996_591+00:00 [56632] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:50:30.996_595+00:00 [56632] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:50:30.996_614+00:00 [56632] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:50:30.996_664+00:00 [56660] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:50:30.996_672+00:00 [56660] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:50:30.996_683+00:00 [56660] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:50:51.412_289+00:00 [56632] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:50:51.412_310+00:00 [56632] [INFO] session 1 got connection from 127.0.0.1:50898 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:50:51.412_412+00:00 [56632] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:50:51.412_434+00:00 [56632] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:50:51.412_494+00:00 [56632] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:50:51.412_497+00:00 [56632] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:50:51.412_500+00:00 [56632] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:50:51.412_505+00:00 [56632] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:50:51.412_746+00:00 [56632] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50898 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:50:51.662_990+00:00 [56632] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:50:51.663_003+00:00 [56632] [INFO] session 2 got connection from 127.0.0.1:50900 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:50:51.663_086+00:00 [56632] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:50:51.663_090+00:00 [56632] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:50:51.663_215+00:00 [56632] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:50:51.663_219+00:00 [56632] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:50:51.663_284+00:00 [56660] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:50:51.663_287+00:00 [56660] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:50:51.663_296+00:00 [56660] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:50:51.663_307+00:00 [56660] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:50:51.663_312+00:00 [56660] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:50:51.663_331+00:00 [56660] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:50:51.663_424+00:00 [56660] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:50:51.663_436+00:00 [56660] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:50:51.663_493+00:00 [56660] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:50:51.663_497+00:00 [56660] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:50:51.663_505+00:00 [56660] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:51:21.407_670+00:00 [56660] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:51:21.407_678+00:00 [56660] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:51:21.407_699+00:00 [56660] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:51:21.407_703+00:00 [56660] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:51:45.982_449+00:00 [57011] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:51:45.983_822+00:00 [57011] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:51:45.983_857+00:00 [57011] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:51:45.983_861+00:00 [57011] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:51:45.983_886+00:00 [57011] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:51:45.983_890+00:00 [57011] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:51:45.983_893+00:00 [57011] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:51:45.983_923+00:00 [57011] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:51:45.984_071+00:00 [57047] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:51:47.462_108+00:00 [57018] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:51:47.462_118+00:00 [57018] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:51:47.462_133+00:00 [57018] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:51:47.462_143+00:00 [57018] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:51:47.462_150+00:00 [57018] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:51:47.462_154+00:00 [57018] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:51:47.462_172+00:00 [57018] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:51:47.462_221+00:00 [57046] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:51:47.462_230+00:00 [57046] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:51:47.462_239+00:00 [57046] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:52:08.059_355+00:00 [57018] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:52:08.059_375+00:00 [57018] [INFO] session 1 got connection from 127.0.0.1:50902 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:52:08.059_477+00:00 [57018] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:52:08.059_501+00:00 [57018] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:52:08.059_565+00:00 [57018] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:52:08.059_568+00:00 [57018] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:52:08.059_570+00:00 [57018] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:52:08.059_575+00:00 [57018] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:52:08.059_819+00:00 [57018] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50902 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:52:08.309_911+00:00 [57018] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:52:08.309_923+00:00 [57018] [INFO] session 2 got connection from 127.0.0.1:50904 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:52:08.310_003+00:00 [57018] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:52:08.310_007+00:00 [57018] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:52:08.310_131+00:00 [57018] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:52:08.310_135+00:00 [57018] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:52:08.310_200+00:00 [57046] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:52:08.310_203+00:00 [57046] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:52:08.310_211+00:00 [57046] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:52:08.310_222+00:00 [57046] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:52:08.310_226+00:00 [57046] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:52:08.310_246+00:00 [57046] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:52:08.310_344+00:00 [57046] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:52:08.310_362+00:00 [57046] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:52:08.310_424+00:00 [57046] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:52:08.310_428+00:00 [57046] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:52:08.310_434+00:00 [57046] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:52:38.369_860+00:00 [57046] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:52:38.369_873+00:00 [57046] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:52:38.369_989+00:00 [57046] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:52:38.369_996+00:00 [57046] [INFO] create snapshot idx 100000 log_term 1 done: 117 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:53:02.871_520+00:00 [57455] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:53:02.872_906+00:00 [57455] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:53:02.872_943+00:00 [57455] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:53:02.872_947+00:00 [57455] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:53:02.872_974+00:00 [57455] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:53:02.872_977+00:00 [57455] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:53:02.872_980+00:00 [57455] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:53:02.873_008+00:00 [57455] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:53:02.873_157+00:00 [57491] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:53:04.111_348+00:00 [57462] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:53:04.111_372+00:00 [57462] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:53:04.111_409+00:00 [57462] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:53:04.111_435+00:00 [57462] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:53:04.111_450+00:00 [57462] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:53:04.111_460+00:00 [57462] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:53:04.111_509+00:00 [57462] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:53:04.111_642+00:00 [57490] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:53:04.111_668+00:00 [57490] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:53:04.111_694+00:00 [57490] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:53:24.196_792+00:00 [57462] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:53:24.196_813+00:00 [57462] [INFO] session 1 got connection from 127.0.0.1:50906 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:53:24.196_919+00:00 [57462] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:53:24.196_939+00:00 [57462] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:53:24.196_999+00:00 [57462] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:53:24.197_002+00:00 [57462] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:53:24.197_004+00:00 [57462] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:53:24.197_010+00:00 [57462] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:53:24.197_242+00:00 [57462] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50906 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:53:24.447_331+00:00 [57462] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:53:24.447_343+00:00 [57462] [INFO] session 2 got connection from 127.0.0.1:50908 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:53:24.447_428+00:00 [57462] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:53:24.447_432+00:00 [57462] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:53:24.447_559+00:00 [57462] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:53:24.447_563+00:00 [57462] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:53:24.447_626+00:00 [57490] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:53:24.447_630+00:00 [57490] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:53:24.447_638+00:00 [57490] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:53:24.447_650+00:00 [57490] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:53:24.447_654+00:00 [57490] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:53:24.447_672+00:00 [57490] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:53:24.447_766+00:00 [57490] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:53:24.447_798+00:00 [57490] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:53:24.447_869+00:00 [57490] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:53:24.447_873+00:00 [57490] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:53:24.447_880+00:00 [57490] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:53:55.560_376+00:00 [57490] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:53:55.560_389+00:00 [57490] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:53:55.560_414+00:00 [57490] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:53:55.560_420+00:00 [57490] [INFO] create snapshot idx 100000 log_term 1 done: 25 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:54:19.760_025+00:00 [57887] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:54:19.761_393+00:00 [57887] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:54:19.761_427+00:00 [57887] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:54:19.761_434+00:00 [57887] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:54:19.761_459+00:00 [57887] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:54:19.761_463+00:00 [57887] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:54:19.761_465+00:00 [57887] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:54:19.761_495+00:00 [57887] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:54:19.761_639+00:00 [57923] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:54:21.384_703+00:00 [57894] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:54:21.384_714+00:00 [57894] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:54:21.384_728+00:00 [57894] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:54:21.384_738+00:00 [57894] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:54:21.384_745+00:00 [57894] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:54:21.384_749+00:00 [57894] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:54:21.384_767+00:00 [57894] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:54:21.384_818+00:00 [57922] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:54:21.384_827+00:00 [57922] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:54:21.384_836+00:00 [57922] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:54:41.085_712+00:00 [57894] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:54:41.085_733+00:00 [57894] [INFO] session 1 got connection from 127.0.0.1:50910 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:54:41.085_836+00:00 [57894] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:54:41.085_859+00:00 [57894] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:54:41.085_918+00:00 [57894] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:54:41.085_922+00:00 [57894] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:54:41.085_923+00:00 [57894] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:54:41.085_929+00:00 [57894] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:54:41.086_170+00:00 [57894] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50910 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:54:41.336_249+00:00 [57894] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:54:41.336_260+00:00 [57894] [INFO] session 2 got connection from 127.0.0.1:50912 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:54:41.336_335+00:00 [57894] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:54:41.336_339+00:00 [57894] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:54:41.336_462+00:00 [57894] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:54:41.336_466+00:00 [57894] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:54:41.336_529+00:00 [57922] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:54:41.336_532+00:00 [57922] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:54:41.336_540+00:00 [57922] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:54:41.336_551+00:00 [57922] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:54:41.336_555+00:00 [57922] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:54:41.336_573+00:00 [57922] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:54:41.336_698+00:00 [57922] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:54:41.336_712+00:00 [57922] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:54:41.336_759+00:00 [57922] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:54:41.336_763+00:00 [57922] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:54:41.336_770+00:00 [57922] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:55:12.206_108+00:00 [57922] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:55:12.206_119+00:00 [57922] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:55:12.206_145+00:00 [57922] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:55:12.206_150+00:00 [57922] [INFO] create snapshot idx 100000 log_term 1 done: 25 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:55:36.148_838+00:00 [58310] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:55:36.150_199+00:00 [58310] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:55:36.150_231+00:00 [58310] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:55:36.150_236+00:00 [58310] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:55:36.150_256+00:00 [58310] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:55:36.150_260+00:00 [58310] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:55:36.150_263+00:00 [58310] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:55:36.150_297+00:00 [58310] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:55:36.150_449+00:00 [58346] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:55:37.716_575+00:00 [58317] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:55:37.716_586+00:00 [58317] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:55:37.716_602+00:00 [58317] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:55:37.716_612+00:00 [58317] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:55:37.716_618+00:00 [58317] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:55:37.716_622+00:00 [58317] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:55:37.716_640+00:00 [58317] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:55:37.716_689+00:00 [58345] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:55:37.716_697+00:00 [58345] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:55:37.716_707+00:00 [58345] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:55:57.724_746+00:00 [58317] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:55:57.724_767+00:00 [58317] [INFO] session 1 got connection from 127.0.0.1:50914 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:55:57.724_864+00:00 [58317] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:55:57.724_888+00:00 [58317] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:55:57.724_949+00:00 [58317] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:55:57.724_952+00:00 [58317] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:55:57.724_954+00:00 [58317] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:55:57.724_959+00:00 [58317] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:55:57.725_204+00:00 [58317] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50914 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:55:57.975_215+00:00 [58317] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:55:57.975_226+00:00 [58317] [INFO] session 2 got connection from 127.0.0.1:50916 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:55:57.975_303+00:00 [58317] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:55:57.975_307+00:00 [58317] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:55:57.975_432+00:00 [58317] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:55:57.975_436+00:00 [58317] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:55:57.975_499+00:00 [58345] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:55:57.975_503+00:00 [58345] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:55:57.975_511+00:00 [58345] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:55:57.975_522+00:00 [58345] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:55:57.975_526+00:00 [58345] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:55:57.975_545+00:00 [58345] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:55:57.975_641+00:00 [58345] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:55:57.975_654+00:00 [58345] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:55:57.975_711+00:00 [58345] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:55:57.975_716+00:00 [58345] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:55:57.975_724+00:00 [58345] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:56:29.701_855+00:00 [58345] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:56:29.701_949+00:00 [58345] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:56:29.701_977+00:00 [58345] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:56:29.701_982+00:00 [58345] [INFO] create snapshot idx 100000 log_term 1 done: 27 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:56:53.272_923+00:00 [58760] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:56:53.274_304+00:00 [58760] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:56:53.274_336+00:00 [58760] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:56:53.274_339+00:00 [58760] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:56:53.274_363+00:00 [58760] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:56:53.274_367+00:00 [58760] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:56:53.274_370+00:00 [58760] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:56:53.274_400+00:00 [58760] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:56:53.274_546+00:00 [58796] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:56:55.259_594+00:00 [58767] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:56:55.259_607+00:00 [58767] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:56:55.259_624+00:00 [58767] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:56:55.259_641+00:00 [58767] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:56:55.259_647+00:00 [58767] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:56:55.259_651+00:00 [58767] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:56:55.259_669+00:00 [58767] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:56:55.259_721+00:00 [58795] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:56:55.259_729+00:00 [58795] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:56:55.259_739+00:00 [58795] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:57:14.848_868+00:00 [58767] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:57:14.848_889+00:00 [58767] [INFO] session 1 got connection from 127.0.0.1:50918 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:57:14.848_985+00:00 [58767] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:57:14.849_006+00:00 [58767] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:57:14.849_064+00:00 [58767] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:57:14.849_067+00:00 [58767] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:57:14.849_069+00:00 [58767] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:57:14.849_074+00:00 [58767] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:57:14.849_316+00:00 [58767] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50918 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:57:15.099_051+00:00 [58767] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:57:15.099_060+00:00 [58767] [INFO] session 2 got connection from 127.0.0.1:50920 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:57:15.099_141+00:00 [58767] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:57:15.099_144+00:00 [58767] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:57:15.099_268+00:00 [58767] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:57:15.099_272+00:00 [58767] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:57:15.099_337+00:00 [58795] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:57:15.099_340+00:00 [58795] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:57:15.099_348+00:00 [58795] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:57:15.099_359+00:00 [58795] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:57:15.099_363+00:00 [58795] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:57:15.099_382+00:00 [58795] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:57:15.099_476+00:00 [58795] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:57:15.099_489+00:00 [58795] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:57:15.099_547+00:00 [58795] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:57:15.099_552+00:00 [58795] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:57:15.099_561+00:00 [58795] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:57:46.294_740+00:00 [58795] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-29T05:57:46.294_810+00:00 [58795] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-29T05:57:46.294_984+00:00 [58795] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-29T05:57:46.294_990+00:00 [58795] [INFO] create snapshot idx 100000 log_term 1 done: 173 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-29T05:59:05.633_440+00:00 [59412] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T05:59:05.635_527+00:00 [59412] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T05:59:05.635_560+00:00 [59412] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T05:59:05.635_567+00:00 [59412] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T05:59:05.635_591+00:00 [59412] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T05:59:05.635_596+00:00 [59412] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T05:59:05.635_599+00:00 [59412] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T05:59:05.635_629+00:00 [59412] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T05:59:05.636_115+00:00 [59448] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T05:59:07.308_779+00:00 [59419] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:59:07.308_786+00:00 [59419] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:59:07.308_800+00:00 [59419] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:59:07.308_809+00:00 [59419] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T05:59:07.308_814+00:00 [59419] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T05:59:07.308_817+00:00 [59419] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T05:59:07.308_833+00:00 [59419] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T05:59:07.308_874+00:00 [59447] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:59:07.308_881+00:00 [59447] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:59:07.308_889+00:00 [59447] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:59:26.959_708+00:00 [59419] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:59:26.959_730+00:00 [59419] [INFO] session 1 got connection from 127.0.0.1:50922 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:59:26.959_834+00:00 [59419] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T05:59:26.959_855+00:00 [59419] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:59:26.959_913+00:00 [59419] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:59:26.959_916+00:00 [59419] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T05:59:26.959_917+00:00 [59419] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:59:26.959_922+00:00 [59419] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:59:26.960_148+00:00 [59419] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50922 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:59:27.210_269+00:00 [59419] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:59:27.210_282+00:00 [59419] [INFO] session 2 got connection from 127.0.0.1:50924 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:59:27.210_372+00:00 [59419] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T05:59:27.210_377+00:00 [59419] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T05:59:27.210_508+00:00 [59419] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:59:27.210_511+00:00 [59419] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:59:27.210_565+00:00 [59447] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:59:27.210_568+00:00 [59447] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T05:59:27.210_574+00:00 [59447] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:59:27.210_583+00:00 [59447] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:59:27.210_587+00:00 [59447] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T05:59:27.210_604+00:00 [59447] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:59:27.210_801+00:00 [59447] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:59:27.210_812+00:00 [59447] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:59:27.210_856+00:00 [59447] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T05:59:27.210_858+00:00 [59447] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T05:59:27.210_863+00:00 [59447] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T05:59:57.856_142+00:00 [59419] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50924 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T05:59:59.135_106+00:00 [59419] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T05:59:59.135_137+00:00 [59419] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T05:59:59.135_144+00:00 [59419] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T05:59:59.135_200+00:00 [59419] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T05:59:59.135_252+00:00 [59419] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 46291, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T05:59:59.135_650+00:00 [59435] [INFO] 0x7f4224002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T05:59:59.135_833+00:00 [59435] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T05:59:59.135_895+00:00 [59435] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T05:59:59.473_513+00:00 [59435] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T05:59:59.473_527+00:00 [59435] [INFO] session 3 got connection from 127.0.0.1:50926 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T05:59:59.473_640+00:00 [59435] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 46291 / mine 46291, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T05:59:59.473_648+00:00 [59435] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T05:59:59.473_776+00:00 [59435] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T05:59:59.473_797+00:00 [59435] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T05:59:59.473_808+00:00 [59435] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 46291 / mine 46291, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T05:59:59.473_822+00:00 [59435] [INFO] decision: O (grant), voted_for 3, term 2	[handle_vote.cxx:337, handle_vote_req()]
2022-04-29T05:59:59.474_041+00:00 [59434] [INFO] receive a config change from leader at 46292	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T05:59:59.474_268+00:00 [59447] [INFO] config at index 46292 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T05:59:59.474_290+00:00 [59447] [INFO] new config log idx 46292, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T05:59:59.474_306+00:00 [59447] [INFO] new configuration: log idx 46292, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 3, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:00:22.755_559+00:00 [59843] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:00:22.756_932+00:00 [59843] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:00:22.756_963+00:00 [59843] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:00:22.756_972+00:00 [59843] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:00:22.756_996+00:00 [59843] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:00:22.757_000+00:00 [59843] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:00:22.757_003+00:00 [59843] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:00:22.757_032+00:00 [59843] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:00:22.757_174+00:00 [59879] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:00:24.605_217+00:00 [59850] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:00:24.605_227+00:00 [59850] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:00:24.605_241+00:00 [59850] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:00:24.605_251+00:00 [59850] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:00:24.605_257+00:00 [59850] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:00:24.605_261+00:00 [59850] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:00:24.605_279+00:00 [59850] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:00:24.605_327+00:00 [59878] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:00:24.605_335+00:00 [59878] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:00:24.605_344+00:00 [59878] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:00:44.581_399+00:00 [59850] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:00:44.581_418+00:00 [59850] [INFO] session 1 got connection from 127.0.0.1:50928 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:00:44.581_517+00:00 [59850] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:00:44.581_540+00:00 [59850] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:00:44.581_600+00:00 [59850] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:00:44.581_603+00:00 [59850] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:00:44.581_605+00:00 [59850] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:00:44.581_611+00:00 [59850] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:00:44.581_838+00:00 [59850] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50928 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:00:44.832_429+00:00 [59850] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:00:44.832_438+00:00 [59850] [INFO] session 2 got connection from 127.0.0.1:50930 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:00:44.832_513+00:00 [59850] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:00:44.832_517+00:00 [59850] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:00:44.832_638+00:00 [59850] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:00:44.832_642+00:00 [59850] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:00:44.832_705+00:00 [59878] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:00:44.832_708+00:00 [59878] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:00:44.832_716+00:00 [59878] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:00:44.832_726+00:00 [59878] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:00:44.832_730+00:00 [59878] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:00:44.832_751+00:00 [59878] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:00:44.832_844+00:00 [59878] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:00:44.832_857+00:00 [59878] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:00:44.832_916+00:00 [59878] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:00:44.832_921+00:00 [59878] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:00:44.832_929+00:00 [59878] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:01:10.960_675+00:00 [59848] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50930 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:01:12.154_249+00:00 [59848] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:01:12.154_285+00:00 [59848] [INFO] session 3 got connection from 127.0.0.1:50932 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:01:12.154_382+00:00 [59848] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 46286 / mine 46286, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:01:12.154_390+00:00 [59848] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:01:12.799_316+00:00 [59848] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:01:12.799_347+00:00 [59848] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:01:12.799_355+00:00 [59848] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:01:12.799_445+00:00 [59848] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:01:12.799_486+00:00 [59848] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 46286, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:01:12.799_897+00:00 [59848] [INFO] 0x7fbccc360db0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:01:12.800_084+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:12.800_147+00:00 [59848] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:01:12.800_150+00:00 [59848] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:01:12.800_152+00:00 [59848] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:01:12.800_165+00:00 [59848] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 46286, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:01:12.800_324+00:00 [59848] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:01:12.800_328+00:00 [59848] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:01:12.800_335+00:00 [59848] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:01:12.800_339+00:00 [59848] [INFO] state machine commit index 46286, precommit index 46286, last log index 46286	[raft_server.cxx:953, become_leader()]
2022-04-29T06:01:12.800_376+00:00 [59848] [INFO] [BECOME LEADER] appended new config at 46287	[raft_server.cxx:993, become_leader()]
2022-04-29T06:01:12.800_448+00:00 [59848] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:01:12.800_709+00:00 [59878] [INFO] config at index 46287 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:01:12.800_729+00:00 [59878] [INFO] new config log idx 46287, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:01:12.800_742+00:00 [59878] [INFO] new configuration: log idx 46287, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:01:12.800_853+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:13.300_804+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:13.851_262+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:14.451_204+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:15.101_351+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:15.801_983+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:16.551_824+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:17.301_976+00:00 [59848] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:18.052_570+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:18.802_519+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:19.552_599+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:20.302_801+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:21.053_206+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:21.803_536+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:22.553_458+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:23.303_618+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:24.054_148+00:00 [59852] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:01:39.626_849+00:00 [60314] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:01:39.628_189+00:00 [60314] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:01:39.628_219+00:00 [60314] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:01:39.628_228+00:00 [60314] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:01:39.628_251+00:00 [60314] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:01:39.628_255+00:00 [60314] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:01:39.628_258+00:00 [60314] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:01:39.628_288+00:00 [60314] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:01:39.628_426+00:00 [60350] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:01:41.146_496+00:00 [60321] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:01:41.146_507+00:00 [60321] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:01:41.146_521+00:00 [60321] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:01:41.146_532+00:00 [60321] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:01:41.146_538+00:00 [60321] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:01:41.146_541+00:00 [60321] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:01:41.146_559+00:00 [60321] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:01:41.146_610+00:00 [60349] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:01:41.146_618+00:00 [60349] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:01:41.146_629+00:00 [60349] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:02:01.702_522+00:00 [60321] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:02:01.702_541+00:00 [60321] [INFO] session 1 got connection from 127.0.0.1:50934 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:02:01.702_641+00:00 [60321] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:02:01.702_680+00:00 [60321] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:02:01.702_743+00:00 [60321] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:02:01.702_747+00:00 [60321] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:02:01.702_749+00:00 [60321] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:02:01.702_754+00:00 [60321] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:02:01.702_971+00:00 [60321] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50934 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:02:01.953_660+00:00 [60321] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:02:01.953_671+00:00 [60321] [INFO] session 2 got connection from 127.0.0.1:50936 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:02:01.953_751+00:00 [60321] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:02:01.953_755+00:00 [60321] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:02:01.953_879+00:00 [60321] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:02:01.953_883+00:00 [60321] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:02:01.953_946+00:00 [60349] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:02:01.953_950+00:00 [60349] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:02:01.953_958+00:00 [60349] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:02:01.953_969+00:00 [60349] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:02:01.953_973+00:00 [60349] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:02:01.953_991+00:00 [60349] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:02:01.954_086+00:00 [60349] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:02:01.954_099+00:00 [60349] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:02:01.954_157+00:00 [60349] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:02:01.954_162+00:00 [60349] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:02:01.954_171+00:00 [60349] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:02:27.189_192+00:00 [60341] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50936 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:02:28.302_993+00:00 [60341] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:02:28.303_024+00:00 [60341] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:02:28.303_032+00:00 [60341] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:02:28.303_108+00:00 [60341] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:02:28.303_160+00:00 [60341] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 46081, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:02:28.303_574+00:00 [60341] [INFO] 0x7feebc002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:02:28.303_770+00:00 [60341] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:02:28.303_834+00:00 [60341] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:02:29.003_880+00:00 [60341] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:02:29.003_895+00:00 [60341] [INFO] session 3 got connection from 127.0.0.1:50938 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:02:29.003_977+00:00 [60341] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 46081 / mine 46081, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:02:29.003_985+00:00 [60341] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:02:29.004_135+00:00 [60341] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:02:29.004_158+00:00 [60341] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:02:29.004_170+00:00 [60341] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 46081 / mine 46081, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:02:29.004_184+00:00 [60341] [INFO] decision: O (grant), voted_for 3, term 2	[handle_vote.cxx:337, handle_vote_req()]
2022-04-29T06:02:29.004_384+00:00 [60341] [INFO] receive a config change from leader at 46082	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:02:29.004_677+00:00 [60349] [INFO] config at index 46082 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:02:29.004_701+00:00 [60349] [INFO] new config log idx 46082, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:02:29.004_716+00:00 [60349] [INFO] new configuration: log idx 46082, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 3, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:02:56.499_762+00:00 [60770] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:02:56.501_098+00:00 [60770] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:02:56.501_129+00:00 [60770] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:02:56.501_135+00:00 [60770] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:02:56.501_159+00:00 [60770] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:02:56.501_163+00:00 [60770] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:02:56.501_165+00:00 [60770] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:02:56.501_199+00:00 [60770] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:02:56.501_348+00:00 [60806] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:02:58.534_404+00:00 [60777] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:02:58.534_414+00:00 [60777] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:02:58.534_428+00:00 [60777] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:02:58.534_444+00:00 [60777] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:02:58.534_451+00:00 [60777] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:02:58.534_454+00:00 [60777] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:02:58.534_472+00:00 [60777] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:02:58.534_524+00:00 [60805] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:02:58.534_532+00:00 [60805] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:02:58.534_541+00:00 [60805] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:03:18.071_673+00:00 [60777] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:03:18.071_703+00:00 [60777] [INFO] session 1 got connection from 127.0.0.1:50940 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:03:18.071_822+00:00 [60777] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:03:18.071_850+00:00 [60777] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:03:18.071_922+00:00 [60777] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:03:18.071_926+00:00 [60777] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:03:18.071_928+00:00 [60777] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:03:18.071_933+00:00 [60777] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:03:18.072_257+00:00 [60777] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50940 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:03:18.322_182+00:00 [60777] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:03:18.322_192+00:00 [60777] [INFO] session 2 got connection from 127.0.0.1:50942 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:03:18.322_271+00:00 [60777] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:03:18.322_274+00:00 [60777] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:03:18.322_399+00:00 [60777] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:03:18.322_403+00:00 [60777] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:03:18.322_469+00:00 [60805] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:03:18.322_472+00:00 [60805] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:03:18.322_481+00:00 [60805] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:03:18.322_491+00:00 [60805] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:03:18.322_496+00:00 [60805] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:03:18.322_516+00:00 [60805] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:03:18.322_610+00:00 [60805] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:03:18.322_623+00:00 [60805] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:03:18.322_697+00:00 [60805] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:03:18.322_702+00:00 [60805] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:03:18.322_711+00:00 [60805] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:03:44.048_259+00:00 [60804] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50942 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:03:45.226_770+00:00 [60804] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:03:45.226_787+00:00 [60804] [INFO] session 3 got connection from 127.0.0.1:50944 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:03:45.226_904+00:00 [60804] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 45775 / mine 45780, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:03:45.226_912+00:00 [60804] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:03:45.474_740+00:00 [60804] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:03:45.474_768+00:00 [60804] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:03:45.474_776+00:00 [60804] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:03:45.474_848+00:00 [60804] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:03:45.474_887+00:00 [60804] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 45780, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:03:45.475_245+00:00 [60804] [INFO] 0x7f0f402ab4f0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:03:45.475_431+00:00 [60804] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:45.475_502+00:00 [60804] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:03:45.475_505+00:00 [60804] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:03:45.475_507+00:00 [60804] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:03:45.475_521+00:00 [60804] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 45780, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:03:45.475_696+00:00 [60804] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:03:45.475_699+00:00 [60804] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:03:45.475_707+00:00 [60804] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:03:45.475_711+00:00 [60804] [INFO] state machine commit index 45779, precommit index 45780, last log index 45780	[raft_server.cxx:953, become_leader()]
2022-04-29T06:03:45.475_751+00:00 [60804] [INFO] [BECOME LEADER] appended new config at 45781	[raft_server.cxx:993, become_leader()]
2022-04-29T06:03:45.475_836+00:00 [60804] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:03:45.475_903+00:00 [60795] [WARN] declined append: peer 3, prev next log idx 45781, resp next 45776, new next log idx 45776	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:03:45.476_349+00:00 [60805] [INFO] config at index 45781 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:03:45.476_365+00:00 [60805] [INFO] new config log idx 45781, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:03:45.476_374+00:00 [60805] [INFO] new configuration: log idx 45781, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:03:45.476_471+00:00 [60795] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:45.976_223+00:00 [60795] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:46.526_277+00:00 [60802] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:47.126_610+00:00 [60802] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:47.777_059+00:00 [60802] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:48.477_203+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:49.227_355+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:49.977_920+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:50.728_004+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:51.478_318+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:52.228_337+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:52.978_517+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:53.728_958+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:54.478_945+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:55.229_137+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:55.979_624+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:56.729_599+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:57.479_731+00:00 [60776] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:03:58.229_925+00:00 [60776] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:04:13.622_762+00:00 [61217] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:04:13.624_154+00:00 [61217] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:04:13.624_192+00:00 [61217] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:04:13.624_197+00:00 [61217] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:04:13.624_223+00:00 [61217] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:04:13.624_227+00:00 [61217] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:04:13.624_230+00:00 [61217] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:04:13.624_259+00:00 [61217] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:04:13.624_408+00:00 [61253] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:04:14.775_450+00:00 [61224] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:04:14.775_462+00:00 [61224] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:04:14.775_476+00:00 [61224] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:04:14.775_487+00:00 [61224] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:04:14.775_493+00:00 [61224] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:04:14.775_497+00:00 [61224] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:04:14.775_515+00:00 [61224] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:04:14.775_566+00:00 [61252] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:04:14.775_574+00:00 [61252] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:04:14.775_583+00:00 [61252] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:04:34.948_543+00:00 [61224] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:04:34.948_562+00:00 [61224] [INFO] session 1 got connection from 127.0.0.1:50946 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:04:34.948_659+00:00 [61224] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:04:34.948_682+00:00 [61224] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:04:34.948_738+00:00 [61224] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:04:34.948_742+00:00 [61224] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:04:34.948_744+00:00 [61224] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:04:34.948_749+00:00 [61224] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:04:34.948_983+00:00 [61224] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50946 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:04:35.199_441+00:00 [61224] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:04:35.199_454+00:00 [61224] [INFO] session 2 got connection from 127.0.0.1:50948 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:04:35.199_538+00:00 [61224] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:04:35.199_542+00:00 [61224] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:04:35.199_673+00:00 [61224] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:04:35.199_677+00:00 [61224] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:04:35.199_742+00:00 [61252] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:04:35.199_745+00:00 [61252] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:04:35.199_753+00:00 [61252] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:04:35.199_764+00:00 [61252] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:04:35.199_768+00:00 [61252] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:04:35.199_787+00:00 [61252] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:04:35.199_881+00:00 [61252] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:04:35.199_893+00:00 [61252] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:04:35.199_952+00:00 [61252] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:04:35.199_956+00:00 [61252] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:04:35.199_965+00:00 [61252] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:05:00.598_787+00:00 [61235] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50948 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:05:01.947_537+00:00 [61235] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:05:01.947_553+00:00 [61235] [INFO] session 3 got connection from 127.0.0.1:50950 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:05:01.947_672+00:00 [61235] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 44651 / mine 44654, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:05:01.947_680+00:00 [61235] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:05:02.379_212+00:00 [61246] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:05:02.379_243+00:00 [61246] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:05:02.379_250+00:00 [61246] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:05:02.379_326+00:00 [61246] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:05:02.379_366+00:00 [61246] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 44654, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:05:02.379_809+00:00 [61246] [INFO] 0x7fa8fc58bc70 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:05:02.380_003+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:02.380_069+00:00 [61246] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:05:02.380_072+00:00 [61246] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:05:02.380_073+00:00 [61246] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:05:02.380_085+00:00 [61246] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 44654, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:05:02.380_263+00:00 [61246] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:05:02.380_267+00:00 [61246] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:05:02.380_275+00:00 [61246] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:05:02.380_279+00:00 [61246] [INFO] state machine commit index 44652, precommit index 44654, last log index 44654	[raft_server.cxx:953, become_leader()]
2022-04-29T06:05:02.380_328+00:00 [61246] [INFO] [BECOME LEADER] appended new config at 44655	[raft_server.cxx:993, become_leader()]
2022-04-29T06:05:02.380_423+00:00 [61246] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:05:02.380_480+00:00 [61246] [WARN] declined append: peer 3, prev next log idx 44655, resp next 44652, new next log idx 44652	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:05:02.380_831+00:00 [61252] [INFO] config at index 44655 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:05:02.380_853+00:00 [61252] [INFO] new config log idx 44655, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:05:02.380_869+00:00 [61252] [INFO] new configuration: log idx 44655, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:05:02.380_973+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:02.881_324+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:03.431_103+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:04.031_278+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:04.681_434+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:05.381_736+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:06.131_744+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:06.881_902+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:07.632_025+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:08.382_195+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:09.132_376+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:09.882_562+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:10.632_702+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:11.382_908+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:12.133_173+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:12.883_346+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:13.633_513+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:14.383_626+00:00 [61246] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:05:15.133_829+00:00 [61246] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:05:30.746_791+00:00 [61679] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:05:30.748_177+00:00 [61679] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:05:30.748_208+00:00 [61679] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:05:30.748_216+00:00 [61679] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:05:30.748_240+00:00 [61679] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:05:30.748_244+00:00 [61679] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:05:30.748_247+00:00 [61679] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:05:30.748_281+00:00 [61679] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:05:30.748_436+00:00 [61715] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:05:32.010_476+00:00 [61686] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:05:32.010_487+00:00 [61686] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:05:32.010_500+00:00 [61686] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:05:32.010_516+00:00 [61686] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:05:32.010_523+00:00 [61686] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:05:32.010_526+00:00 [61686] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:05:32.010_544+00:00 [61686] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:05:32.010_594+00:00 [61714] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:05:32.010_602+00:00 [61714] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:05:32.010_612+00:00 [61714] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:05:52.322_401+00:00 [61686] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:05:52.322_425+00:00 [61686] [INFO] session 1 got connection from 127.0.0.1:50952 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:05:52.322_551+00:00 [61686] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:05:52.322_581+00:00 [61686] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:05:52.322_658+00:00 [61686] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:05:52.322_687+00:00 [61686] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:05:52.322_690+00:00 [61686] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:05:52.322_698+00:00 [61686] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:05:52.322_921+00:00 [61686] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50952 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:05:52.572_802+00:00 [61686] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:05:52.572_811+00:00 [61686] [INFO] session 2 got connection from 127.0.0.1:50954 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:05:52.572_879+00:00 [61686] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:05:52.572_882+00:00 [61686] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:05:52.572_999+00:00 [61686] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:05:52.573_003+00:00 [61686] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:05:52.573_057+00:00 [61714] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:05:52.573_060+00:00 [61714] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:05:52.573_066+00:00 [61714] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:05:52.573_075+00:00 [61714] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:05:52.573_078+00:00 [61714] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:05:52.573_096+00:00 [61714] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:05:52.573_174+00:00 [61714] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:05:52.573_184+00:00 [61714] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:05:52.573_225+00:00 [61714] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:05:52.573_228+00:00 [61714] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:05:52.573_235+00:00 [61714] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:06:17.485_175+00:00 [61707] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50954 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:06:18.995_295+00:00 [61707] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:06:18.995_326+00:00 [61707] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:06:18.995_334+00:00 [61707] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:06:18.995_407+00:00 [61707] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:06:18.995_451+00:00 [61707] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 45549, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:06:18.995_872+00:00 [61707] [INFO] 0x7f7eac002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:06:18.996_069+00:00 [61707] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:06:18.996_136+00:00 [61707] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:06:19.361_317+00:00 [61707] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:06:19.361_331+00:00 [61707] [INFO] session 3 got connection from 127.0.0.1:50956 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:06:19.361_421+00:00 [61707] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 45558 / mine 45549, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:06:19.361_430+00:00 [61707] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:06:19.361_588+00:00 [61699] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:06:19.361_612+00:00 [61699] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:06:19.361_624+00:00 [61699] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 45558 / mine 45549, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:06:19.361_638+00:00 [61699] [INFO] decision: O (grant), voted_for 3, term 2	[handle_vote.cxx:337, handle_vote_req()]
2022-04-29T06:06:19.361_888+00:00 [61699] [WARN] [LOG XX] req log idx: 45558, req log term: 1, my last log idx: 45549, my log (45558) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:06:19.361_896+00:00 [61699] [WARN] deny, req term 2, my term 2, req log idx 45558, my log idx 45549	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:06:19.362_151+00:00 [61699] [INFO] receive a config change from leader at 45559	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:06:19.362_385+00:00 [61714] [INFO] config at index 45559 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:06:19.362_404+00:00 [61714] [INFO] new config log idx 45559, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:06:19.362_417+00:00 [61714] [INFO] new configuration: log idx 45559, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 3, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:06:47.610_889+00:00 [62130] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:06:47.612_258+00:00 [62130] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:06:47.612_295+00:00 [62130] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:06:47.612_300+00:00 [62130] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:06:47.612_323+00:00 [62130] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:06:47.612_327+00:00 [62130] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:06:47.612_330+00:00 [62130] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:06:47.612_360+00:00 [62130] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:06:47.612_502+00:00 [62166] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:06:49.272_537+00:00 [62137] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:06:49.272_547+00:00 [62137] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:06:49.272_562+00:00 [62137] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:06:49.272_574+00:00 [62137] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:06:49.272_581+00:00 [62137] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:06:49.272_585+00:00 [62137] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:06:49.272_603+00:00 [62137] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:06:49.272_650+00:00 [62165] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:06:49.272_657+00:00 [62165] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:06:49.272_667+00:00 [62165] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:07:09.686_772+00:00 [62137] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:07:09.686_794+00:00 [62137] [INFO] session 1 got connection from 127.0.0.1:50958 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:07:09.686_894+00:00 [62137] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:07:09.686_917+00:00 [62137] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:07:09.686_975+00:00 [62137] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:07:09.686_979+00:00 [62137] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:07:09.686_981+00:00 [62137] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:07:09.686_986+00:00 [62137] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:07:09.687_309+00:00 [62137] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50958 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:07:09.937_249+00:00 [62137] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:07:09.937_259+00:00 [62137] [INFO] session 2 got connection from 127.0.0.1:50960 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:07:09.937_346+00:00 [62137] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:07:09.937_350+00:00 [62137] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:07:09.937_475+00:00 [62137] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:07:09.937_479+00:00 [62137] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:07:09.937_544+00:00 [62165] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:07:09.937_547+00:00 [62165] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:07:09.937_556+00:00 [62165] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:07:09.937_567+00:00 [62165] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:07:09.937_571+00:00 [62165] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:07:09.937_591+00:00 [62165] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:07:09.937_685+00:00 [62165] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:07:09.937_698+00:00 [62165] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:07:09.937_751+00:00 [62165] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:07:09.937_755+00:00 [62165] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:07:09.937_763+00:00 [62165] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:07:34.190_448+00:00 [62156] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50960 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:07:35.980_938+00:00 [62156] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:07:35.980_954+00:00 [62156] [INFO] session 3 got connection from 127.0.0.1:50962 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:07:35.981_061+00:00 [62156] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 45641 / mine 45646, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:07:35.981_069+00:00 [62156] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:07:36.059_609+00:00 [62156] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:07:36.059_630+00:00 [62156] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:07:36.059_637+00:00 [62156] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:07:36.059_705+00:00 [62156] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:07:36.059_742+00:00 [62156] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 45646, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:07:36.060_083+00:00 [62156] [INFO] 0x7fcc9c2d95d0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:07:36.060_283+00:00 [62145] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:36.060_336+00:00 [62145] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:07:36.060_339+00:00 [62145] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:07:36.060_341+00:00 [62145] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:07:36.060_354+00:00 [62145] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 45646, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:07:36.060_512+00:00 [62145] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:07:36.060_516+00:00 [62145] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:07:36.060_522+00:00 [62145] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:07:36.060_527+00:00 [62145] [INFO] state machine commit index 45643, precommit index 45646, last log index 45646	[raft_server.cxx:953, become_leader()]
2022-04-29T06:07:36.060_577+00:00 [62145] [INFO] [BECOME LEADER] appended new config at 45647	[raft_server.cxx:993, become_leader()]
2022-04-29T06:07:36.060_648+00:00 [62145] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:07:36.060_724+00:00 [62145] [WARN] declined append: peer 3, prev next log idx 45647, resp next 45642, new next log idx 45642	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:07:36.061_153+00:00 [62165] [INFO] config at index 45647 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:07:36.061_169+00:00 [62165] [INFO] new config log idx 45647, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:07:36.061_178+00:00 [62165] [INFO] new configuration: log idx 45647, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:07:36.061_270+00:00 [62145] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:36.560_997+00:00 [62145] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:37.111_400+00:00 [62145] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:37.711_388+00:00 [62145] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:38.361_889+00:00 [62145] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:39.062_866+00:00 [62148] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:39.812_583+00:00 [62148] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:40.562_578+00:00 [62148] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:41.312_747+00:00 [62153] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:42.062_870+00:00 [62153] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:42.813_072+00:00 [62153] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:43.563_235+00:00 [62153] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:44.313_452+00:00 [62136] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:45.063_973+00:00 [62136] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:45.814_020+00:00 [62136] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:46.564_167+00:00 [62136] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:47.314_350+00:00 [62136] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:48.064_491+00:00 [62136] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:07:48.815_068+00:00 [62136] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:08:04.234_276+00:00 [62587] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:08:04.235_702+00:00 [62587] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:08:04.235_735+00:00 [62587] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:08:04.235_744+00:00 [62587] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:08:04.235_771+00:00 [62587] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:08:04.235_775+00:00 [62587] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:08:04.235_778+00:00 [62587] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:08:04.235_810+00:00 [62587] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:08:04.235_966+00:00 [62623] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:08:05.641_013+00:00 [62594] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:08:05.641_025+00:00 [62594] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:08:05.641_041+00:00 [62594] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:08:05.641_052+00:00 [62594] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:08:05.641_058+00:00 [62594] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:08:05.641_062+00:00 [62594] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:08:05.641_080+00:00 [62594] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:08:05.641_130+00:00 [62622] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:08:05.641_138+00:00 [62622] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:08:05.641_148+00:00 [62622] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:08:26.310_697+00:00 [62594] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:08:26.310_716+00:00 [62594] [INFO] session 1 got connection from 127.0.0.1:50964 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:08:26.310_815+00:00 [62594] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:08:26.310_838+00:00 [62594] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:08:26.310_899+00:00 [62594] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:08:26.310_902+00:00 [62594] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:08:26.310_904+00:00 [62594] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:08:26.310_910+00:00 [62594] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:08:26.311_140+00:00 [62594] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50964 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:08:26.561_404+00:00 [62594] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:08:26.561_415+00:00 [62594] [INFO] session 2 got connection from 127.0.0.1:50966 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:08:26.561_496+00:00 [62594] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:08:26.561_500+00:00 [62594] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:08:26.561_628+00:00 [62594] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:08:26.561_632+00:00 [62594] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:08:26.561_695+00:00 [62622] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:08:26.561_698+00:00 [62622] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:08:26.561_706+00:00 [62622] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:08:26.561_717+00:00 [62622] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:08:26.561_721+00:00 [62622] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:08:26.561_741+00:00 [62622] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:08:26.561_835+00:00 [62622] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:08:26.561_848+00:00 [62622] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:08:26.561_905+00:00 [62622] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:08:26.561_909+00:00 [62622] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:08:26.561_918+00:00 [62622] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:08:51.443_803+00:00 [62619] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50966 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:08:52.709_544+00:00 [62619] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:08:52.709_559+00:00 [62619] [INFO] session 3 got connection from 127.0.0.1:50970 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:08:52.709_678+00:00 [62619] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 45659 / mine 45667, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:08:52.709_686+00:00 [62619] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:08:52.869_174+00:00 [62604] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:08:52.869_199+00:00 [62604] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:08:52.869_208+00:00 [62604] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:08:52.869_280+00:00 [62604] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:08:52.869_333+00:00 [62604] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 45667, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:08:52.869_665+00:00 [62604] [INFO] 0x7f8ba0383a70 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:08:52.869_831+00:00 [62604] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:52.869_883+00:00 [62604] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:08:52.869_885+00:00 [62604] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:08:52.869_886+00:00 [62604] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:08:52.869_898+00:00 [62604] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 45667, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:08:52.870_031+00:00 [62604] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:08:52.870_035+00:00 [62604] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:08:52.870_040+00:00 [62604] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:08:52.870_044+00:00 [62604] [INFO] state machine commit index 45666, precommit index 45667, last log index 45667	[raft_server.cxx:953, become_leader()]
2022-04-29T06:08:52.870_080+00:00 [62604] [INFO] [BECOME LEADER] appended new config at 45668	[raft_server.cxx:993, become_leader()]
2022-04-29T06:08:52.870_138+00:00 [62604] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:08:52.870_200+00:00 [62604] [WARN] declined append: peer 3, prev next log idx 45668, resp next 45660, new next log idx 45660	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:08:52.870_549+00:00 [62622] [INFO] config at index 45668 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:08:52.870_567+00:00 [62622] [INFO] new config log idx 45668, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:08:52.870_580+00:00 [62622] [INFO] new configuration: log idx 45668, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:08:52.870_753+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:53.370_530+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:53.920_578+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:54.520_759+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:55.170_992+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:55.871_596+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:56.621_458+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:57.371_627+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:58.122_085+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:58.872_094+00:00 [62605] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:08:59.622_301+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:00.372_470+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:01.122_659+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:01.873_112+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:02.623_110+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:03.373_215+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:04.123_401+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:04.873_611+00:00 [62593] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:09:05.623_973+00:00 [62593] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:09:21.358_583+00:00 [63060] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:09:21.359_988+00:00 [63060] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:09:21.360_021+00:00 [63060] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:09:21.360_030+00:00 [63060] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:09:21.360_053+00:00 [63060] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:09:21.360_057+00:00 [63060] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:09:21.360_060+00:00 [63060] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:09:21.360_090+00:00 [63060] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:09:21.360_243+00:00 [63096] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:09:23.036_360+00:00 [63067] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:09:23.036_382+00:00 [63067] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:09:23.036_420+00:00 [63067] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:09:23.036_447+00:00 [63067] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:09:23.036_462+00:00 [63067] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:09:23.036_473+00:00 [63067] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:09:23.036_522+00:00 [63067] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:09:23.036_654+00:00 [63095] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:09:23.036_681+00:00 [63095] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:09:23.036_708+00:00 [63095] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:09:43.434_546+00:00 [63067] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:09:43.434_566+00:00 [63067] [INFO] session 1 got connection from 127.0.0.1:50974 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:09:43.434_685+00:00 [63067] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:09:43.434_709+00:00 [63067] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:09:43.434_769+00:00 [63067] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:09:43.434_772+00:00 [63067] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:09:43.434_774+00:00 [63067] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:09:43.434_780+00:00 [63067] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:09:43.435_183+00:00 [63067] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50974 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:09:43.685_044+00:00 [63067] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:09:43.685_055+00:00 [63067] [INFO] session 2 got connection from 127.0.0.1:50976 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:09:43.685_306+00:00 [63067] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:09:43.685_310+00:00 [63067] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:09:43.685_436+00:00 [63067] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:09:43.685_440+00:00 [63067] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:09:43.685_505+00:00 [63095] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:09:43.685_509+00:00 [63095] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:09:43.685_517+00:00 [63095] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:09:43.685_529+00:00 [63095] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:09:43.685_533+00:00 [63095] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:09:43.685_552+00:00 [63095] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:09:43.685_635+00:00 [63095] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:09:43.685_648+00:00 [63095] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:09:43.685_709+00:00 [63095] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:09:43.685_713+00:00 [63095] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:09:43.685_722+00:00 [63095] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:10:08.532_025+00:00 [63091] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50976 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:10:09.579_938+00:00 [63091] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:10:09.579_953+00:00 [63091] [INFO] session 3 got connection from 127.0.0.1:50978 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:10:09.580_077+00:00 [63091] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 44630 / mine 44637, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:10:09.580_086+00:00 [63091] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:10:09.917_615+00:00 [63091] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:10:09.917_677+00:00 [63091] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:10:09.917_696+00:00 [63091] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:10:09.917_891+00:00 [63091] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:10:09.918_056+00:00 [63091] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 44637, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:10:09.918_626+00:00 [63091] [INFO] 0x7f2624287910 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:10:09.918_819+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:09.918_880+00:00 [63091] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:10:09.918_883+00:00 [63091] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:10:09.918_884+00:00 [63091] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:10:09.918_896+00:00 [63091] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 44637, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:10:09.919_044+00:00 [63091] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:10:09.919_047+00:00 [63091] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:10:09.919_053+00:00 [63091] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:10:09.919_057+00:00 [63091] [INFO] state machine commit index 44635, precommit index 44637, last log index 44637	[raft_server.cxx:953, become_leader()]
2022-04-29T06:10:09.919_102+00:00 [63091] [INFO] [BECOME LEADER] appended new config at 44638	[raft_server.cxx:993, become_leader()]
2022-04-29T06:10:09.919_191+00:00 [63091] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:10:09.919_240+00:00 [63091] [WARN] declined append: peer 3, prev next log idx 44638, resp next 44631, new next log idx 44631	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:10:09.919_488+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:09.919_693+00:00 [63095] [INFO] config at index 44638 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:10:09.919_710+00:00 [63095] [INFO] new config log idx 44638, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:10:09.919_722+00:00 [63095] [INFO] new configuration: log idx 44638, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:10:10.419_589+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:10.969_574+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:11.569_735+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:12.219_893+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:12.920_058+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:13.670_577+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:14.420_512+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:15.170_759+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:15.920_866+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:16.671_042+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:17.421_177+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:18.171_357+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:18.921_529+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:19.671_640+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:20.421_792+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:21.171_952+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:21.922_075+00:00 [63091] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:10:22.672_204+00:00 [63091] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:10:38.486_180+00:00 [63517] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:10:38.487_582+00:00 [63517] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:10:38.487_613+00:00 [63517] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:10:38.487_617+00:00 [63517] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:10:38.487_641+00:00 [63517] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:10:38.487_645+00:00 [63517] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:10:38.487_648+00:00 [63517] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:10:38.487_680+00:00 [63517] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:10:38.487_823+00:00 [63553] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:10:40.126_898+00:00 [63524] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:10:40.126_910+00:00 [63524] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:10:40.126_924+00:00 [63524] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:10:40.126_934+00:00 [63524] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:10:40.126_940+00:00 [63524] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:10:40.126_944+00:00 [63524] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:10:40.126_962+00:00 [63524] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:10:40.127_020+00:00 [63552] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:10:40.127_028+00:00 [63552] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:10:40.127_037+00:00 [63552] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:10:59.812_056+00:00 [63524] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:10:59.812_078+00:00 [63524] [INFO] session 1 got connection from 127.0.0.1:50980 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:10:59.812_180+00:00 [63524] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:10:59.812_201+00:00 [63524] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:10:59.812_260+00:00 [63524] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:10:59.812_264+00:00 [63524] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:10:59.812_266+00:00 [63524] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:10:59.812_271+00:00 [63524] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:10:59.812_500+00:00 [63524] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50980 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:11:00.062_257+00:00 [63524] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:11:00.062_268+00:00 [63524] [INFO] session 2 got connection from 127.0.0.1:50982 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:11:00.062_351+00:00 [63524] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:11:00.062_355+00:00 [63524] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:11:00.062_481+00:00 [63524] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:11:00.062_485+00:00 [63524] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:11:00.062_552+00:00 [63552] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:11:00.062_555+00:00 [63552] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:11:00.062_564+00:00 [63552] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:11:00.062_575+00:00 [63552] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:11:00.062_579+00:00 [63552] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:11:00.062_600+00:00 [63552] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:11:00.062_719+00:00 [63552] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:11:00.062_746+00:00 [63552] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:11:00.062_809+00:00 [63552] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:11:00.062_814+00:00 [63552] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:11:00.062_822+00:00 [63552] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:11:25.650_549+00:00 [63537] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50982 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:11:27.014_728+00:00 [63537] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:11:27.014_756+00:00 [63537] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:11:27.014_765+00:00 [63537] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:11:27.014_845+00:00 [63537] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:11:27.014_884+00:00 [63537] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 45708, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:11:27.015_293+00:00 [63537] [INFO] 0x7f4928002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:11:27.015_490+00:00 [63537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:11:27.015_560+00:00 [63537] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:11:27.145_823+00:00 [63537] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:11:27.145_836+00:00 [63537] [INFO] session 3 got connection from 127.0.0.1:50986 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:11:27.145_917+00:00 [63537] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 45713 / mine 45708, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:11:27.145_923+00:00 [63537] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:11:27.146_069+00:00 [63537] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:11:27.146_088+00:00 [63537] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:11:27.146_097+00:00 [63537] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 45713 / mine 45708, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:11:27.146_108+00:00 [63537] [INFO] decision: O (grant), voted_for 3, term 2	[handle_vote.cxx:337, handle_vote_req()]
2022-04-29T06:11:27.146_320+00:00 [63537] [WARN] [LOG XX] req log idx: 45713, req log term: 1, my last log idx: 45708, my log (45713) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:11:27.146_325+00:00 [63537] [WARN] deny, req term 2, my term 2, req log idx 45713, my log idx 45708	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:11:27.146_511+00:00 [63537] [INFO] receive a config change from leader at 45714	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:11:27.146_704+00:00 [63552] [INFO] config at index 45714 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:11:27.146_723+00:00 [63552] [INFO] new config log idx 45714, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:11:27.146_738+00:00 [63552] [INFO] new configuration: log idx 45714, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 3, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:13:36.739_703+00:00 [64351] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:13:36.741_068+00:00 [64351] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:13:36.741_101+00:00 [64351] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:13:36.741_106+00:00 [64351] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:13:36.741_134+00:00 [64351] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:13:36.741_138+00:00 [64351] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:13:36.741_140+00:00 [64351] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:13:36.741_170+00:00 [64351] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:13:36.741_311+00:00 [64387] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:13:38.635_385+00:00 [64358] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:13:38.635_395+00:00 [64358] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:13:38.635_410+00:00 [64358] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:13:38.635_421+00:00 [64358] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:13:38.635_428+00:00 [64358] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:13:38.635_432+00:00 [64358] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:13:38.635_451+00:00 [64358] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:13:38.635_497+00:00 [64386] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:13:38.635_506+00:00 [64386] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:13:38.635_515+00:00 [64386] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:13:58.315_574+00:00 [64358] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:13:58.315_595+00:00 [64358] [INFO] session 1 got connection from 127.0.0.1:50988 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:13:58.315_695+00:00 [64358] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:13:58.315_717+00:00 [64358] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:13:58.315_776+00:00 [64358] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:13:58.315_780+00:00 [64358] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:13:58.315_782+00:00 [64358] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:13:58.315_787+00:00 [64358] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:13:58.316_010+00:00 [64358] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50988 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:13:58.566_264+00:00 [64358] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:13:58.566_275+00:00 [64358] [INFO] session 2 got connection from 127.0.0.1:50990 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:13:58.566_355+00:00 [64358] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:13:58.566_359+00:00 [64358] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:13:58.566_487+00:00 [64358] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:13:58.566_492+00:00 [64358] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:13:58.566_557+00:00 [64386] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:13:58.566_561+00:00 [64386] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:13:58.566_569+00:00 [64386] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:13:58.566_580+00:00 [64386] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:13:58.566_584+00:00 [64386] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:13:58.566_604+00:00 [64386] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:13:58.566_729+00:00 [64386] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:13:58.566_742+00:00 [64386] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:13:58.566_802+00:00 [64386] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:13:58.566_807+00:00 [64386] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:13:58.566_816+00:00 [64386] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:14:23.635_640+00:00 [64355] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50990 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:14:25.051_117+00:00 [64355] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:14:25.051_132+00:00 [64355] [INFO] session 3 got connection from 127.0.0.1:50992 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:14:25.051_240+00:00 [64355] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22991 / mine 22991, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:14:25.051_248+00:00 [64355] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:14:25.278_329+00:00 [64371] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:14:25.278_358+00:00 [64371] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:14:25.278_367+00:00 [64371] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:14:25.278_452+00:00 [64371] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:14:25.278_502+00:00 [64371] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22991, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:14:25.278_931+00:00 [64371] [INFO] 0x7f48cc186b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:14:25.279_120+00:00 [64371] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:25.279_181+00:00 [64371] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:14:25.279_184+00:00 [64371] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:14:25.279_185+00:00 [64371] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:14:25.279_199+00:00 [64371] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 22991, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:14:25.279_367+00:00 [64371] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:14:25.279_371+00:00 [64371] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:14:25.279_378+00:00 [64371] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:14:25.279_383+00:00 [64371] [INFO] state machine commit index 22991, precommit index 22991, last log index 22991	[raft_server.cxx:953, become_leader()]
2022-04-29T06:14:25.279_419+00:00 [64371] [INFO] [BECOME LEADER] appended new config at 22992	[raft_server.cxx:993, become_leader()]
2022-04-29T06:14:25.279_528+00:00 [64371] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:14:25.279_731+00:00 [64386] [INFO] config at index 22992 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:14:25.279_752+00:00 [64386] [INFO] new config log idx 22992, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:14:25.279_766+00:00 [64386] [INFO] new configuration: log idx 22992, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:14:25.279_898+00:00 [64371] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:25.779_864+00:00 [64371] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:26.329_886+00:00 [64371] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:26.930_389+00:00 [64371] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:27.580_404+00:00 [64359] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:28.280_710+00:00 [64359] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:29.030_751+00:00 [64359] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:29.780_847+00:00 [64359] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:30.530_955+00:00 [64359] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:31.281_092+00:00 [64359] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:32.031_364+00:00 [64361] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:32.781_532+00:00 [64361] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:33.531_676+00:00 [64361] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:34.281_912+00:00 [64381] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:35.032_445+00:00 [64381] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:35.782_352+00:00 [64381] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:36.532_477+00:00 [64381] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:37.282_705+00:00 [64381] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:14:38.032_817+00:00 [64367] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:14:53.609_637+00:00 [64811] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:14:53.611_043+00:00 [64811] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:14:53.611_077+00:00 [64811] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:14:53.611_081+00:00 [64811] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:14:53.611_104+00:00 [64811] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:14:53.611_108+00:00 [64811] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:14:53.611_111+00:00 [64811] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:14:53.611_141+00:00 [64811] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:14:53.611_291+00:00 [64847] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:14:55.116_358+00:00 [64818] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:14:55.116_369+00:00 [64818] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:14:55.116_383+00:00 [64818] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:14:55.116_393+00:00 [64818] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:14:55.116_399+00:00 [64818] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:14:55.116_403+00:00 [64818] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:14:55.116_421+00:00 [64818] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:14:55.116_470+00:00 [64846] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:14:55.116_478+00:00 [64846] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:14:55.116_488+00:00 [64846] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:15:14.929_251+00:00 [64818] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:15:14.929_271+00:00 [64818] [INFO] session 1 got connection from 127.0.0.1:50994 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:15:14.929_369+00:00 [64818] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:15:14.929_392+00:00 [64818] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:15:14.929_452+00:00 [64818] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:15:14.929_456+00:00 [64818] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:15:14.929_458+00:00 [64818] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:15:14.929_463+00:00 [64818] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:15:14.929_693+00:00 [64818] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:50994 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:15:15.180_002+00:00 [64818] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:15:15.180_013+00:00 [64818] [INFO] session 2 got connection from 127.0.0.1:50996 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:15:15.180_094+00:00 [64818] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:15:15.180_098+00:00 [64818] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:15:15.180_223+00:00 [64818] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:15:15.180_227+00:00 [64818] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:15:15.180_292+00:00 [64846] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:15:15.180_296+00:00 [64846] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:15:15.180_304+00:00 [64846] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:15:15.180_315+00:00 [64846] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:15:15.180_319+00:00 [64846] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:15:15.180_340+00:00 [64846] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:15:15.180_436+00:00 [64846] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:15:15.180_449+00:00 [64846] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:15:15.180_516+00:00 [64846] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:15:15.180_521+00:00 [64846] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:15:15.180_530+00:00 [64846] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:15:38.867_468+00:00 [64826] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:50996 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:15:39.975_846+00:00 [64826] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:15:39.975_861+00:00 [64826] [INFO] session 3 got connection from 127.0.0.1:50998 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:15:39.975_965+00:00 [64826] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22998 / mine 22998, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:15:39.975_974+00:00 [64826] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:15:40.309_525+00:00 [64836] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:15:40.309_554+00:00 [64836] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:15:40.309_562+00:00 [64836] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:15:40.309_630+00:00 [64836] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:15:40.309_669+00:00 [64836] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22998, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:15:40.310_075+00:00 [64836] [INFO] 0x55ef5eba6a30 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:15:40.310_265+00:00 [64836] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:40.310_333+00:00 [64836] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:15:40.310_336+00:00 [64836] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:15:40.310_337+00:00 [64836] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:15:40.310_351+00:00 [64836] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 22998, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:15:40.310_516+00:00 [64836] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:15:40.310_520+00:00 [64836] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:15:40.310_528+00:00 [64836] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:15:40.310_532+00:00 [64836] [INFO] state machine commit index 22998, precommit index 22998, last log index 22998	[raft_server.cxx:953, become_leader()]
2022-04-29T06:15:40.310_579+00:00 [64836] [INFO] [BECOME LEADER] appended new config at 22999	[raft_server.cxx:993, become_leader()]
2022-04-29T06:15:40.310_693+00:00 [64836] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:15:40.310_876+00:00 [64846] [INFO] config at index 22999 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:15:40.310_898+00:00 [64846] [INFO] new config log idx 22999, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:15:40.310_914+00:00 [64846] [INFO] new configuration: log idx 22999, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:15:40.311_064+00:00 [64836] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:40.811_029+00:00 [64841] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:41.361_132+00:00 [64841] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:41.961_280+00:00 [64841] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:42.611_451+00:00 [64841] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:43.311_810+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:44.061_774+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:44.812_376+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:45.562_255+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:46.312_435+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:47.062_572+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:47.812_732+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:48.562_904+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:49.313_023+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:50.063_526+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:50.813_808+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:51.563_811+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:52.313_954+00:00 [64842] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:15:53.064_090+00:00 [64842] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:16:10.727_242+00:00 [65237] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:16:10.729_131+00:00 [65237] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:16:10.729_172+00:00 [65237] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:16:10.729_182+00:00 [65237] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:16:10.729_212+00:00 [65237] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:16:10.729_218+00:00 [65237] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:16:10.729_223+00:00 [65237] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:16:10.729_265+00:00 [65237] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:16:10.729_457+00:00 [65273] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:16:12.693_067+00:00 [65244] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:16:12.693_077+00:00 [65244] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:16:12.693_092+00:00 [65244] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:16:12.693_103+00:00 [65244] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:16:12.693_110+00:00 [65244] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:16:12.693_113+00:00 [65244] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:16:12.693_131+00:00 [65244] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:16:12.693_179+00:00 [65272] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:16:12.693_187+00:00 [65272] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:16:12.693_197+00:00 [65272] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:16:32.295_166+00:00 [65244] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:16:32.295_187+00:00 [65244] [INFO] session 1 got connection from 127.0.0.1:51000 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:16:32.295_286+00:00 [65244] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:16:32.295_309+00:00 [65244] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:16:32.295_368+00:00 [65244] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:16:32.295_371+00:00 [65244] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:16:32.295_373+00:00 [65244] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:16:32.295_378+00:00 [65244] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:16:32.295_627+00:00 [65244] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51000 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:16:32.545_781+00:00 [65244] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:16:32.545_792+00:00 [65244] [INFO] session 2 got connection from 127.0.0.1:51004 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:16:32.545_873+00:00 [65244] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:16:32.545_876+00:00 [65244] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:16:32.546_000+00:00 [65244] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:16:32.546_005+00:00 [65244] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:16:32.546_070+00:00 [65272] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:16:32.546_074+00:00 [65272] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:16:32.546_082+00:00 [65272] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:16:32.546_093+00:00 [65272] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:16:32.546_097+00:00 [65272] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:16:32.546_117+00:00 [65272] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:16:32.546_214+00:00 [65272] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:16:32.546_226+00:00 [65272] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:16:32.546_292+00:00 [65272] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:16:32.546_296+00:00 [65272] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:16:32.546_305+00:00 [65272] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:16:55.663_769+00:00 [65256] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51004 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:16:56.873_056+00:00 [65256] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:16:56.873_086+00:00 [65256] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:16:56.873_094+00:00 [65256] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:16:56.873_175+00:00 [65256] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:16:56.873_221+00:00 [65256] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22722, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:16:56.873_631+00:00 [65256] [INFO] 0x7f4028002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:16:56.873_825+00:00 [65256] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:16:56.873_898+00:00 [65256] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:16:57.052_315+00:00 [65256] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:16:57.052_328+00:00 [65256] [INFO] session 3 got connection from 127.0.0.1:51006 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:16:57.052_401+00:00 [65256] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 22719 / mine 22722, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:16:57.052_408+00:00 [65256] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:16:57.052_556+00:00 [65256] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:16:57.052_576+00:00 [65256] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:16:57.052_589+00:00 [65256] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22719 / mine 22722, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:16:57.052_601+00:00 [65256] [INFO] decision: X (deny), term 2	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:16:58.440_647+00:00 [65256] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:16:58.440_658+00:00 [65256] [INFO] [PRIORITY] decay, target 40 -> 30, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:16:58.440_680+00:00 [65256] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 2, target p 30, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:16:58.440_683+00:00 [65256] [INFO] pre-vote term (1) is different, reset it to 2	[handle_timeout.cxx:308, handle_election_timeout()]
2022-04-29T06:16:58.440_692+00:00 [65256] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:16:58.440_763+00:00 [65256] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 2, log idx 22722, log term 1, priority (target 30 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:16:58.441_064+00:00 [65256] [INFO] [PRE-VOTE RESP] peer 3 (O), term 2, resp term 2, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:16:58.441_067+00:00 [65256] [INFO] [PRE-VOTE DONE] SUCCESS, term 2	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:16:58.441_069+00:00 [65256] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:16:58.441_079+00:00 [65256] [INFO] [VOTE INIT] my id 2, my role candidate, term 3, log idx 22722, log term 1, priority (target 30 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:16:58.441_118+00:00 [65256] [WARN] failed to send vote request: peer 1 (tcp://localhost:12347) is busy	[handle_vote.cxx:271, request_vote()]
2022-04-29T06:16:58.441_166+00:00 [65256] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:16:58.441_275+00:00 [65256] [INFO] [VOTE RESP] peer 3 (O), resp term 3, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:16:58.441_279+00:00 [65256] [INFO] Server is elected as leader for term 3	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:16:58.441_286+00:00 [65256] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:16:58.441_290+00:00 [65256] [INFO] state machine commit index 22718, precommit index 22722, last log index 22722	[raft_server.cxx:953, become_leader()]
2022-04-29T06:16:58.441_342+00:00 [65256] [INFO] [BECOME LEADER] appended new config at 22723	[raft_server.cxx:993, become_leader()]
2022-04-29T06:16:58.441_414+00:00 [65256] [INFO]   === LEADER (term 3) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:16:58.441_491+00:00 [65256] [WARN] declined append: peer 3, prev next log idx 22723, resp next 22720, new next log idx 22720	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:16:58.441_821+00:00 [65272] [INFO] config at index 22723 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:16:58.441_840+00:00 [65272] [INFO] new config log idx 22723, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:16:58.441_853+00:00 [65272] [INFO] new configuration: log idx 22723, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 3	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:16:58.942_336+00:00 [65240] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:16:59.442_185+00:00 [65240] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:16:59.992_301+00:00 [65240] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:00.592_456+00:00 [65240] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:01.242_614+00:00 [65240] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:01.943_383+00:00 [65268] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:02.693_244+00:00 [65268] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:03.443_418+00:00 [65268] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:04.193_530+00:00 [65268] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:04.944_099+00:00 [65268] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:05.694_012+00:00 [65268] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:06.444_181+00:00 [65268] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:07.194_892+00:00 [65261] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:07.944_978+00:00 [65261] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:08.695_099+00:00 [65261] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:09.445_241+00:00 [65261] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:10.195_334+00:00 [65261] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:17:10.945_552+00:00 [65261] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:17:27.841_890+00:00 [65693] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:17:27.843_288+00:00 [65693] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:17:27.843_320+00:00 [65693] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:17:27.843_325+00:00 [65693] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:17:27.843_348+00:00 [65693] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:17:27.843_352+00:00 [65693] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:17:27.843_355+00:00 [65693] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:17:27.843_389+00:00 [65693] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:17:27.843_533+00:00 [65729] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:17:29.337_662+00:00 [65700] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:17:29.337_673+00:00 [65700] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:17:29.337_688+00:00 [65700] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:17:29.337_705+00:00 [65700] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:17:29.337_712+00:00 [65700] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:17:29.337_716+00:00 [65700] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:17:29.337_735+00:00 [65700] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:17:29.337_788+00:00 [65728] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:17:29.337_796+00:00 [65728] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:17:29.337_806+00:00 [65728] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:17:49.919_591+00:00 [65700] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:17:49.919_610+00:00 [65700] [INFO] session 1 got connection from 127.0.0.1:51008 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:17:49.919_707+00:00 [65700] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:17:49.919_730+00:00 [65700] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:17:49.919_788+00:00 [65700] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:17:49.919_792+00:00 [65700] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:17:49.919_794+00:00 [65700] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:17:49.919_800+00:00 [65700] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:17:49.920_026+00:00 [65700] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51008 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:17:50.170_603+00:00 [65700] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:17:50.170_613+00:00 [65700] [INFO] session 2 got connection from 127.0.0.1:51010 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:17:50.170_709+00:00 [65700] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:17:50.170_713+00:00 [65700] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:17:50.170_841+00:00 [65700] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:17:50.170_845+00:00 [65700] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:17:50.170_908+00:00 [65728] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:17:50.170_912+00:00 [65728] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:17:50.170_919+00:00 [65728] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:17:50.170_930+00:00 [65728] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:17:50.170_934+00:00 [65728] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:17:50.170_955+00:00 [65728] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:17:50.171_052+00:00 [65728] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:17:50.171_065+00:00 [65728] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:17:50.171_118+00:00 [65728] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:17:50.171_121+00:00 [65728] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:17:50.171_129+00:00 [65728] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:18:12.606_403+00:00 [65704] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51010 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:18:14.080_351+00:00 [65704] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:18:14.080_365+00:00 [65704] [INFO] session 3 got connection from 127.0.0.1:51012 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:18:14.080_448+00:00 [65704] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22284 / mine 22290, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:18:14.080_456+00:00 [65704] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:18:14.424_633+00:00 [65704] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:18:14.424_661+00:00 [65704] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:18:14.424_670+00:00 [65704] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:18:14.424_750+00:00 [65704] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:18:14.424_797+00:00 [65704] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22290, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:18:14.425_199+00:00 [65704] [INFO] 0x7fb1500f9680 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:18:14.425_388+00:00 [65704] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:14.425_462+00:00 [65704] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:18:14.425_465+00:00 [65704] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:18:14.425_466+00:00 [65704] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:18:14.425_479+00:00 [65704] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 22290, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:18:14.425_633+00:00 [65704] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:18:14.425_636+00:00 [65704] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:18:14.425_644+00:00 [65704] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:18:14.425_649+00:00 [65704] [INFO] state machine commit index 22282, precommit index 22290, last log index 22290	[raft_server.cxx:953, become_leader()]
2022-04-29T06:18:14.425_708+00:00 [65704] [INFO] [BECOME LEADER] appended new config at 22291	[raft_server.cxx:993, become_leader()]
2022-04-29T06:18:14.425_818+00:00 [65704] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:18:14.425_877+00:00 [65704] [WARN] declined append: peer 3, prev next log idx 22291, resp next 22285, new next log idx 22285	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:18:14.426_227+00:00 [65704] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:14.426_398+00:00 [65728] [INFO] config at index 22291 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:18:14.426_412+00:00 [65728] [INFO] new config log idx 22291, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:18:14.426_420+00:00 [65728] [INFO] new configuration: log idx 22291, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:18:14.926_502+00:00 [65714] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:15.476_527+00:00 [65714] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:16.076_675+00:00 [65714] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:16.727_233+00:00 [65714] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:17.427_101+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:18.177_661+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:18.927_783+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:19.677_843+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:20.428_154+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:21.178_165+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:21.928_271+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:22.678_427+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:23.428_549+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:24.178_743+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:24.928_855+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:25.678_981+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:26.429_122+00:00 [65712] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:18:27.179_580+00:00 [65712] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:18:44.964_583+00:00 [66148] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:18:44.965_968+00:00 [66148] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:18:44.966_000+00:00 [66148] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:18:44.966_007+00:00 [66148] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:18:44.966_030+00:00 [66148] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:18:44.966_035+00:00 [66148] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:18:44.966_037+00:00 [66148] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:18:44.966_067+00:00 [66148] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:18:44.966_213+00:00 [66184] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:18:46.630_340+00:00 [66155] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:18:46.630_350+00:00 [66155] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:18:46.630_365+00:00 [66155] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:18:46.630_380+00:00 [66155] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:18:46.630_386+00:00 [66155] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:18:46.630_390+00:00 [66155] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:18:46.630_408+00:00 [66155] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:18:46.630_461+00:00 [66183] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:18:46.630_469+00:00 [66183] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:18:46.630_479+00:00 [66183] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:19:06.790_157+00:00 [66155] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:19:06.790_179+00:00 [66155] [INFO] session 1 got connection from 127.0.0.1:51014 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:19:06.790_290+00:00 [66155] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:19:06.790_313+00:00 [66155] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:19:06.790_371+00:00 [66155] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:19:06.790_375+00:00 [66155] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:19:06.790_377+00:00 [66155] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:19:06.790_382+00:00 [66155] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:19:06.790_624+00:00 [66155] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51014 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:19:07.041_073+00:00 [66155] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:19:07.041_085+00:00 [66155] [INFO] session 2 got connection from 127.0.0.1:51016 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:19:07.041_167+00:00 [66155] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:19:07.041_171+00:00 [66155] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:19:07.041_295+00:00 [66155] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:19:07.041_300+00:00 [66155] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:19:07.041_363+00:00 [66183] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:19:07.041_366+00:00 [66183] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:19:07.041_375+00:00 [66183] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:19:07.041_386+00:00 [66183] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:19:07.041_390+00:00 [66183] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:19:07.041_409+00:00 [66183] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:19:07.041_503+00:00 [66183] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:19:07.041_516+00:00 [66183] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:19:07.041_584+00:00 [66183] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:19:07.041_589+00:00 [66183] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:19:07.041_596+00:00 [66183] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:19:29.336_969+00:00 [66171] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51016 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:19:31.176_097+00:00 [66171] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:19:31.176_168+00:00 [66171] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:19:31.176_187+00:00 [66171] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:19:31.176_358+00:00 [66171] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:19:31.176_476+00:00 [66171] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22316, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:19:31.177_315+00:00 [66171] [INFO] 0x7f2538002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:19:31.177_509+00:00 [66171] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:31.177_578+00:00 [66171] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:19:31.261_897+00:00 [66171] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:19:31.261_910+00:00 [66171] [INFO] session 3 got connection from 127.0.0.1:51018 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:19:31.261_981+00:00 [66171] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 22308 / mine 22316, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:19:31.261_988+00:00 [66171] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:19:31.262_151+00:00 [66171] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:19:31.262_173+00:00 [66171] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:19:31.262_184+00:00 [66171] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22308 / mine 22316, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:19:31.262_197+00:00 [66171] [INFO] decision: X (deny), term 2	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:19:33.110_541+00:00 [66171] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22308 / mine 22316, term: req 2 / mine 2
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:19:33.110_552+00:00 [66171] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:19:33.110_817+00:00 [66171] [INFO] [BECOME FOLLOWER] term 3	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:19:33.110_849+00:00 [66171] [INFO] [PRIORITY] decay, target 40 -> 30, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:19:33.110_861+00:00 [66171] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22308 / mine 22316, term: req 3 / mine 3
priority: target 30 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:19:33.110_873+00:00 [66171] [INFO] decision: X (deny), term 3	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:19:34.512_077+00:00 [66155] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22308 / mine 22316, term: req 3 / mine 3
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:19:34.512_087+00:00 [66155] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:19:34.512_325+00:00 [66155] [INFO] [BECOME FOLLOWER] term 4	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:19:34.512_348+00:00 [66155] [INFO] [PRIORITY] decay, target 30 -> 20, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:19:34.512_358+00:00 [66155] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22308 / mine 22316, term: req 4 / mine 4
priority: target 20 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:19:34.512_372+00:00 [66155] [INFO] decision: X (deny), term 4	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:19:35.916_475+00:00 [66155] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:19:35.916_500+00:00 [66155] [INFO] [PRIORITY] decay, target 20 -> 10, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:19:35.916_549+00:00 [66155] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 4, target p 10, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:19:35.916_556+00:00 [66155] [INFO] pre-vote term (1) is different, reset it to 4	[handle_timeout.cxx:308, handle_election_timeout()]
2022-04-29T06:19:35.916_576+00:00 [66155] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:19:35.916_669+00:00 [66155] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 4, log idx 22316, log term 1, priority (target 10 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:19:35.917_130+00:00 [66155] [INFO] [PRE-VOTE RESP] peer 3 (O), term 4, resp term 4, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:19:35.917_133+00:00 [66155] [INFO] [PRE-VOTE DONE] SUCCESS, term 4	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:19:35.917_135+00:00 [66155] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:19:35.917_145+00:00 [66155] [INFO] [VOTE INIT] my id 2, my role candidate, term 5, log idx 22316, log term 1, priority (target 10 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:19:35.917_185+00:00 [66155] [WARN] failed to send vote request: peer 1 (tcp://localhost:12347) is busy	[handle_vote.cxx:271, request_vote()]
2022-04-29T06:19:35.917_233+00:00 [66155] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:35.917_320+00:00 [66155] [INFO] [VOTE RESP] peer 3 (O), resp term 5, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:19:35.917_324+00:00 [66155] [INFO] Server is elected as leader for term 5	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:19:35.917_374+00:00 [66155] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:19:35.917_378+00:00 [66155] [INFO] state machine commit index 22308, precommit index 22316, last log index 22316	[raft_server.cxx:953, become_leader()]
2022-04-29T06:19:35.917_430+00:00 [66155] [INFO] [BECOME LEADER] appended new config at 22317	[raft_server.cxx:993, become_leader()]
2022-04-29T06:19:35.917_503+00:00 [66155] [INFO]   === LEADER (term 5) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:19:35.917_606+00:00 [66162] [WARN] declined append: peer 3, prev next log idx 22317, resp next 22309, new next log idx 22309	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:19:35.918_012+00:00 [66183] [INFO] config at index 22317 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:19:35.918_029+00:00 [66183] [INFO] new config log idx 22317, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:19:35.918_040+00:00 [66183] [INFO] new configuration: log idx 22317, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 5	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:19:36.417_899+00:00 [66162] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:36.918_534+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:37.468_590+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:38.068_685+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:38.719_210+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:39.419_272+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:40.169_354+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:40.920_345+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:41.669_874+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:42.420_051+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:43.170_204+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:43.920_727+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:44.670_703+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:45.420_836+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:19:46.171_006+00:00 [66157] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:20:01.826_936+00:00 [66607] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:20:01.828_270+00:00 [66607] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:20:01.828_301+00:00 [66607] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:20:01.828_307+00:00 [66607] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:20:01.828_329+00:00 [66607] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:20:01.828_333+00:00 [66607] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:20:01.828_336+00:00 [66607] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:20:01.828_370+00:00 [66607] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:20:01.828_514+00:00 [66643] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:20:02.972_610+00:00 [66614] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:20:02.972_620+00:00 [66614] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:20:02.972_635+00:00 [66614] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:20:02.972_646+00:00 [66614] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:20:02.972_652+00:00 [66614] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:20:02.972_656+00:00 [66614] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:20:02.972_674+00:00 [66614] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:20:02.972_721+00:00 [66642] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:20:02.972_729+00:00 [66642] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:20:02.972_739+00:00 [66642] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:20:23.653_248+00:00 [66614] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:20:23.653_268+00:00 [66614] [INFO] session 1 got connection from 127.0.0.1:51020 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:20:23.653_364+00:00 [66614] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:20:23.653_387+00:00 [66614] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:20:23.653_445+00:00 [66614] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:20:23.653_448+00:00 [66614] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:20:23.653_450+00:00 [66614] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:20:23.653_456+00:00 [66614] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:20:23.653_684+00:00 [66614] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51020 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:20:23.904_293+00:00 [66614] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:20:23.904_304+00:00 [66614] [INFO] session 2 got connection from 127.0.0.1:51022 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:20:23.904_383+00:00 [66614] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:20:23.904_386+00:00 [66614] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:20:23.904_512+00:00 [66614] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:20:23.904_516+00:00 [66614] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:20:23.904_578+00:00 [66642] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:20:23.904_582+00:00 [66642] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:20:23.904_590+00:00 [66642] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:20:23.904_601+00:00 [66642] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:20:23.904_605+00:00 [66642] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:20:23.904_625+00:00 [66642] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:20:23.904_719+00:00 [66642] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:20:23.904_732+00:00 [66642] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:20:23.904_789+00:00 [66642] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:20:23.904_794+00:00 [66642] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:20:23.904_804+00:00 [66642] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:20:45.639_675+00:00 [66639] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51022 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:20:47.186_144+00:00 [66639] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:20:47.186_175+00:00 [66639] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:20:47.186_183+00:00 [66639] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:20:47.186_262+00:00 [66639] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:20:47.186_307+00:00 [66639] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22385, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:20:47.186_778+00:00 [66639] [INFO] 0x7f8f34002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:20:47.186_973+00:00 [66639] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:20:47.187_042+00:00 [66639] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:20:47.620_762+00:00 [66639] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:20:47.620_776+00:00 [66639] [INFO] session 3 got connection from 127.0.0.1:51024 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:20:47.620_863+00:00 [66639] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 22388 / mine 22385, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:20:47.620_871+00:00 [66639] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:20:47.621_004+00:00 [66639] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:20:47.621_026+00:00 [66639] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:20:47.621_037+00:00 [66639] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22388 / mine 22385, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:20:47.621_051+00:00 [66639] [INFO] decision: O (grant), voted_for 3, term 2	[handle_vote.cxx:337, handle_vote_req()]
2022-04-29T06:20:47.621_266+00:00 [66639] [WARN] [LOG XX] req log idx: 22388, req log term: 1, my last log idx: 22385, my log (22388) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:20:47.621_272+00:00 [66639] [WARN] deny, req term 2, my term 2, req log idx 22388, my log idx 22385	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:20:47.621_445+00:00 [66639] [INFO] receive a config change from leader at 22389	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:20:47.621_629+00:00 [66642] [INFO] config at index 22389 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:20:47.621_649+00:00 [66642] [INFO] new config log idx 22389, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:20:47.621_663+00:00 [66642] [INFO] new configuration: log idx 22389, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 3, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:21:18.199_851+00:00 [67051] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:21:18.201_231+00:00 [67051] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:21:18.201_264+00:00 [67051] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:21:18.201_268+00:00 [67051] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:21:18.201_291+00:00 [67051] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:21:18.201_295+00:00 [67051] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:21:18.201_298+00:00 [67051] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:21:18.201_325+00:00 [67051] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:21:18.201_474+00:00 [67087] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:21:19.333_498+00:00 [67058] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:21:19.333_509+00:00 [67058] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:21:19.333_524+00:00 [67058] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:21:19.333_541+00:00 [67058] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:21:19.333_548+00:00 [67058] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:21:19.333_552+00:00 [67058] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:21:19.333_569+00:00 [67058] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:21:19.333_617+00:00 [67086] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:21:19.333_625+00:00 [67086] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:21:19.333_634+00:00 [67086] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:21:40.025_948+00:00 [67058] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:21:40.025_967+00:00 [67058] [INFO] session 1 got connection from 127.0.0.1:51026 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:21:40.026_068+00:00 [67058] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:21:40.026_090+00:00 [67058] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:21:40.026_146+00:00 [67058] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:21:40.026_149+00:00 [67058] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:21:40.026_151+00:00 [67058] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:21:40.026_157+00:00 [67058] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:21:40.026_395+00:00 [67058] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51026 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:21:40.276_381+00:00 [67058] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:21:40.276_391+00:00 [67058] [INFO] session 2 got connection from 127.0.0.1:51028 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:21:40.276_472+00:00 [67058] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:21:40.276_475+00:00 [67058] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:21:40.276_600+00:00 [67058] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:21:40.276_604+00:00 [67058] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:21:40.276_675+00:00 [67086] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:21:40.276_680+00:00 [67086] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:21:40.276_692+00:00 [67086] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:21:40.276_706+00:00 [67086] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:21:40.276_712+00:00 [67086] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:21:40.276_742+00:00 [67086] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:21:40.276_878+00:00 [67086] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:21:40.276_897+00:00 [67086] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:21:40.276_986+00:00 [67086] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:21:40.276_990+00:00 [67086] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:21:40.277_002+00:00 [67086] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:22:02.719_314+00:00 [67074] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51028 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:22:04.180_126+00:00 [67074] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:22:04.180_141+00:00 [67074] [INFO] session 3 got connection from 127.0.0.1:51030 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:22:04.180_262+00:00 [67074] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22337 / mine 22339, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:22:04.180_270+00:00 [67074] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:22:04.299_696+00:00 [67074] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:22:04.299_721+00:00 [67074] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:22:04.299_728+00:00 [67074] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:22:04.299_796+00:00 [67074] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:22:04.299_841+00:00 [67074] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22339, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:22:04.300_227+00:00 [67074] [INFO] 0x7f96801ed880 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:22:04.300_413+00:00 [67074] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:04.300_471+00:00 [67074] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:22:04.300_473+00:00 [67074] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:22:04.300_475+00:00 [67074] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:22:04.300_488+00:00 [67074] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 22339, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:22:04.300_651+00:00 [67074] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:22:04.300_654+00:00 [67074] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:22:04.300_661+00:00 [67074] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:22:04.300_666+00:00 [67074] [INFO] state machine commit index 22337, precommit index 22339, last log index 22339	[raft_server.cxx:953, become_leader()]
2022-04-29T06:22:04.300_708+00:00 [67074] [INFO] [BECOME LEADER] appended new config at 22340	[raft_server.cxx:993, become_leader()]
2022-04-29T06:22:04.300_781+00:00 [67074] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:22:04.300_848+00:00 [67074] [WARN] declined append: peer 3, prev next log idx 22340, resp next 22338, new next log idx 22338	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:22:04.301_192+00:00 [67086] [INFO] config at index 22340 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:22:04.301_204+00:00 [67086] [INFO] new config log idx 22340, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:22:04.301_213+00:00 [67086] [INFO] new configuration: log idx 22340, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:22:04.301_303+00:00 [67074] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:04.801_170+00:00 [67074] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:05.351_731+00:00 [67074] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:05.951_363+00:00 [67074] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:06.601_590+00:00 [67078] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:07.301_701+00:00 [67078] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:08.052_219+00:00 [67078] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:08.802_912+00:00 [67078] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:09.552_466+00:00 [67078] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:10.302_607+00:00 [67078] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:11.053_180+00:00 [67054] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:11.803_655+00:00 [67054] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:12.553_446+00:00 [67054] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:13.303_629+00:00 [67082] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:14.054_080+00:00 [67082] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:14.804_104+00:00 [67082] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:15.554_199+00:00 [67082] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:16.304_773+00:00 [67082] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:22:17.054_614+00:00 [67082] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:22:35.320_597+00:00 [67513] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:22:35.321_924+00:00 [67513] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:22:35.321_957+00:00 [67513] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:22:35.321_960+00:00 [67513] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:22:35.321_984+00:00 [67513] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:22:35.321_988+00:00 [67513] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:22:35.321_991+00:00 [67513] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:22:35.322_019+00:00 [67513] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:22:35.322_166+00:00 [67549] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:22:36.491_204+00:00 [67520] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:22:36.491_215+00:00 [67520] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:22:36.491_230+00:00 [67520] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:22:36.491_240+00:00 [67520] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:22:36.491_246+00:00 [67520] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:22:36.491_249+00:00 [67520] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:22:36.491_269+00:00 [67520] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:22:36.491_320+00:00 [67548] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:22:36.491_327+00:00 [67548] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:22:36.491_337+00:00 [67548] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:22:56.896_402+00:00 [67520] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:22:56.896_419+00:00 [67520] [INFO] session 1 got connection from 127.0.0.1:51032 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:22:56.896_512+00:00 [67520] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:22:56.896_533+00:00 [67520] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:22:56.896_587+00:00 [67520] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:22:56.896_590+00:00 [67520] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:22:56.896_592+00:00 [67520] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:22:56.896_598+00:00 [67520] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:22:56.896_829+00:00 [67520] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51032 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:22:57.147_196+00:00 [67520] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:22:57.147_207+00:00 [67520] [INFO] session 2 got connection from 127.0.0.1:51034 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:22:57.147_286+00:00 [67520] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:22:57.147_290+00:00 [67520] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:22:57.147_406+00:00 [67520] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:22:57.147_410+00:00 [67520] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:22:57.147_475+00:00 [67548] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:22:57.147_478+00:00 [67548] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:22:57.147_486+00:00 [67548] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:22:57.147_497+00:00 [67548] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:22:57.147_501+00:00 [67548] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:22:57.147_520+00:00 [67548] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:22:57.147_616+00:00 [67548] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:22:57.147_634+00:00 [67548] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:22:57.147_696+00:00 [67548] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:22:57.147_700+00:00 [67548] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:22:57.147_706+00:00 [67548] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:23:19.116_479+00:00 [67533] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51034 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:23:20.832_764+00:00 [67533] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:23:20.832_778+00:00 [67533] [INFO] session 3 got connection from 127.0.0.1:51036 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:23:20.832_886+00:00 [67533] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22329 / mine 22331, term: req 1 / mine 1
HB alive	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:23:20.832_894+00:00 [67533] [INFO] pre-vote decision: X (deny)	[handle_vote.cxx:429, handle_prevote_req()]
2022-04-29T06:23:20.900_351+00:00 [67533] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:23:20.900_406+00:00 [67533] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:23:20.900_423+00:00 [67533] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:23:20.900_587+00:00 [67533] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:23:20.900_713+00:00 [67533] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22331, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:23:20.901_409+00:00 [67533] [INFO] 0x7f7320174a10 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:23:20.901_560+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:20.901_609+00:00 [67533] [INFO] [PRE-VOTE RESP] peer 3 (O), term 1, resp term 1, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:23:20.901_612+00:00 [67533] [INFO] [PRE-VOTE DONE] SUCCESS, term 1	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:23:20.901_613+00:00 [67533] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:23:20.901_624+00:00 [67533] [INFO] [VOTE INIT] my id 2, my role candidate, term 2, log idx 22331, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:23:20.901_757+00:00 [67533] [INFO] [VOTE RESP] peer 3 (O), resp term 2, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:23:20.901_760+00:00 [67533] [INFO] Server is elected as leader for term 2	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:23:20.901_766+00:00 [67533] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:23:20.901_770+00:00 [67533] [INFO] state machine commit index 22330, precommit index 22331, last log index 22331	[raft_server.cxx:953, become_leader()]
2022-04-29T06:23:20.901_809+00:00 [67533] [INFO] [BECOME LEADER] appended new config at 22332	[raft_server.cxx:993, become_leader()]
2022-04-29T06:23:20.901_887+00:00 [67533] [INFO]   === LEADER (term 2) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:23:20.901_933+00:00 [67533] [WARN] declined append: peer 3, prev next log idx 22332, resp next 22330, new next log idx 22330	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:23:20.902_178+00:00 [67548] [INFO] config at index 22332 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:23:20.902_195+00:00 [67548] [INFO] new config log idx 22332, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:23:20.902_207+00:00 [67548] [INFO] new configuration: log idx 22332, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 2	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:23:20.902_329+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:21.402_234+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:21.952_690+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:22.552_594+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:23.202_808+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:23.903_054+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:24.653_151+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:25.403_326+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:26.153_863+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:26.904_197+00:00 [67533] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:27.654_173+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:28.404_282+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:29.154_757+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:29.904_787+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:30.654_926+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:31.405_072+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:32.155_281+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:32.905_761+00:00 [67537] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:23:33.655_702+00:00 [67546] [WARN] too verbose RPC error on peer (1), will suppress it from now	[raft_server.cxx:756, handle_peer_resp()]
2022-04-29T06:23:51.690_489+00:00 [67970] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:23:51.691_860+00:00 [67970] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:23:51.691_898+00:00 [67970] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:23:51.691_907+00:00 [67970] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:23:51.691_930+00:00 [67970] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:23:51.691_933+00:00 [67970] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:23:51.691_936+00:00 [67970] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:23:51.691_967+00:00 [67970] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:23:51.692_110+00:00 [68006] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:23:53.656_146+00:00 [67977] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:23:53.656_156+00:00 [67977] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:23:53.656_170+00:00 [67977] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:23:53.656_181+00:00 [67977] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:23:53.656_188+00:00 [67977] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:23:53.656_192+00:00 [67977] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:23:53.656_210+00:00 [67977] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:23:53.656_259+00:00 [68005] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:23:53.656_267+00:00 [68005] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:23:53.656_277+00:00 [68005] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:24:13.002_808+00:00 [67977] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:24:13.002_830+00:00 [67977] [INFO] session 1 got connection from 127.0.0.1:51038 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:24:13.002_929+00:00 [67977] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:24:13.002_953+00:00 [67977] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:24:13.003_012+00:00 [67977] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:24:13.003_015+00:00 [67977] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:24:13.003_017+00:00 [67977] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:24:13.003_023+00:00 [67977] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:24:13.003_266+00:00 [67977] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51038 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:24:13.253_159+00:00 [67977] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:24:13.253_168+00:00 [67977] [INFO] session 2 got connection from 127.0.0.1:51040 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:24:13.253_249+00:00 [67977] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:24:13.253_252+00:00 [67977] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:24:13.253_377+00:00 [67977] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:24:13.253_381+00:00 [67977] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:24:13.253_445+00:00 [68005] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:24:13.253_449+00:00 [68005] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:24:13.253_457+00:00 [68005] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:24:13.253_468+00:00 [68005] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:24:13.253_472+00:00 [68005] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:24:13.253_491+00:00 [68005] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:24:13.253_626+00:00 [68005] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:24:13.253_644+00:00 [68005] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:24:13.253_705+00:00 [68005] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:24:13.253_709+00:00 [68005] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:24:13.253_715+00:00 [68005] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:24:35.543_674+00:00 [67983] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51040 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:24:37.247_286+00:00 [67983] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:24:37.247_313+00:00 [67983] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:24:37.247_320+00:00 [67983] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:24:37.247_391+00:00 [67983] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:24:37.247_429+00:00 [67983] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22313, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:24:37.247_783+00:00 [67983] [INFO] 0x7fc508002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:24:37.247_972+00:00 [67983] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:37.248_031+00:00 [67983] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:24:37.476_594+00:00 [67983] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:24:37.476_608+00:00 [67983] [INFO] session 3 got connection from 127.0.0.1:51042 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:24:37.476_697+00:00 [67983] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 22305 / mine 22313, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:24:37.476_705+00:00 [67983] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:24:37.476_836+00:00 [67983] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:24:37.476_858+00:00 [67983] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:24:37.476_868+00:00 [67983] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22305 / mine 22313, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:24:37.476_879+00:00 [67983] [INFO] decision: X (deny), term 2	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:24:39.078_196+00:00 [67983] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22305 / mine 22313, term: req 2 / mine 2
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:24:39.078_206+00:00 [67983] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:24:39.078_435+00:00 [67983] [INFO] [BECOME FOLLOWER] term 3	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:24:39.078_458+00:00 [67983] [INFO] [PRIORITY] decay, target 40 -> 30, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:24:39.078_470+00:00 [67983] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22305 / mine 22313, term: req 3 / mine 3
priority: target 30 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:24:39.078_481+00:00 [67983] [INFO] decision: X (deny), term 3	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:24:40.221_495+00:00 [67983] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:24:40.221_505+00:00 [67983] [INFO] [PRIORITY] decay, target 30 -> 20, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:24:40.221_526+00:00 [67983] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 3, target p 20, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:24:40.221_529+00:00 [67983] [INFO] pre-vote term (1) is different, reset it to 3	[handle_timeout.cxx:308, handle_election_timeout()]
2022-04-29T06:24:40.221_537+00:00 [67983] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:24:40.221_604+00:00 [67983] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 3, log idx 22313, log term 1, priority (target 20 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:24:40.221_869+00:00 [67983] [INFO] [PRE-VOTE RESP] peer 3 (O), term 3, resp term 3, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:24:40.221_873+00:00 [67983] [INFO] [PRE-VOTE DONE] SUCCESS, term 3	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:24:40.221_874+00:00 [67983] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:24:40.221_885+00:00 [67983] [INFO] [VOTE INIT] my id 2, my role candidate, term 4, log idx 22313, log term 1, priority (target 20 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:24:40.221_926+00:00 [67983] [WARN] failed to send vote request: peer 1 (tcp://localhost:12347) is busy	[handle_vote.cxx:271, request_vote()]
2022-04-29T06:24:40.221_997+00:00 [67983] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:40.222_058+00:00 [67983] [INFO] [VOTE RESP] peer 3 (O), resp term 4, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:24:40.222_062+00:00 [67983] [INFO] Server is elected as leader for term 4	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:24:40.222_070+00:00 [67983] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:24:40.222_075+00:00 [67983] [INFO] state machine commit index 22310, precommit index 22313, last log index 22313	[raft_server.cxx:953, become_leader()]
2022-04-29T06:24:40.222_119+00:00 [67983] [INFO] [BECOME LEADER] appended new config at 22314	[raft_server.cxx:993, become_leader()]
2022-04-29T06:24:40.222_191+00:00 [67983] [INFO]   === LEADER (term 4) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:24:40.222_312+00:00 [67983] [WARN] declined append: peer 3, prev next log idx 22314, resp next 22306, new next log idx 22306	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:24:40.222_710+00:00 [68005] [INFO] config at index 22314 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:24:40.222_726+00:00 [68005] [INFO] new config log idx 22314, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:24:40.222_739+00:00 [68005] [INFO] new configuration: log idx 22314, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 4	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:24:40.722_905+00:00 [67976] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:41.223_397+00:00 [67974] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:41.773_470+00:00 [67974] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:42.373_634+00:00 [67974] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:43.023_780+00:00 [67974] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:43.724_090+00:00 [67974] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:44.474_152+00:00 [67974] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:45.224_849+00:00 [67999] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:45.974_746+00:00 [67999] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:46.724_860+00:00 [67999] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:47.474_969+00:00 [67999] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:48.225_125+00:00 [67999] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:48.975_619+00:00 [67999] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:49.725_513+00:00 [67985] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:50.475_666+00:00 [67985] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:51.226_124+00:00 [67985] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:24:51.976_193+00:00 [67982] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:25:08.055_893+00:00 [68503] [====] Start logger: ./srv2.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-29T06:25:08.057_270+00:00 [68503] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-29T06:25:08.057_303+00:00 [68503] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding ON, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-29T06:25:08.057_307+00:00 [68503] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-29T06:25:08.057_330+00:00 [68503] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-29T06:25:08.057_334+00:00 [68503] [INFO] peer 2: DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-29T06:25:08.057_337+00:00 [68503] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-29T06:25:08.057_367+00:00 [68503] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-29T06:25:08.057_509+00:00 [68539] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-29T06:25:09.662_645+00:00 [68510] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:25:09.662_656+00:00 [68510] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:25:09.662_688+00:00 [68510] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:25:09.662_709+00:00 [68510] [INFO] [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:25:09.662_716+00:00 [68510] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:25:09.662_720+00:00 [68510] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-29T06:25:09.662_739+00:00 [68510] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-29T06:25:09.662_796+00:00 [68538] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:25:09.662_803+00:00 [68538] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:25:09.662_813+00:00 [68538] [INFO] new configuration: log idx 1, prev log idx 0
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 2, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:25:30.131_543+00:00 [68510] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:25:30.131_569+00:00 [68510] [INFO] session 1 got connection from 127.0.0.1:51044 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:25:30.131_693+00:00 [68510] [INFO] got join cluster req from leader 1	[handle_join_leave.cxx:165, handle_join_cluster_req()]
2022-04-29T06:25:30.131_720+00:00 [68510] [INFO] new config log idx 1, prev log idx 0, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:25:30.131_795+00:00 [68510] [INFO] server 1 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:25:30.131_798+00:00 [68510] [INFO] peer 2 cannot be found, no action for removing	[handle_commit.cxx:761, reconfigure()]
2022-04-29T06:25:30.131_800+00:00 [68510] [INFO] add peer 1, tcp://localhost:12347, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:25:30.131_806+00:00 [68510] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:25:30.132_044+00:00 [68510] [ERRO] session 1 failed to read rpc header from socket 127.0.0.1:51044 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:25:30.382_052+00:00 [68510] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:25:30.382_061+00:00 [68510] [INFO] session 2 got connection from 127.0.0.1:51046 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:25:30.382_139+00:00 [68510] [INFO] [LOG XX] req log idx: 3, req log term: 1, my last log idx: 1, my log (3) term: 0	[handle_append_entries.cxx:570, handle_append_entries()]
2022-04-29T06:25:30.382_143+00:00 [68510] [INFO] deny, req term 1, my term 1, req log idx 3, my log idx 1	[handle_append_entries.cxx:582, handle_append_entries()]
2022-04-29T06:25:30.382_266+00:00 [68510] [INFO] receive a config change from leader at 2	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:25:30.382_270+00:00 [68510] [INFO] receive a config change from leader at 3	[handle_append_entries.cxx:726, handle_append_entries()]
2022-04-29T06:25:30.382_333+00:00 [68538] [INFO] config at index 1 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:25:30.382_337+00:00 [68538] [INFO] skipped config 1, latest config 1	[handle_commit.cxx:405, commit_conf()]
2022-04-29T06:25:30.382_345+00:00 [68538] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:25:30.382_356+00:00 [68538] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:25:30.382_360+00:00 [68538] [INFO] now this node is the part of cluster, catch-up process is done, clearing the flag	[handle_commit.cxx:624, reconfigure()]
2022-04-29T06:25:30.382_379+00:00 [68538] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:25:30.382_472+00:00 [68538] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:25:30.382_482+00:00 [68538] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:25:30.382_532+00:00 [68538] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-29T06:25:30.382_536+00:00 [68538] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-29T06:25:30.382_543+00:00 [68538] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:25:52.208_295+00:00 [68514] [ERRO] session 2 failed to read rpc header from socket 127.0.0.1:51046 due to error 2, End of file, ref count 1	[asio_service.cxx:315, operator()()]
2022-04-29T06:25:53.739_203+00:00 [68514] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:25:53.739_231+00:00 [68514] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 1, target p 50, my p 50, hb alive, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:25:53.739_239+00:00 [68514] [INFO] reset RPC client for peer 3	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:25:53.739_311+00:00 [68514] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:25:53.739_351+00:00 [68514] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 1, log idx 22362, log term 1, priority (target 50 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:25:53.739_736+00:00 [68514] [INFO] 0x7f1f70002b80 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-29T06:25:53.739_922+00:00 [68514] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:25:53.739_996+00:00 [68514] [INFO] [PRE-VOTE RESP] peer 3 (X), term 1, resp term 1, my role candidate, dead 1, live 1, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:25:53.767_955+00:00 [68514] [INFO] receive a incoming rpc connection	[asio_service.cxx:809, handle_accept()]
2022-04-29T06:25:53.767_990+00:00 [68514] [INFO] session 3 got connection from 127.0.0.1:51048 (as a server)	[asio_service.cxx:248, prepare_handshake()]
2022-04-29T06:25:53.768_105+00:00 [68514] [INFO] [PRE-VOTE REQ] my role candidate, from peer 3, log term: req 1 / mine 1
last idx: req 22355 / mine 22362, term: req 1 / mine 1
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:25:53.768_111+00:00 [68514] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:25:53.768_246+00:00 [68514] [INFO] [BECOME FOLLOWER] term 2	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:25:53.768_263+00:00 [68514] [INFO] [PRIORITY] decay, target 50 -> 40, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:25:53.768_272+00:00 [68514] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22355 / mine 22362, term: req 2 / mine 2
priority: target 40 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:25:53.768_288+00:00 [68514] [INFO] decision: X (deny), term 2	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:25:54.996_514+00:00 [68514] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22355 / mine 22362, term: req 2 / mine 2
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:25:54.996_524+00:00 [68514] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:25:54.996_749+00:00 [68514] [INFO] [BECOME FOLLOWER] term 3	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:25:54.996_772+00:00 [68514] [INFO] [PRIORITY] decay, target 40 -> 30, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:25:54.996_783+00:00 [68514] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22355 / mine 22362, term: req 3 / mine 3
priority: target 30 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:25:54.996_796+00:00 [68514] [INFO] decision: X (deny), term 3	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:25:56.899_043+00:00 [68524] [INFO] [PRE-VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22355 / mine 22362, term: req 3 / mine 3
HB dead	[handle_vote.cxx:398, handle_prevote_req()]
2022-04-29T06:25:56.899_053+00:00 [68524] [INFO] pre-vote decision: O (grant)	[handle_vote.cxx:425, handle_prevote_req()]
2022-04-29T06:25:56.899_277+00:00 [68524] [INFO] [BECOME FOLLOWER] term 4	[raft_server.cxx:1266, become_follower()]
2022-04-29T06:25:56.899_299+00:00 [68524] [INFO] [PRIORITY] decay, target 30 -> 20, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:25:56.899_311+00:00 [68524] [INFO] [VOTE REQ] my role follower, from peer 3, log term: req 1 / mine 1
last idx: req 22355 / mine 22362, term: req 4 / mine 4
priority: target 20 / mine 50, voted_for -1	[handle_vote.cxx:278, handle_vote_req()]
2022-04-29T06:25:56.899_323+00:00 [68524] [INFO] decision: X (deny), term 4	[handle_vote.cxx:343, handle_vote_req()]
2022-04-29T06:25:57.903_354+00:00 [68524] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-29T06:25:57.903_364+00:00 [68524] [INFO] [PRIORITY] decay, target 20 -> 10, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-29T06:25:57.903_386+00:00 [68524] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 1, state term 4, target p 10, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-29T06:25:57.903_389+00:00 [68524] [INFO] pre-vote term (1) is different, reset it to 4	[handle_timeout.cxx:308, handle_election_timeout()]
2022-04-29T06:25:57.903_398+00:00 [68524] [INFO] reset RPC client for peer 1	[handle_vote.cxx:79, request_prevote()]
2022-04-29T06:25:57.903_463+00:00 [68524] [INFO] [PRE-VOTE INIT] my id 2, my role candidate, term 4, log idx 22362, log term 1, priority (target 10 / mine 50)	[handle_vote.cxx:134, request_prevote()]
2022-04-29T06:25:57.903_752+00:00 [68524] [INFO] [PRE-VOTE RESP] peer 3 (O), term 4, resp term 4, my role candidate, dead 2, live 0, num voting members 3, quorum 2	[handle_vote.cxx:465, handle_prevote_resp()]
2022-04-29T06:25:57.903_759+00:00 [68524] [INFO] [PRE-VOTE DONE] SUCCESS, term 4	[handle_vote.cxx:475, handle_prevote_resp()]
2022-04-29T06:25:57.903_761+00:00 [68524] [INFO] [PRE-VOTE DONE] initiate actual vote	[handle_vote.cxx:480, handle_prevote_resp()]
2022-04-29T06:25:57.903_771+00:00 [68524] [INFO] [VOTE INIT] my id 2, my role candidate, term 5, log idx 22362, log term 1, priority (target 10 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-29T06:25:57.903_811+00:00 [68524] [WARN] failed to send vote request: peer 1 (tcp://localhost:12347) is busy	[handle_vote.cxx:271, request_vote()]
2022-04-29T06:25:57.903_861+00:00 [68524] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:25:57.903_945+00:00 [68524] [INFO] [VOTE RESP] peer 3 (O), resp term 5, my role candidate, granted 2, responded 2, num voting members 3, quorum 2	[handle_vote.cxx:374, handle_vote_resp()]
2022-04-29T06:25:57.903_949+00:00 [68524] [INFO] Server is elected as leader for term 5	[handle_vote.cxx:383, handle_vote_resp()]
2022-04-29T06:25:57.904_002+00:00 [68524] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-29T06:25:57.904_005+00:00 [68524] [INFO] state machine commit index 22362, precommit index 22362, last log index 22362	[raft_server.cxx:953, become_leader()]
2022-04-29T06:25:57.904_040+00:00 [68524] [INFO] [BECOME LEADER] appended new config at 22363	[raft_server.cxx:993, become_leader()]
2022-04-29T06:25:57.904_114+00:00 [68524] [INFO]   === LEADER (term 5) ===	[handle_vote.cxx:386, handle_vote_resp()]
2022-04-29T06:25:57.904_196+00:00 [68520] [WARN] declined append: peer 3, prev next log idx 22363, resp next 22356, new next log idx 22356	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-29T06:25:57.904_575+00:00 [68538] [INFO] config at index 22363 is committed, prev config log idx 3	[handle_commit.cxx:396, commit_conf()]
2022-04-29T06:25:57.904_598+00:00 [68538] [INFO] new config log idx 22363, prev log idx 3, cur config log idx 3, prev log idx 2	[handle_commit.cxx:589, reconfigure()]
2022-04-29T06:25:57.904_614+00:00 [68538] [INFO] new configuration: log idx 22363, prev log idx 3
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 2, leader: 2, term: 5	[handle_commit.cxx:809, reconfigure()]
2022-04-29T06:25:58.404_509+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:25:58.904_624+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:25:59.454_682+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:00.054_859+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:00.705_005+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:01.405_148+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:02.155_298+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:02.905_468+00:00 [68520] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:03.655_627+00:00 [68506] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:04.405_783+00:00 [68506] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:05.155_959+00:00 [68506] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:05.906_101+00:00 [68506] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:06.656_249+00:00 [68506] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:07.406_390+00:00 [68506] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:08.156_622+00:00 [68531] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
2022-04-29T06:26:08.907_102+00:00 [68531] [WARN] peer (1) response error: failed to connect to peer 1, localhost:12347, error 111, Connection refused	[raft_server.cxx:754, handle_peer_resp()]
