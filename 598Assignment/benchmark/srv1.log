2022-04-27T00:00:37.016_870+00:00 [72425] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:00:37.018_244+00:00 [72425] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:00:37.018_280+00:00 [72425] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:00:37.018_286+00:00 [72425] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:00:37.018_309+00:00 [72425] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:00:37.018_314+00:00 [72425] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:00:37.018_317+00:00 [72425] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:00:37.018_347+00:00 [72425] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:00:37.018_506+00:00 [72461] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:00:38.452_545+00:00 [72432] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:00:38.452_556+00:00 [72432] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:00:38.452_571+00:00 [72432] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:00:38.452_582+00:00 [72432] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:00:38.452_589+00:00 [72432] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:00:38.452_593+00:00 [72432] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:00:38.452_613+00:00 [72432] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:00:38.452_664+00:00 [72460] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:00:38.452_672+00:00 [72460] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:00:38.452_682+00:00 [72460] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:00:38.569_427+00:00 [72425] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:00:38.569_827+00:00 [72432] [INFO] 0x55e909fcf8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:00:38.570_179+00:00 [72432] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:00:38.570_187+00:00 [72432] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:00:38.570_240+00:00 [72460] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:00:38.570_251+00:00 [72460] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:00:38.570_301+00:00 [72460] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:00:38.570_303+00:00 [72460] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:00:38.570_346+00:00 [72460] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:00:38.570_349+00:00 [72460] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:00:38.570_355+00:00 [72460] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:00:38.819_741+00:00 [72425] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:00:38.819_984+00:00 [72432] [INFO] 0x55e909fcfc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:00:38.820_348+00:00 [72432] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:00:38.820_353+00:00 [72432] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:00:38.820_496+00:00 [72432] [INFO] 0x7ff7840018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:00:38.820_675+00:00 [72432] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:00:38.820_886+00:00 [72460] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:00:38.820_901+00:00 [72460] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:00:38.820_953+00:00 [72460] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:00:38.820_956+00:00 [72460] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:00:38.820_996+00:00 [72460] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:00:38.821_000+00:00 [72460] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:00:38.821_007+00:00 [72460] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:00:39.074_064+00:00 [72430] [INFO] 0x55e909fcf8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:00:39.074_234+00:00 [72430] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:00:54.087_231+00:00 [72460] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:00:54.087_241+00:00 [72460] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:00:54.087_261+00:00 [72460] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:00:54.087_264+00:00 [72460] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:01:34.159_571+00:00 [72839] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:01:34.160_941+00:00 [72839] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:01:34.160_979+00:00 [72839] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:01:34.160_985+00:00 [72839] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:01:34.161_009+00:00 [72839] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:01:34.161_013+00:00 [72839] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:01:34.161_016+00:00 [72839] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:01:34.161_049+00:00 [72839] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:01:34.161_202+00:00 [72875] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:01:35.460_238+00:00 [72846] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:01:35.460_249+00:00 [72846] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:01:35.460_264+00:00 [72846] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:01:35.460_275+00:00 [72846] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:01:35.460_281+00:00 [72846] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:01:35.460_285+00:00 [72846] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:01:35.460_303+00:00 [72846] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:01:35.460_356+00:00 [72874] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:01:35.460_364+00:00 [72874] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:01:35.460_374+00:00 [72874] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:01:35.461_858+00:00 [72839] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:01:35.462_224+00:00 [72846] [INFO] 0x5571810168b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:01:35.462_542+00:00 [72846] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:01:35.462_549+00:00 [72846] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:01:35.462_597+00:00 [72874] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:01:35.462_608+00:00 [72874] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:01:35.462_660+00:00 [72874] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:01:35.462_663+00:00 [72874] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:01:35.462_704+00:00 [72874] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:01:35.462_708+00:00 [72874] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:01:35.462_713+00:00 [72874] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:01:35.712_104+00:00 [72839] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:01:35.712_362+00:00 [72846] [INFO] 0x557181016c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:01:35.712_797+00:00 [72846] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:01:35.712_802+00:00 [72846] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:01:35.712_956+00:00 [72846] [INFO] 0x7f0e240018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:01:35.713_127+00:00 [72846] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:01:35.713_341+00:00 [72874] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:01:35.713_356+00:00 [72874] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:01:35.713_413+00:00 [72874] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:01:35.713_415+00:00 [72874] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:01:35.713_455+00:00 [72874] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:01:35.713_459+00:00 [72874] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:01:35.713_466+00:00 [72874] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:01:35.966_987+00:00 [72844] [INFO] 0x5571810168b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:01:35.967_179+00:00 [72844] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:01:44.474_275+00:00 [72874] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:01:44.474_284+00:00 [72874] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:01:44.474_304+00:00 [72874] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:01:44.474_308+00:00 [72874] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:01:53.004_845+00:00 [72874] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:01:53.004_854+00:00 [72874] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:01:53.004_873+00:00 [72874] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:01:53.004_876+00:00 [72874] [INFO] create snapshot idx 200000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:02:31.051_412+00:00 [73265] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:02:31.052_784+00:00 [73265] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:02:31.052_814+00:00 [73265] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:02:31.052_822+00:00 [73265] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:02:31.052_845+00:00 [73265] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:02:31.052_849+00:00 [73265] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:02:31.052_851+00:00 [73265] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:02:31.052_883+00:00 [73265] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:02:31.053_037+00:00 [73301] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:02:32.877_094+00:00 [73272] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:02:32.877_107+00:00 [73272] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:02:32.877_123+00:00 [73272] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:02:32.877_133+00:00 [73272] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:02:32.877_140+00:00 [73272] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:02:32.877_144+00:00 [73272] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:02:32.877_162+00:00 [73272] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:02:32.877_216+00:00 [73300] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:02:32.877_224+00:00 [73300] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:02:32.877_234+00:00 [73300] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:02:33.104_013+00:00 [73265] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:02:33.104_459+00:00 [73272] [INFO] 0x5556d26c58b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:02:33.104_770+00:00 [73272] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:02:33.104_778+00:00 [73272] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:02:33.104_831+00:00 [73300] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:02:33.104_842+00:00 [73300] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:02:33.104_889+00:00 [73300] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:02:33.104_891+00:00 [73300] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:02:33.104_934+00:00 [73300] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:02:33.104_938+00:00 [73300] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:02:33.104_943+00:00 [73300] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:02:33.354_265+00:00 [73265] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:02:33.354_490+00:00 [73272] [INFO] 0x5556d26c5c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:02:33.354_917+00:00 [73272] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:02:33.354_922+00:00 [73272] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:02:33.355_064+00:00 [73272] [INFO] 0x7f02440018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:02:33.355_234+00:00 [73272] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:02:33.355_447+00:00 [73300] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:02:33.355_462+00:00 [73300] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:02:33.355_525+00:00 [73300] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:02:33.355_527+00:00 [73300] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:02:33.355_563+00:00 [73300] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:02:33.355_566+00:00 [73300] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:02:33.355_572+00:00 [73300] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:02:33.609_155+00:00 [73270] [INFO] 0x5556d26c58b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:02:33.609_339+00:00 [73270] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:02:40.245_236+00:00 [73300] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:02:40.245_246+00:00 [73300] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:02:40.245_264+00:00 [73300] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:02:40.245_268+00:00 [73300] [INFO] create snapshot idx 100000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:02:46.576_921+00:00 [73300] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:02:46.576_930+00:00 [73300] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:02:46.576_950+00:00 [73300] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:02:46.576_954+00:00 [73300] [INFO] create snapshot idx 200000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:02:52.946_196+00:00 [73300] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:02:52.946_206+00:00 [73300] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:02:52.946_226+00:00 [73300] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:02:52.946_230+00:00 [73300] [INFO] create snapshot idx 300000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:03:28.687_834+00:00 [73710] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:03:28.689_241+00:00 [73710] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:03:28.689_272+00:00 [73710] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:03:28.689_280+00:00 [73710] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:03:28.689_304+00:00 [73710] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:03:28.689_309+00:00 [73710] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:03:28.689_311+00:00 [73710] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:03:28.689_345+00:00 [73710] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:03:28.689_502+00:00 [73746] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:03:30.715_558+00:00 [73717] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:03:30.715_569+00:00 [73717] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:03:30.715_583+00:00 [73717] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:03:30.715_593+00:00 [73717] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:03:30.715_600+00:00 [73717] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:03:30.715_603+00:00 [73717] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:03:30.715_620+00:00 [73717] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:03:30.715_663+00:00 [73745] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:03:30.715_669+00:00 [73745] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:03:30.715_677+00:00 [73745] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:03:30.740_573+00:00 [73710] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:03:30.740_937+00:00 [73717] [INFO] 0x5614d1cf78b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:03:30.741_250+00:00 [73717] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:03:30.741_257+00:00 [73717] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:03:30.741_309+00:00 [73745] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:03:30.741_320+00:00 [73745] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:03:30.741_368+00:00 [73745] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:03:30.741_371+00:00 [73745] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:03:30.741_414+00:00 [73745] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:03:30.741_418+00:00 [73745] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:03:30.741_424+00:00 [73745] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:03:30.990_864+00:00 [73710] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:03:30.991_082+00:00 [73717] [INFO] 0x5614d1cf7c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:03:30.991_443+00:00 [73717] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:03:30.991_447+00:00 [73717] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:03:30.991_585+00:00 [73717] [INFO] 0x7f5f840018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:03:30.991_758+00:00 [73717] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:03:30.991_971+00:00 [73745] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:03:30.991_986+00:00 [73745] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:03:30.992_042+00:00 [73745] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:03:30.992_044+00:00 [73745] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:03:30.992_084+00:00 [73745] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:03:30.992_088+00:00 [73745] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:03:30.992_096+00:00 [73745] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:03:31.245_990+00:00 [73715] [INFO] 0x5614d1cf78b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:03:31.246_165+00:00 [73715] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:03:36.825_028+00:00 [73745] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:03:36.825_038+00:00 [73745] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:03:36.825_062+00:00 [73745] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:03:36.825_066+00:00 [73745] [INFO] create snapshot idx 100000 log_term 1 done: 23 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:03:42.315_071+00:00 [73745] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:03:42.315_080+00:00 [73745] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:03:42.315_101+00:00 [73745] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:03:42.315_105+00:00 [73745] [INFO] create snapshot idx 200000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:03:47.805_392+00:00 [73745] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:03:47.805_401+00:00 [73745] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:03:47.805_421+00:00 [73745] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:03:47.805_425+00:00 [73745] [INFO] create snapshot idx 300000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:04:26.359_614+00:00 [74148] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:04:26.361_001+00:00 [74148] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:04:26.361_034+00:00 [74148] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:04:26.361_040+00:00 [74148] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:04:26.361_066+00:00 [74148] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:04:26.361_070+00:00 [74148] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:04:26.361_074+00:00 [74148] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:04:26.361_103+00:00 [74148] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:04:26.361_252+00:00 [74184] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:04:27.879_346+00:00 [74155] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:04:27.879_359+00:00 [74155] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:04:27.879_375+00:00 [74155] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:04:27.879_386+00:00 [74155] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:04:27.879_393+00:00 [74155] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:04:27.879_397+00:00 [74155] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:04:27.879_415+00:00 [74155] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:04:27.879_474+00:00 [74183] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:04:27.879_482+00:00 [74183] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:04:27.879_492+00:00 [74183] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:04:27.912_184+00:00 [74148] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:04:27.912_567+00:00 [74155] [INFO] 0x5592236418b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:04:27.912_894+00:00 [74155] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:04:27.912_902+00:00 [74155] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:04:27.912_953+00:00 [74183] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:04:27.912_963+00:00 [74183] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:04:27.913_009+00:00 [74183] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:04:27.913_012+00:00 [74183] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:04:27.913_053+00:00 [74183] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:04:27.913_057+00:00 [74183] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:04:27.913_063+00:00 [74183] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:04:28.162_447+00:00 [74148] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:04:28.162_664+00:00 [74155] [INFO] 0x559223641c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:04:28.163_215+00:00 [74155] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:04:28.163_219+00:00 [74155] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:04:28.163_364+00:00 [74155] [INFO] 0x7fbb280018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:04:28.163_543+00:00 [74155] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:04:28.163_748+00:00 [74183] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:04:28.163_764+00:00 [74183] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:04:28.163_814+00:00 [74183] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:04:28.163_816+00:00 [74183] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:04:28.163_853+00:00 [74183] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:04:28.163_856+00:00 [74183] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:04:28.163_862+00:00 [74183] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:04:28.417_302+00:00 [74153] [INFO] 0x5592236418b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:04:28.417_483+00:00 [74153] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:04:33.550_570+00:00 [74183] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:04:33.550_581+00:00 [74183] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:04:33.550_601+00:00 [74183] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:04:33.550_605+00:00 [74183] [INFO] create snapshot idx 100000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:04:38.639_378+00:00 [74183] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:04:38.639_387+00:00 [74183] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:04:38.639_410+00:00 [74183] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:04:38.639_414+00:00 [74183] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:04:43.743_946+00:00 [74183] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:04:43.743_955+00:00 [74183] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:04:43.743_974+00:00 [74183] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:04:43.743_978+00:00 [74183] [INFO] create snapshot idx 300000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:05:23.533_821+00:00 [74570] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:05:23.535_980+00:00 [74570] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:05:23.536_019+00:00 [74570] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:05:23.536_023+00:00 [74570] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:05:23.536_046+00:00 [74570] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:05:23.536_050+00:00 [74570] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:05:23.536_053+00:00 [74570] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:05:23.536_082+00:00 [74570] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:05:23.536_620+00:00 [74606] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:05:25.579_296+00:00 [74576] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:05:25.579_308+00:00 [74576] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:05:25.579_323+00:00 [74576] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:05:25.579_336+00:00 [74576] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:05:25.579_342+00:00 [74576] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:05:25.579_346+00:00 [74576] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:05:25.579_365+00:00 [74576] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:05:25.579_414+00:00 [74605] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:05:25.579_422+00:00 [74605] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:05:25.579_432+00:00 [74605] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:05:25.587_681+00:00 [74570] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:05:25.588_068+00:00 [74576] [INFO] 0x55eee5d888b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:05:25.588_385+00:00 [74576] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:05:25.588_390+00:00 [74576] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:05:25.588_436+00:00 [74605] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:05:25.588_447+00:00 [74605] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:05:25.588_494+00:00 [74605] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:05:25.588_497+00:00 [74605] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:05:25.588_540+00:00 [74605] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:05:25.588_543+00:00 [74605] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:05:25.588_549+00:00 [74605] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:05:25.837_949+00:00 [74570] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:05:25.838_194+00:00 [74576] [INFO] 0x55eee5d88c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:05:25.838_686+00:00 [74576] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:05:25.838_691+00:00 [74576] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:05:25.838_857+00:00 [74576] [INFO] 0x7fde780018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:05:25.839_033+00:00 [74576] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:05:25.839_221+00:00 [74605] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:05:25.839_233+00:00 [74605] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:05:25.839_278+00:00 [74605] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:05:25.839_280+00:00 [74605] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:05:25.839_316+00:00 [74605] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:05:25.839_319+00:00 [74605] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:05:25.839_325+00:00 [74605] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:05:26.092_957+00:00 [74604] [INFO] 0x55eee5d888b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:05:26.093_133+00:00 [74604] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:05:31.135_297+00:00 [74605] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:05:31.135_306+00:00 [74605] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:05:31.135_328+00:00 [74605] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:05:31.135_332+00:00 [74605] [INFO] create snapshot idx 100000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:05:36.071_539+00:00 [74605] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:05:36.071_548+00:00 [74605] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:05:36.071_568+00:00 [74605] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:05:36.071_572+00:00 [74605] [INFO] create snapshot idx 200000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:05:41.028_632+00:00 [74605] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:05:41.028_640+00:00 [74605] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:05:41.028_659+00:00 [74605] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:05:41.028_662+00:00 [74605] [INFO] create snapshot idx 300000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:06:21.210_520+00:00 [75000] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:06:21.211_979+00:00 [75000] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:06:21.212_013+00:00 [75000] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:06:21.212_017+00:00 [75000] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:06:21.212_044+00:00 [75000] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:06:21.212_049+00:00 [75000] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:06:21.212_051+00:00 [75000] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:06:21.212_080+00:00 [75000] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:06:21.212_241+00:00 [75036] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:06:22.885_375+00:00 [75007] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:06:22.885_387+00:00 [75007] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:06:22.885_403+00:00 [75007] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:06:22.885_414+00:00 [75007] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:06:22.885_421+00:00 [75007] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:06:22.885_424+00:00 [75007] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:06:22.885_442+00:00 [75007] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:06:22.885_502+00:00 [75035] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:06:22.885_510+00:00 [75035] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:06:22.885_520+00:00 [75035] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:06:23.013_267+00:00 [75000] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:06:23.013_703+00:00 [75007] [INFO] 0x55b4267558b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:06:23.014_127+00:00 [75007] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:06:23.014_135+00:00 [75007] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:06:23.014_188+00:00 [75035] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:06:23.014_199+00:00 [75035] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:06:23.014_254+00:00 [75035] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:06:23.014_256+00:00 [75035] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:06:23.014_300+00:00 [75035] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:06:23.014_304+00:00 [75035] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:06:23.014_310+00:00 [75035] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:06:23.263_522+00:00 [75000] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:06:23.263_757+00:00 [75007] [INFO] 0x55b426755c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:06:23.264_116+00:00 [75007] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:06:23.264_121+00:00 [75007] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:06:23.264_255+00:00 [75007] [INFO] 0x7f357c0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:06:23.264_410+00:00 [75007] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:06:23.264_591+00:00 [75035] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:06:23.264_605+00:00 [75035] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:06:23.264_653+00:00 [75035] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:06:23.264_655+00:00 [75035] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:06:23.264_688+00:00 [75035] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:06:23.264_692+00:00 [75035] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:06:23.264_697+00:00 [75035] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:06:23.519_032+00:00 [75005] [INFO] 0x55b4267558b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:06:23.519_236+00:00 [75005] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:06:28.498_723+00:00 [75035] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:06:28.498_732+00:00 [75035] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:06:28.498_760+00:00 [75035] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:06:28.498_764+00:00 [75035] [INFO] create snapshot idx 100000 log_term 1 done: 28 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:06:33.624_982+00:00 [75035] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:06:33.624_991+00:00 [75035] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:06:33.625_009+00:00 [75035] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:06:33.625_012+00:00 [75035] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:06:38.772_626+00:00 [75035] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:06:38.772_635+00:00 [75035] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:06:38.772_653+00:00 [75035] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:06:38.772_657+00:00 [75035] [INFO] create snapshot idx 300000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:07:18.628_362+00:00 [75432] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:07:18.629_726+00:00 [75432] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:07:18.629_757+00:00 [75432] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:07:18.629_762+00:00 [75432] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:07:18.629_785+00:00 [75432] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:07:18.629_789+00:00 [75432] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:07:18.629_793+00:00 [75432] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:07:18.629_826+00:00 [75432] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:07:18.629_970+00:00 [75468] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:07:19.777_063+00:00 [75439] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:07:19.777_077+00:00 [75439] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:07:19.777_095+00:00 [75439] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:07:19.777_108+00:00 [75439] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:07:19.777_116+00:00 [75439] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:07:19.777_122+00:00 [75439] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:07:19.777_144+00:00 [75439] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:07:19.777_204+00:00 [75467] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:07:19.777_214+00:00 [75467] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:07:19.777_230+00:00 [75467] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:07:19.931_088+00:00 [75432] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:07:19.931_502+00:00 [75439] [INFO] 0x56190c3438b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:07:19.931_832+00:00 [75439] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:07:19.931_841+00:00 [75439] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:07:19.931_893+00:00 [75467] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:07:19.931_904+00:00 [75467] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:07:19.931_953+00:00 [75467] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:07:19.931_955+00:00 [75467] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:07:19.931_998+00:00 [75467] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:07:19.932_002+00:00 [75467] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:07:19.932_008+00:00 [75467] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:07:20.181_336+00:00 [75432] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:07:20.181_566+00:00 [75439] [INFO] 0x56190c343c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:07:20.181_933+00:00 [75439] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:07:20.181_937+00:00 [75439] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:07:20.182_077+00:00 [75439] [INFO] 0x7f0aec0018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:07:20.182_246+00:00 [75439] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:07:20.182_455+00:00 [75467] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:07:20.182_474+00:00 [75467] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:07:20.182_544+00:00 [75467] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:07:20.182_548+00:00 [75467] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:07:20.182_594+00:00 [75467] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:07:20.182_599+00:00 [75467] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:07:20.182_606+00:00 [75467] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:07:20.436_836+00:00 [75437] [INFO] 0x56190c3438b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:07:20.437_026+00:00 [75437] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:07:25.522_741+00:00 [75467] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:07:25.522_749+00:00 [75467] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:07:25.522_791+00:00 [75467] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:07:25.522_795+00:00 [75467] [INFO] create snapshot idx 100000 log_term 1 done: 28 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:07:30.657_764+00:00 [75467] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:07:30.657_773+00:00 [75467] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:07:30.657_795+00:00 [75467] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:07:30.657_799+00:00 [75467] [INFO] create snapshot idx 200000 log_term 1 done: 21 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:07:35.877_007+00:00 [75467] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:07:35.877_017+00:00 [75467] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:07:35.877_038+00:00 [75467] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:07:35.877_041+00:00 [75467] [INFO] create snapshot idx 300000 log_term 1 done: 19 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:08:15.552_950+00:00 [75889] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:08:15.554_306+00:00 [75889] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:08:15.554_344+00:00 [75889] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:08:15.554_348+00:00 [75889] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:08:15.554_375+00:00 [75889] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:08:15.554_380+00:00 [75889] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:08:15.554_383+00:00 [75889] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:08:15.554_419+00:00 [75889] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:08:15.554_575+00:00 [75925] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:08:17.528_635+00:00 [75896] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:08:17.528_648+00:00 [75896] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:08:17.528_664+00:00 [75896] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:08:17.528_675+00:00 [75896] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:08:17.528_681+00:00 [75896] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:08:17.528_686+00:00 [75896] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:08:17.528_705+00:00 [75896] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:08:17.528_764+00:00 [75924] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:08:17.528_772+00:00 [75924] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:08:17.528_782+00:00 [75924] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:08:17.605_672+00:00 [75889] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:08:17.607_587+00:00 [75896] [INFO] 0x563da79ef8b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:08:17.607_860+00:00 [75896] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:08:17.607_867+00:00 [75896] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:08:17.607_917+00:00 [75924] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:08:17.607_926+00:00 [75924] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:08:17.607_968+00:00 [75924] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:08:17.607_970+00:00 [75924] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:08:17.608_008+00:00 [75924] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:08:17.608_011+00:00 [75924] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:08:17.608_016+00:00 [75924] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:08:17.855_933+00:00 [75889] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:08:17.856_187+00:00 [75896] [INFO] 0x563da79efc60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:08:17.856_564+00:00 [75896] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:08:17.856_568+00:00 [75896] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:08:17.856_710+00:00 [75896] [INFO] 0x7f42f80018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:08:17.857_037+00:00 [75896] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:08:17.857_243+00:00 [75924] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:08:17.857_258+00:00 [75924] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:08:17.857_310+00:00 [75924] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:08:17.857_313+00:00 [75924] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:08:17.857_353+00:00 [75924] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:08:17.857_357+00:00 [75924] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:08:17.857_365+00:00 [75924] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:08:18.111_512+00:00 [75894] [INFO] 0x563da79ef8b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:08:18.111_692+00:00 [75894] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:08:23.271_646+00:00 [75924] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:08:23.271_656+00:00 [75924] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:08:23.271_680+00:00 [75924] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:08:23.271_683+00:00 [75924] [INFO] create snapshot idx 100000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:08:28.764_455+00:00 [75924] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:08:28.764_464+00:00 [75924] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:08:28.764_483+00:00 [75924] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:08:28.764_486+00:00 [75924] [INFO] create snapshot idx 200000 log_term 1 done: 17 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:08:34.282_198+00:00 [75924] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:08:34.282_209+00:00 [75924] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:08:34.282_228+00:00 [75924] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:08:34.282_232+00:00 [75924] [INFO] create snapshot idx 300000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:09:13.222_413+00:00 [76342] [====] Start logger: ./srv1.log (32 MB per file, up to 10 files)	[logger.cc:979, start()]
2022-04-27T00:09:13.223_828+00:00 [76342] [INFO] Raft ASIO listener initiated, UNSECURED	[asio_service.cxx:749, asio_rpc_listener()]
2022-04-27T00:09:13.223_859+00:00 [76342] [INFO] parameters: timeout 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, log sync stop gap 99999, reserved logs 10000000, client timeout 4000, auto forwarding OFF, API call type BLOCKING, custom commit quorum size 0, custom election quorum size 0, snapshot receiver INCLUDED, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: BLOCKING, parallel log appending: OFF	[raft_server.cxx:352, apply_and_log_current_params()]
2022-04-27T00:09:13.223_867+00:00 [76342] [INFO] new timeout range: 1000 -- 2000	[raft_server.cxx:326, update_rand_timeout()]
2022-04-27T00:09:13.223_892+00:00 [76342] [INFO]    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
log store start 1, end 0
config log idx 0, prev log idx 0	[raft_server.cxx:149, raft_server()]
2022-04-27T00:09:13.223_896+00:00 [76342] [INFO] peer 1: DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, voting_member
num peers: 0	[raft_server.cxx:242, raft_server()]
2022-04-27T00:09:13.223_899+00:00 [76342] [INFO] global manager does not exist. will use local thread for commit and append	[raft_server.cxx:260, start_server()]
2022-04-27T00:09:13.223_934+00:00 [76342] [INFO] wait for HB, for 50 + [1000, 2000] ms	[raft_server.cxx:285, start_server()]
2022-04-27T00:09:13.224_087+00:00 [76378] [INFO] bg append_entries thread initiated	[handle_append_entries.cxx:49, append_entries_in_bg()]
2022-04-27T00:09:15.153_169+00:00 [76349] [WARN] Election timeout, initiate leader election	[handle_timeout.cxx:286, handle_election_timeout()]
2022-04-27T00:09:15.153_182+00:00 [76349] [INFO] [PRIORITY] decay, target 1 -> 1, mine 50	[handle_priority.cxx:211, decay_target_priority()]
2022-04-27T00:09:15.153_197+00:00 [76349] [INFO] [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 50, hb dead, pre-vote NOT done	[handle_timeout.cxx:299, handle_election_timeout()]
2022-04-27T00:09:15.153_210+00:00 [76349] [INFO] [VOTE INIT] my id 1, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 50)	[handle_vote.cxx:225, request_vote()]
2022-04-27T00:09:15.153_217+00:00 [76349] [INFO] number of pending commit elements: 0	[raft_server.cxx:940, become_leader()]
2022-04-27T00:09:15.153_220+00:00 [76349] [INFO] state machine commit index 0, precommit index 0, last log index 0	[raft_server.cxx:953, become_leader()]
2022-04-27T00:09:15.153_239+00:00 [76349] [INFO] [BECOME LEADER] appended new config at 1	[raft_server.cxx:993, become_leader()]
2022-04-27T00:09:15.153_294+00:00 [76377] [INFO] config at index 1 is committed, prev config log idx 0	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:09:15.153_302+00:00 [76377] [INFO] new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:09:15.153_312+00:00 [76377] [INFO] new configuration: log idx 1, prev log idx 0
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:09:15.275_173+00:00 [76342] [INFO] sent join request to peer 2, tcp://localhost:12345	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:09:15.275_574+00:00 [76349] [INFO] 0x560601da18b0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:09:15.275_885+00:00 [76349] [INFO] new server (2) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:09:15.275_894+00:00 [76349] [INFO] [SYNC LOG] LogSync is done for server 2 with log gap 0 (1 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:09:15.275_948+00:00 [76377] [INFO] config at index 2 is committed, prev config log idx 1	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:09:15.275_961+00:00 [76377] [INFO] new config log idx 2, prev log idx 1, cur config log idx 1, prev log idx 0	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:09:15.276_009+00:00 [76377] [INFO] server 2 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:09:15.276_011+00:00 [76377] [INFO] enable heartbeating for server 2	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:09:15.276_055+00:00 [76377] [INFO] add peer 2, tcp://localhost:12345, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:09:15.276_058+00:00 [76377] [INFO] clearing uncommitted config at log 2, prev 1	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:09:15.276_064+00:00 [76377] [INFO] new configuration: log idx 2, prev log idx 1
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:09:15.525_458+00:00 [76342] [INFO] sent join request to peer 3, tcp://localhost:12346	[handle_join_leave.cxx:132, invite_srv_to_join_cluster()]
2022-04-27T00:09:15.525_706+00:00 [76349] [INFO] 0x560601da1c60 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:09:15.526_085+00:00 [76349] [INFO] new server (3) confirms it will join, start syncing logs to it	[handle_join_leave.cxx:199, handle_join_cluster_resp()]
2022-04-27T00:09:15.526_090+00:00 [76349] [INFO] [SYNC LOG] LogSync is done for server 3 with log gap 1 (2 - 1, limit 99999), now put the server into cluster	[handle_join_leave.cxx:222, sync_log_to_new_srv()]
2022-04-27T00:09:15.526_230+00:00 [76349] [INFO] 0x7f15b00018d0 connected to localhost:12345 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:09:15.526_410+00:00 [76349] [INFO] declined append: peer 2, prev next log idx 4, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:09:15.526_615+00:00 [76377] [INFO] config at index 3 is committed, prev config log idx 2	[handle_commit.cxx:396, commit_conf()]
2022-04-27T00:09:15.526_630+00:00 [76377] [INFO] new config log idx 3, prev log idx 2, cur config log idx 2, prev log idx 1	[handle_commit.cxx:589, reconfigure()]
2022-04-27T00:09:15.526_684+00:00 [76377] [INFO] server 3 is added to cluster	[handle_commit.cxx:667, reconfigure()]
2022-04-27T00:09:15.526_687+00:00 [76377] [INFO] enable heartbeating for server 3	[handle_commit.cxx:671, reconfigure()]
2022-04-27T00:09:15.526_727+00:00 [76377] [INFO] add peer 3, tcp://localhost:12346, voting member	[handle_commit.cxx:766, reconfigure()]
2022-04-27T00:09:15.526_731+00:00 [76377] [INFO] clearing uncommitted config at log 3, prev 2	[handle_commit.cxx:774, reconfigure()]
2022-04-27T00:09:15.526_738+00:00 [76377] [INFO] new configuration: log idx 3, prev log idx 2
peer 1, DC ID 1, tcp://localhost:12347, voting member, 50
peer 2, DC ID 1, tcp://localhost:12345, voting member, 50
peer 3, DC ID 1, tcp://localhost:12346, voting member, 50
my id: 1, leader: 1, term: 1	[handle_commit.cxx:809, reconfigure()]
2022-04-27T00:09:15.780_902+00:00 [76347] [INFO] 0x560601da18b0 connected to localhost:12346 (as a client)	[asio_service.cxx:1233, connected()]
2022-04-27T00:09:15.781_078+00:00 [76347] [INFO] declined append: peer 3, prev next log idx 5, resp next 2, new next log idx 2	[handle_append_entries.cxx:946, handle_append_entries_resp()]
2022-04-27T00:09:21.159_071+00:00 [76377] [INFO] creating a snapshot for index 100000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:09:21.159_080+00:00 [76377] [INFO] create snapshot idx 100000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:09:21.159_099+00:00 [76377] [INFO] snapshot idx 100000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:09:21.159_103+00:00 [76377] [INFO] create snapshot idx 100000 log_term 1 done: 18 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:09:26.539_003+00:00 [76377] [INFO] creating a snapshot for index 200000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:09:26.539_012+00:00 [76377] [INFO] create snapshot idx 200000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:09:26.539_034+00:00 [76377] [INFO] snapshot idx 200000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:09:26.539_038+00:00 [76377] [INFO] create snapshot idx 200000 log_term 1 done: 22 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
2022-04-27T00:09:31.978_581+00:00 [76377] [INFO] creating a snapshot for index 300000	[handle_commit.cxx:482, snapshot_and_compact()]
2022-04-27T00:09:31.978_592+00:00 [76377] [INFO] create snapshot idx 300000 log_term 1	[handle_commit.cxx:523, snapshot_and_compact()]
2022-04-27T00:09:31.978_618+00:00 [76377] [INFO] snapshot idx 300000 log_term 1 created, compact the log store if needed	[handle_commit.cxx:567, on_snapshot_completed()]
2022-04-27T00:09:31.978_623+00:00 [76377] [INFO] create snapshot idx 300000 log_term 1 done: 25 us elapsed	[handle_commit.cxx:534, snapshot_and_compact()]
